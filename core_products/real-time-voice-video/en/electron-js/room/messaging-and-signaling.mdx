# Real-Time Messages and Signaling

- - -

## Feature Overview


ZEGO provides multiple text message sending and receiving functions, implementing sending in-room broadcast messages, barrage messages, simple IM text chat, likes, gift giving, answering questions, and other functions.


| Message Type | Function Description | Application Scenarios | Sending Frequency Limit |
|-------|--------|--------|--------|
| Broadcast Message | Send text messages to all users in the same room. | Can be used for simple in-room chat room scenarios. | Please refer to [Limit Description](/real-time-video-electron-js/room/messaging-and-signaling#limit-description). |
| Barrage Message | Viewers can post their comments during live streaming, which are displayed as scrolling subtitles, increasing interactivity between viewers. | Generally used for scenarios with a large amount of message sending and receiving in the room where message reliability does not need to be guaranteed, such as live streaming barrage. | Please refer to [Limit Description](/real-time-video-electron-js/room/messaging-and-signaling#limit-description).|
| Custom Signal | Send messages to one or more users in the same room. | Generally used for remote control signaling or simple text message sending. For example, in online doll machine scenarios, remotely controlling the movement of the doll machine claw. | Please refer to [Limit Description](/real-time-video-electron-js/room/messaging-and-signaling#limit-description).

In addition, ZEGO also provides a complete Instant Messaging ZIM SDK, providing developers with full-platform interaction, massive concurrency, ultra-low latency, and guaranteed message delivery communication services. For details, please refer to [Instant Messaging](/zim).

## Example Source Code Download

Please refer to [Download Example Source Code](/real-time-video-electron-js/quick-start/run-example-code) to obtain the source code.

For related source code, please check the files in the "/ZegoExpressExample/CommonFeatures/src/main/java/im/zego/roommessage" directory.

## Prerequisites

Before sending real-time messages, please ensure:

- You have created a project in the [ZEGO Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated ZEGO Express SDK in your project and implemented basic audio and video streaming functionality. For details, please refer to [Quick Start - Integration](/real-time-video-electron-js/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-electron-js/quick-start/implementing-video-call).


## Usage Steps

### Send and Receive Broadcast Messages

1. **Send Broadcast messages**

  Call the [sendBroadcastMessage](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-zego-express-engine#send-broadcast-message) interface to send broadcast messages to other users in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [onIMSendBroadcastMessageResult](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~interface~im-zego-zegoexpress-callback-i-zego-im-send-broadcast-message-callback#on-im-send-broadcast-message-result) callback.

  ```java
  // Send broadcast message
  engine.sendBroadcastMessage(roomID, msg, new IZegoIMSendBroadcastMessageCallback() {
      // Handling send broadcast message result callback
      @Override
      public void onIMSendBroadcastMessageResult(int errorCode, long messageID) {
          // Handle success or failure of message sending
      }
  });
  ```
2. **Receive broadcast messages**

  Implement the [onIMRecvBroadcastMessage](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-callback-i-zego-event-handler#on-im-recv-broadcast-message) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. After the sender successfully sends a broadcast message, other users in the same room receive relevant information through this callback, including message content, message ID, sending time, and sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive room broadcast message notification
       *
       * @param roomID Room ID
       * @param messageList Received message list
       */
      @Override
      public void onIMRecvBroadcastMessage(String roomID, ArrayList<ZegoBroadcastMessageInfo> messageList){
          // Handle receiving messages from other users
      }

  }
  ```

### Send and Receive Barrage Messages


1. **Send barrage messages**

  Call the [sendBarrageMessage](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-zego-express-engine#send-barrage-message) interface to send barrage messages to other users in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [onIMSendBarrageMessageResult](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~interface~im-zego-zegoexpress-callback-i-zego-im-send-barrage-message-callback#on-im-send-barrage-message-result) callback.

  ```java
  // Send room barrage message
  engine.sendBarrageMessage("ChatRoom-1", "This is a barrage message", new IZegoIMSendBarrageMessageCallback(){
      // Handling send barrage message result callback
      @Override
      public void onIMSendBarrageMessageResult(int errorCode, String messageID) {
           // Handle success or failure of message sending
      }
  });
  ```
2. **Receive barrage messages**

  Implement the [onIMRecvBarrageMessage](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-callback-i-zego-event-handler#on-im-recv-barrage-message) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. After the sender successfully sends a barrage message, other users in the same room receive relevant information through this callback, including message content, message ID, sending time, and sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive room barrage message notification
       *
       * @param roomID Room ID
       * @param messageList Received message list
       */
      @Override
      public void onIMRecvBarrageMessage(String roomID, ArrayList<ZegoBarrageMessageInfo> messageList){
           // Handle receiving messages from other users
      }

  }
  ```

### Send and Receive Custom Signals

1. **Send custom signals**

  Call the [sendCustomCommand](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-zego-express-engine#send-custom-command) interface to send custom signals to users specified by "toUserList" in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [onIMSendCustomCommandResult](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~interface~im-zego-zegoexpress-callback-i-zego-im-send-custom-command-callback#on-im-send-custom-command-result) callback.

  ```java
  // Send custom signal, only users specified in `toUserList` can receive this signal through onIMSendCustomCommandResult
  // If the `toUserList` parameter is `null`, the SDK will send this signal to all users in the room
  engine.sendCustomCommand(roomID, command, toUserList, new IZegoIMSendCustomCommandCallback() {
      // Handling send user custom message result callback
      @Override
      public void onIMSendCustomCommandResult(int errorCode) {
          // Handle success or failure of message sending
      }
  });
  ```
2. **Receive custom signals**

  Implement the [onIMRecvCustomCommand](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-callback-i-zego-event-handler#on-im-recv-custom-command) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. After the sender successfully sends a custom message, specified users in the same room receive relevant information through this callback, including message content and message sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive custom signal notification
       *
       * @param roomID Room ID
       * @param fromUser Sender of the signal
       * @param command Signal content
       */
      @Override
      public void onIMRecvCustomCommand(String roomID, ZegoUser fromUser, String command){
          // Handle receiving messages from other users
      }

  }
  ```
