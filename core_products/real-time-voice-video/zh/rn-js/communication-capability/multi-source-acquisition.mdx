# 多源采集

- - -
## 功能简介

@@@Multi_source_acquisition_info@@@

## 前提条件

在使用多源采集功能之前，请确保：

@@@Express-Video_Prerequisites@@@

## 实现流程

<div class="mk-warning">


实时语音产品仅支持设置音频采集源。
</div>

### 1 设置音视频采集源

1. 调用 [setVideoSource\|_blank](/unique-api/express-video-sdk/zh/javascript_react-native/classes/_impl_zegoexpressengineimpl_.zegoexpressengineimpl.html#setvideosource) 接口设置视频采集源。

```javascript
/** 使用摄像头作为视频采集源 */
ZegoExpressEngine.instance().setVideoSource(ZegoVideoSourceType.Camera);
```

<div class = 'mk-hint'>

- 如果需要使用媒体播放器作为视频采集源，需先调用 [createMediaPlayer\|_blank](/unique-api/express-video-sdk/zh/javascript_react-native/classes/_impl_zegoexpressengineimpl_.zegoexpressengineimpl.html#createmediaplayer) 接口创建媒体播放器，再通过调用 [setVideoSource\|_blank](/unique-api/express-video-sdk/zh/javascript_react-native/classes/_impl_zegoexpressengineimpl_.zegoexpressengineimpl.html#setvideosource) 接口设置视频采集源类型为 `ZegoVideoSourceType.Player` 和设置视频采集源所使用的媒体播放器实例索引，然后再使用刚创建的媒体播放器加载资源并播放，详情请参考 [媒体播放器\|_blank](!Other_Functions/MediaPlayer)。
- 如果需要使用屏幕共享作为视频采集源，需设置视频采集源类型为 `ZegoVideoSourceType.ScreenCapture`，并开启屏幕共享向 SDK 推屏幕共享视频数据，详情请参考 [屏幕共享\|_blank](!Other_Functions/Share_Screen)。

</div>

2. 调用 [setAudioSource\|_blank](/unique-api/express-video-sdk/zh/javascript_react-native/classes/_impl_zegoexpressengineimpl_.zegoexpressengineimpl.html#setaudiosource) 接口设置音频采集源。

```javascript
/** 使用麦克风作为音频采集源 */
ZegoExpressEngine.instance().setAudioSource(ZegoAudioSourceType.Microphone);
```

<div class = 'mk-hint'>

- 如果需要使用媒体播放器作为音频采集源，需设置音频采集源类型为 `ZegoAudioSourceType.MediaPlayer`，调用 [createMediaPlayer\|_blank](/unique-api/express-video-sdk/zh/javascript_react-native/classes/_impl_zegoexpressengineimpl_.zegoexpressengineimpl.html#createmediaplayer) 接口创建媒体播放器，然后使用刚创建的媒体播放器加载资源并播放，详情请参考 [媒体播放器\|_blank](!Other_Functions/MediaPlayer) 。
- 如果需要使用系统播放声音作为音频采集源，需设置视频采集源类型为 `ZegoVideoSourceType.ScreenCapture`，并开启屏幕共享向 SDK 推屏幕共享音频数据，详情请参考 [屏幕共享\|_blank](!ExpressVideoSDK-Other_Functions/Share_Screen) 。

</div>

### 2 登录房间并推流

登录房间及推流流程，请参考实现视频通话的 [登录房间\|_blank](!Integration/Solution_Implementation#loginRoom) 及 [推流\|_blank](!Integration/Solution_Implementation#publishingStream)。

### 3 （可选）切换音视频采集源

1. 调用 [setVideoSource\|_blank](/unique-api/express-video-sdk/zh/javascript_react-native/classes/_impl_zegoexpressengineimpl_.zegoexpressengineimpl.html#setvideosource) 接口切换视频采集源。

```javascript
/** 使用屏幕共享作为视频采集源 */
ZegoExpressEngine.instance().setVideoSource(ZegoVideoSourceType.ScreenCapture);
```

2. 调用 [setAudioSource\|_blank](/unique-api/express-video-sdk/zh/javascript_react-native/classes/_impl_zegoexpressengineimpl_.zegoexpressengineimpl.html#setaudiosource) 接口切换音频采集源。

```javascript
/** 使用媒体播放器作为音频采集源 */
ZegoExpressEngine.instance().setAudioSource(ZegoAudioSourceType.MediaPlayer);
```

### 4 结束推流

结束推流流程，请参考实现视频通话的 [停止推拉流\|_blank](!Integration/Solution_Implementation#stopPublishingStream)。

```javascript
// 停止推流
ZegoExpressEngine.instance().stopPublishingStream();
```


##  常见问题

@@@Multi_source_acquisition_faq@@@
