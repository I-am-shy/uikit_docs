---
articleID: 1232
---
# 同时推多路流

- - -

##  功能简介

@@@Express_publish_multi_streams@@@

## 示例源码下载

请参考 [下载示例源码](!DownloadDemo/DownloadDemo) 获取源码。

相关源码请查看 “/ZegoExpressExample/Examples/AdvancedStreaming/PublishingMultipleStreams” 目录下的文件。


## 前提条件

在实现推多路流功能之前，请确保：

@@@Express-Video_Prerequisites@@@

## 使用步骤

1. 调用 [getVideoDeviceList](/zh/api?doc=Express_Video_SDK_API~CPP_windows~class~zego-express-i-zego-express-engine#get-video-device-list) 获取可用的视频设备列表。
2. 调用 [useVideoDevice](/zh/api?doc=Express_Video_SDK_API~CPP_windows~class~zego-express-i-zego-express-engine#use-video-device) 接口指定主路流的视频设备，调用 [startPublishingStream](/zh/api?doc=Express_Video_SDK_API~CPP_windows~class~zego-express-i-zego-express-engine#start-publishing-stream) 接口推主路流。
3. 调用 [useVideoDevice](/zh/api?doc=Express_Video_SDK_API~CPP_windows~class~zego-express-i-zego-express-engine#use-video-device) 接口指定第二路流的视频设备，调用 [startPublishingStream](/zh/api?doc=Express_Video_SDK_API~CPP_windows~class~zego-express-i-zego-express-engine#start-publishing-stream) 接口推第二路流。

```cpp
// 获取可用的视频设备
auto videoDeviceList = engine->getVideoDeviceList();

// 为主路流指定视频设备 然后开始推主路流
engine->useVideoDevice(videoDeviceList[0].deviceID, ZEGO_PUBLISH_CHANNEL_MAIN);
engine->startPublishingStream("stream1", ZEGO_PUBLISH_CHANNEL_MAIN);

// 为第二路流指定视频设备 然后开始推第二路流
// 辅路默认不采集，得设置下视频源 (利用实验性 api)

std::string params = "
{
   \"method\":\"express.video.set_video_source\",
    \"params\":{
        \"source\":2,
        \"channel\":1
    }
}";
engine->callExperimentalAPI(params);

engine->useVideoDevice(videoDeviceList[1].deviceID, ZEGO_PUBLISH_CHANNEL_AUX);
engine->startPublishingStream("stream2", ZEGO_PUBLISH_CHANNEL_AUX);
```


## 常见问题

**是否支持同时推 4 路以上的流？**

为了配合实时信令功能，目前 SDK 默认最大推流通道数量为 4 路，但 2.14.0 之前版本默认最大推流通道数量为 2 路。如需支持更多推流通道，请联系 ZEGO 技术支持进行特殊编包。
