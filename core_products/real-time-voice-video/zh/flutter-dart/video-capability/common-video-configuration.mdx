---
articleID: 14368
---
# 常用视频配置

- - -

## 功能简介

<div class="mk-warning">


本文档适用于以下平台： Android、iOS、Windows、Web，其中 [2 修改视频视图模式](!AdvancedModule/Common_Video_Configuration#4_2) 及 [3 设置镜像模式](!AdvancedModule/Common_Video_Configuration#4_3) 暂不支持 Web 平台。  
</div>



@@@Common_Video_Configuration_Function_Introduction@@@



## 示例源码下载

请参考 [下载示例源码](!DownloadDemo/DownloadDemo) 获取源码。

相关源码请查看 “/lib/topics/CommonFunctions/common_video_config” 目录下的文件。

## 前提条件

在设置视频配置之前，请确保：

@@@Express-Video_Prerequisites@@@

## 使用步骤

### 1 修改视频配置

通过调用 [setVideoConfig](/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setVideoConfig.html) 接口修改视频配置，用户既可自定义参数，也可以使用预设值进行设置。

<div class="mk-warning">

需要在推流（[startPublishingStream](/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPublishingStream.html)）前或预览（[startPreview](/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPreview.html)）前设置好相关视频配置，在推流后仅支持编码分辨率和码率的修改。

</div>

#### 自定义参数设置

调用 [setVideoConfig](/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setVideoConfig.html) 接口修改推流视频配置，可通过该接口设置视频帧率、码率、视频采集分辨率和视频编码输出分辨率。若不进行特殊设置，则 SDK 会根据选定的场景，自动设置贴合该场景的分辨率、码率、帧率，以获取最佳体验效果，详情请参考 [场景化音视频配置](!video_proflie)。

<div class="mk-hint">

如果拉流端需要拉取 60 帧的流，需要联系技术支持，详情可参考 [ZEGO Express SDK 是否支持拉 60 帧的流？](https://doc-zh.zego.im/faq/Pull_the_stream_of_60_frames)
</div>

以设置视频采集分辨率为 360p，编码分辨率为 360p，码率为 600 kbps，帧率为 15 fps 为例：

```dart
ZegoVideoConfig videoConfig = ZegoVideoConfig(360, 640, 360, 640, 15, 600, ZegoVideoCodecID.Default);
// 设置视频配置
ZegoExpressEngine.instance.setVideoConfig(videoConfig);
```

<div class="mk-hint">

移动端的宽高分辨率与 PC 端的宽高分辨率是相反的，例如移动端 360p 的分辨率为 360 × 640，而 PC 端 360p 的分辨率为 640 × 360。
</div>

#### 使用预设值设置

除自行设置之外，也可以使用 ZEGO Express SDK 提供的预设组合值，[ZegoVideoConfigPreset](/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoVideoConfigPreset.html) 的预设组合值如下：

| ZegoVideoConfigPreset | 采集分辨率<br/>（宽 × 高） | 编码分辨率<br/>（宽 × 高） | 帧率（fps） | 码率（kbps） |
| ------------------- | ------------------ | --------------- | --------- | ---------- |
|      Preset180P      |       180 × 320        |      180 × 320      |     15      |     300      |
|      Preset270P      |       270 × 480        |      270 × 480      |     15      |     400      |
|      Preset360P      |       360 × 640        |      360 × 640      |     15      |     600      |
|      Preset540P      |       540 × 960        |      540 × 960      |     15      |     1200     |
|      Preset720P      |       720 × 1280       |      720 × 1280     |     15      |     1500     |
|     Preset1080P      |       1080 × 1920      |     1080 × 1920     |     15      |     3000     |  

调用 [setVideoConfig](/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setVideoConfig.html) 接口使用预设值时示例代码如下：

```dart
// 使用预设置进行视频设置
ZegoVideoConfig videoConfig = ZegoVideoConfig.preset(ZegoVideoConfigPreset.Preset1080P);
ZegoExpressEngine.instance.setVideoConfig(videoConfig);
```

### 2 修改视频视图模式

<div class="mk-warning">

设置视频视图模式前，需先停止预览或停止拉流，否则无法生效。

</div>

通过修改视图对象 [ZegoCanvas](/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoCanvas-class.html) 的 “viewMode” 参数可以修改视频的视图模式。目前支持三种视频渲染填充模式：

|枚举值|说明|
|-|-|
| AspectFit |等比缩放，可能有黑边。|
| AspectFill |等比缩放填充整个 View，可能有部分被裁减。|
| ScaleToFill |填充整个 View，图像可能被拉伸。|

三种视频渲染填充模式效果如图所示：

![](/Pics/Android/CommonFeatures/CommonVideoConfig/viewMode_flutter.jpg)

- 上图中展示的原视频分辨率为 300 × 300（宽 × 高），视图大小为 300 × 500（宽 × 高）。
- 上图中原视频尺寸高等于宽，视图尺寸高大于宽，故在 “AspectFit” 渲染模式下，视频上下出现黑边；若此时视图尺寸宽大于高，则在 “AspectFit” 渲染模式下，视频左右将会出现黑边。

以设置预览视图模式为 “AspectFit” 并开始预览为例：

```dart
// previewID 为 通过 createCanvasView 获取的 ID
// 将视图模式设置为 AspectFit
previewCanvas = new ZegoCanvas(previewID, viewMode: ZegoViewMode.AspectFit);
// 开始预览
ZegoExpressEngine.instance.startPreview(previewCanvas);
```


### 3 设置镜像模式

<div class="mk-hint">

该功能在推流前、后设置均可，设置后即时生效。
</div>

在推流前或停止推流后可通过调用 [setVideoMirrorMode](/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setVideoMirrorMode.html) 设置本地预览视频以及推送的视频是否开启镜像模式。目前支持如下四种镜像模式：

|枚举值|说明|
|-|-|
| NoMirror |本地预览和拉流端看到的视频都不是镜像画面。|
| OnlyPreviewMirror |只有本地预览时才是镜像画面，默认采用此模式。|
| OnlyPublishMirror |只有拉流端看到的视频才是镜像画面。|
| BothMirror |本地预览和拉流端看到的视频都是镜像画面。|

四种镜像模式的效果如下：

![](/Pics/Android/CommonFeatures/CommonVideoConfig/mirror_mode_flutter.png)

以设置拉流端镜像且本地预览非镜像为例：

```java
// 设置镜像模式为只有拉流端看到的视频才是镜像画面
ZegoExpressEngine.instance.setVideoMirrorMode(ZegoVideoMirrorMode.OnlyPublishMirror);
```

## 相关文档

- [如何选择视频分辨率、帧率、码率？](https://doc-zh.zego.im/faq/video_info)
- [怎么处理视频放大或黑边问题？](https://doc-zh.zego.im/faq/video_big)
- [怎么处理视频模糊问题？](https://doc-zh.zego.im/faq/video_blur)
