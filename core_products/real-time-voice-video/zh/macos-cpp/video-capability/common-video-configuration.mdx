---
articleID: 9970
---
# 常用视频配置

- - -

## 功能简介

该功能用于在使用场景中指定推流和拉流视频相关配置，如视频采集分辨率、视频编码输出分辨率、视频帧率、码率、视图模式和镜像模式。  

设置合适的视频分辨率、帧率和码率可以在音视频场景中提供用户更好的使用体验。选择合适镜像模式与视图模式则可以让开发者提供个性化的视频显示模式。

## 示例源码下载

请参考 [下载示例源码](https://doc-zh.zego.im/article/9972) 获取源码。

相关源码请查看 “ZegoExpressExample/Examples/CommonFeatures/CommonVideoConfig”目录下的文件。

## 前提条件

在设置视频配置之前，请确保：

- 已在项目中集成 ZEGO Express SDK，实现基本的实时音视频功能，详情请参考  [快速开始 - 集成](https://doc-zh.zego.im/article/9975) 和  [快速开始 - 实现流程](https://doc-zh.zego.im/article/9976)。
- 已在 [ZEGO 控制台](https://console.zego.im) 创建项目，并申请有效的 AppID 和 AppSign，详情请参考 [控制台 - 项目管理](https://doc-zh.zego.im/article/1265)。

## 使用步骤

### 修改视频配置
调用 [setVideoConfig](@setVideoConfig) 修改推流视频配置。可通过该接口设置视频帧率、码率、视频采集分辨率和视频编码输出分辨率。

若不进行设置，则默认视频配置如下：

|配置项|默认值|
|-|-|
|分辨率|360p|
|码率| 600 kbps|
|帧率|15 fps|

<Warning title="注意">

需要在推流前或预览前设置好相关视频配置，在推流后仅支持编码分辨率和码率的修改。

</Warning>



以下以设置视频采集分辨率 360p ，编码分辨率 360p ，码率 600 kbps，帧率 15 fps 为例：

```C++

ZegoVideoConfig videoConfig;

videoConfig.captureHeight = 360;
videoConfig.captureWidth = 640;
videoConfig.encodeHeight = 360;
videoConfig.encodeWidth = 640;
videoConfig.fps = 15
videoConfig.bitrate = 600;

// 设置视频配置
ZegoExpressEngine::getEngine()->setVideoConfig(videoConfig);
```

<Note title="说明">

移动端的宽高分辨率与 PC 端的宽高分辨率是相反的，例如移动端 360p 的分辨率为 360x640，而 PC 端 360p 的分辨率为 640x360。

</Note>



### 修改视频视图模式

<Warning title="注意">

设置视频视图模式前需先停止预览或拉流，否则无法生效。

</Warning>



通过修改视图对象 [ZegoCanvas](@ZegoCanvas) 的 “viewMode” 参数可以修改视频的视图模式。

目前支持三种视频渲染填充模式:

|枚举值|说明|
|-|-|
|ASPECT_FIT|等比缩放，可能有黑边。|
|ASPECT_FILL|等比缩放填充整个 View，可能有部分被裁减。|
|SCALE_TO_FILL|填充整个 View，图像可能被拉伸。|

三种视频渲染填充模式效果如图所示：
![/Pics/Android/CommonFeatures/CommonVideoConfig/viewMode_android.png](http://doc.oa.zego.im/Pics/Android/CommonFeatures/CommonVideoConfig/viewMode_android.png)

以设置预览视图模式为 “ASPECT_FIT” 并开始预览为例：

```C++
// winId为视频预览窗口句柄
ZegoCanvas previewCanvas(winId);
// 将视图模式设置为 ASPECT_FIT
previewCanvas.viewMode = ZegoViewMode::ASPECT_FIT;
// 开始预览
engine->startPreview(&previewCanvas);
```

### 设置镜像模式

可通过调用 [setVideoMirrorMode](@setVideoMirrorMode) 设置本地预览视频以及推送的视频是否开启镜像模式，该模式可以在推流过程中设置并即时生效。

目前一共支持四种镜像模式：

|枚举值|说明|
|-|-|
|NO_MIRROR|本地预览和拉流端看到的视频都不是镜像画面。|
|ONLY_PREVIEW_MIRROR|只有本地预览时才是镜像画面，默认采用此模式。|
|ONLY_PUBLISH_MIRROR|只有拉流端看到的视频才是镜像画面。|
|BOTH_MIRROR|本地预览和拉流端看到的视频都是镜像画面。|

四种镜像模式的效果如下：
![/Pics/Android/CommonFeatures/CommonVideoConfig/mirror_mode_android.png](http://doc.oa.zego.im/Pics/Android/CommonFeatures/CommonVideoConfig/mirror_mode_android.png)
以设置拉流端镜像且本地预览非镜像为例：
```C++
engine->setVideoMirrorMode(ZegoVideoMirrorMode::ONLY_PUBLISH_MIRROR);
```

## 5 API 参考列表

| 方法        | 描述           |
| ----------- | -------------- |
| [setVideoConfig](@setVideoConfig)|设置视频配置，支持设置其他通道的推流  |
| [setVideoMirrorMode](@setVideoMirrorMode)| 设置镜像模式  |
