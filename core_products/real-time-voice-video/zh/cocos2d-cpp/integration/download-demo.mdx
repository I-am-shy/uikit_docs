<div class="sdk-download-wrapper download-area">
    <div class="sdk-download-item-wrapper">
      <div class="download-title">示例源码</div>
      <div class="download-selector">
        <div class="download-select-wrapper" style="padding-right: 0;">
          <a class="download-target-btn" href="javascript:void(0);">GitHub下载</a>
          <ul class="download-dropdown-list">
            <li data-href="https://github.com/zegoim/zego-express-example-topics-cocos2dx" class="dropdown-option">
              GitHub下载
            </li>
          </ul>
        </div>
      </div>
      <div class="download-tips">
        <span data-tip="示例代码内包含了一个 快速开始 专题，展示了如何使用 SDK API，开发者可参考其用法来实现自己的业务。" class="tip-trigger">说明</span>
      </div>
    </div>
  </div>


## 1 示例代码运行指引

### 1.1 准备环境

请确保开发环境满足以下技术要求：
* 安装 cocos2dx 4.0 版本。若未安装，[可点击此处跳转官网下载](https://www.cocos.com/cocos2dx)
* 安装 cmake 3.10 或以上版本。若未安装，[可点击此处跳转官网下载](https://cmake.org/download/)
* 安装 Ninja，否则在 Android Stuido 运行项目时，会报错 CMake Error: CMake was unable to find a build program corresponding to "Ninja".  CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool.  
    - Windows 系统可通过 [可点击此处跳转下载](https://github.com/ninja-build/ninja/releases)，
将 ninja.exe 放在适当的位置。例如，C:\Ninja，并将 C:\Ninja 添加到您的 ％PATH％ 中，确保 CMake 可以找到 ninja.exe。 
    - Mac 系统可以直接通过 homebrew 命令 brew install ninja 完成安装和环境配置。安装完后在控制台输入 ninja -help 能够正常输出相应信息即完成安装。如下所示：
<img src="/Pics/Cocos2dx/ZegoExpressEnigne/ninja.png" height="100%" width="100%">  


根据将 Demo 运行到的平台，可选开发环境或设备：
* 运行 Android 示例要求：安装 Android Studio 以及相关 Android SDK 环境，具体可参考 [相关文档 ](#3125)。Android 版本不低于 4.1 且支持音视频的 Android 设备或模拟器（推荐使用真机），如果是真机，请开启“允许调试”选项。
* 运行 iOS 示例要求：Xcode 13.0 或以上版本，iOS 9.0 或以上版本且支持音视频的 iOS 设备或模拟器（推荐使用真机）。
* 确保所运行设备网络连接正常。

### 1.2 运行示例代码


#### 1.2.1 运行前需要先申请 ZEGO AppID 与 AppSign。

在 [ZEGO 控制台](https://console.zego.im) 创建项目，并申请有效的 AppID 与 AppSign，详情请参考 [控制台 - 项目管理](/console/guide-doc2) 中的“项目信息”。

申请到 AppID 与 AppSign 后，修改 Demo 里的 AppID 为自己申请到的 AppID 与 AppSign。打开zego-express-example-topics-cocos2dx/Classes/HelloWorldScene.cpp，填入申请到的 AppID 与 AppSign，如下：

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/appid.png" >

否则将编译不通过。

#### 1.2.2 从 github 下载的示例源码缺少 cocos2d 文件夹，如下图所示：

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/loss.png" >  

需要用户从使用 cocos2dx 4.0 生成的项目中将 cocos2d 文件夹拷贝到上图位置。    

<font color=red>请务必使用 cocos2dx 4.0 生成的 cocos2d 文件夹，否则会有问题</font>

#### 1.2.3 从 github 下载的示例源码中缺少 SDK，需要先 [下载 SDK 包](#3898) ，并将解压后 libs 文件夹拷贝到如下图所示：

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/copy-sdk.png" >  

 

#### 1.2.4 运行到 Android 设备
1. 通过 Android Stuido 打开 proj.android 目录下的工程，如下：

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/open-android-1.png" >  


<img src="/Pics/Cocos2dx/ZegoExpressEnigne/open-android-2.png" >  

2. 首次加载编译的时候会报找不到 NDK，需要在 local.properties 
 添加 ndk 路径

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/ndk.png" >  


<img src="/Pics/Cocos2dx/ZegoExpressEnigne/ndk-add.png" >  


3. 此外，需要在 app 目录下创建一个 libs 文件夹，将 1.2.3 下载的 Android SDK 拷贝到该目录下,如下:

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/copy-android.png" >  


4. 最后点击编译

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/compile.png" >  

接下来就可以直接运行到 Android 设备了。


#### 1.2.5 运行到 iOS 设备
1. cocos2dx 4.0 通过 cmake直 接生成 xcode 工程，推荐用户专门创建一个文件夹用于存放生成的 xcode 工程，避免中间文件和源码在同一个目录内时会使源码目录混乱不堪。如下命令：
```c
  mkdir ios-builds
  cd   ios-builds
  cmake .. -GXcode -DCMAKE_SYSTEM_NAME=iOS -DCMAKE_OSX_SYSROOT=iphoneos
```

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/ios-b.png" >  


用户可以自定义生成的 xcode 工程目录路径，可以 [参考cocos2dx官网指引](http://docs.cocos.com/cocos2d-x/manualhttps://doc-zh.zego.im/article/installation/CMake-Guide.html)

在执行 cmake .. -GXcode -DCMAKE_SYSTEM_NAME=iOS -DCMAKE_OSX_SYSROOT=iphoneos 命令的时候可能会出现  
-- The C compiler identification is unknown
-- The CXX compiler identification is unknown
错误。  
可以尝试通过升级 cmake 版本到较新版本解决。

2. 双击 zego-express-example-cocos2dx-quick-start.xcodeproj 文件，打开 xcode，将 framework 添加到工程中：

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/add_framework.png" >  


<img src="/Pics/Cocos2dx/ZegoExpressEnigne/add_f_2.png" >  

选择 Add Files

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/add_f_3.png" >  

示例 Demo 默认是设置跑 iOS 模拟器的配置，如果需要切换成正式发布配置，需要修改 Demo 中的 CMakeLists.txt 文件的内容，将跑 iOS 模拟器设备配置：
    
```
   include_directories(${CMAKE_CURRENT_LIST_DIR}/libs/iOS/armv7-arm64-x86_64/ZegoExpressEngine.framework/Headers)
    link_directories(${CMAKE_CURRENT_LIST_DIR}/libs/iOS/armv7-arm64-x86_64/)
    target_link_libraries(${APP_NAME} cocos2d ${CMAKE_CURRENT_LIST_DIR}/libs/iOS/armv7-arm64-x86_64/ZegoExpressEngine.framework)
 ```   
修改为如下正式发包配置：
 ```
   include_directories(${CMAKE_CURRENT_LIST_DIR}/libs/iOS/armv7-arm64/ZegoExpressEngine.framework/Headers)
    link_directories(${CMAKE_CURRENT_LIST_DIR}/libs/iOS/armv7-arm64/)
    target_link_libraries(${APP_NAME} cocos2d ${CMAKE_CURRENT_LIST_DIR}/libs/iOS/armv7-arm64/ZegoExpressEngine.framework)
 ``` 
同时在 xcode 中导入对应的 framework:  

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/add_f_4.png" >  

3. 配置签名

<img src="/Pics/Cocos2dx/ZegoExpressEnigne/sign.png" >  


接着可以直接运行 Demo 到 iOS 设备上了。


### 1.3 体验实时音视频功能

在真机中运行项目，运行成功后，可以看到本端视频画面。

为方便体验，ZEGO 提供了一个 [Web 端调试示例](https://zegodev.github.io/zego-express-webrtc-sample/assistDev/index.html)，在该页面下，输入相同的 AppID、RoomID，输入不同的 UserID、以及对应的 [Token](/console/development-assistance/app-development-assistance)，即可加入同一房间与真机设备互通。当成功开始音视频通话时，可以听到远端的音频，看到远端的视频画面。

