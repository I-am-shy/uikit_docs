---
articleID: 16872
---
# 云代理

- - -

@@@Cloud_Proxy_Reuseable@@@

## 前提条件

在使用云代理之前，请确保：

@@@Express-Video_Prerequisites@@@

## 使用流程

### 1 开通云代理服务

向 ZEGO 技术支持申请开通云代理服务。开通服务后，开发者将会获取到一个云代理域名与端口信息。

### 2 配置云代理

调用 [setCloudProxyConfig\|_blank](@setCloudProxyConfig) 配置云代理。

<div class="mk-warning">

此接口必须在调用 [createEngineWithProfile\|_blank](@createEngineWithProfile) 接口创建引擎前调用。
</div>

- 接口原型

```objc
/**
 * 设置云代理。
 *
 * 此接口需要在 createEngineWithProfile 之前调用。
 * 调用此接口后，Express SDK 所有的网络请求与发送将通过云代理中转。
 *
 * @param proxyList 云代理信息列表，支持设置多个云代理信息。
 * @param token 鉴权 token，如果客户使用的鉴权方式是 appsign，这里可为空。否则必须填 token。
 * @param enable 是否启用云代理
 */
(void)setCloudProxyConfig:(NSArray<ZegoProxyInfo *> *)proxyList
                    token:(NSString *)token
                   enable:(BOOL)enable; 
```

- 调用示例

```objc
 ZegoProxyInfo* proxy = [ZegoProxyInfo alloc];
// 域名与端口，开发者根据开通云代理服务时获取的相关信息填写
 proxy.hostName = @"xxxxxxxxxxxxx.zego.im";
 proxy.port = 10826;  
 NSArray<ZegoProxyInfo *> *inputArray = @[proxy];   
 [ZegoExpressEngine setCloudProxyConfig:inputArray token:@"" enable:TRUE];
```

## 常见问题

### 设置云代理不生效要如何解决？
- 确保已联系 ZEGO 技术支持开通云代理服务，获取到有效的云代理端口与域名。
- 确保在 [createEngineWithProfile\|_blank](@createEngineWithProfile) 前正确设置云代理，不支持中途修改。

### 是否提供本地代理方案？

提供，详情请参考 [本地代理\|_blank](#15831)。
