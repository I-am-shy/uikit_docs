# 音视频渲染

---

## 1 操作场景

在使用 ZEGO Web SDK 时，获取到媒体流后，需要将其渲染到 `video` 或 `audio` 标签上，展示相应的效果。

## 2 操作步骤

本文将介绍使用不同的前端框架实现音视频渲染：

### 2.1 原生JavaScript

1. 在 html 上创建标签。

```html
<video id="localVideo" autoplay muted playsinline></video>
```

2. 创建流后设置到标签的 `srcObject` 属性上。

```javascript
const stream = await zg.createStream({ camera: { video: true, audio: true } });

const localVideo = document.getElementById("localVideo");
// stream 为 MediaStream 对象，开发者可通过赋值给 video 或 audio 的 srcObject 属性进行渲染
localVideo.srcObject = stream;
```


### 2.2 Vue

1. 创建标签。

```html
<video
  v-if="rendered"
  :srcObject.prop="localStream"
  autoplay
  :muted="muted"
></video>
```

2. 创建流后渲染到标签上。

```javascript
this.localStream = await this.zg.createStream({
  camera: { video: true, audio: true },
});
```

### 2.3 Angular

1. 创建标签。

```html
<video [srcObject]="localStream" muted autoplay></video>
```

2. 创建流后渲染到标签上。

```javascript
this.localStream = await this.zg.createStream({
  camera: { video: true, audio: true },
});
```

### 2.4 React

1. 创建标签。

```html
<video ref="{this.videoRef}" autoplay playsinline muted></video>
```

2. 创建流后设置到标签的 `srcObject` 属性上。

```javascript
this.videoRef = React.createRef();
const stream = await this.zg.createStream({
  camera: { video: true, audio: true },
});
this.videoRef.current.srcObject = stream;
```

2. 渲染多个 video。

```javascript
<VideoList streams={this.state.streamList} />

function VideoList(props) {
  let listItems = null;
      listItems = props.streams.map((streamItem, i) =>
      <li key={streamItem.streamID}>
        <video ref={video => {
          if (video !== null) {
            video.srcObject = streamItem.stream
          }
        }} controls muted autoPlay />
      </li>
    );
  return (
    <ul>{listItems}</ul>
  );
}
```
### 2.5 uni-app

1. 创建标签。

```html
<video id="localVideo" autoplay="true" muted></video>
```

2. uni-app 对原生 `video` 标签进行了封装，需要先获取网页上渲染出来的 `video` 标签，再设置 `srcObject` 属性。

```javascript
const localVideo = document.querySelector("#localVideo video");

const localStream = this.zg
  .createStream({
    camera: { video: true, audio: true },
  })
  .then((stream) => {
    localVideo.srcObject = stream;
  })
  .catch((err) => {
    console.error(err);
  });
```
