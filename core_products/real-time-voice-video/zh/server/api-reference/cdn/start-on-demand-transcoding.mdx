---
id: start-on-demand-transcoding
title: "TranscodeMedia"
description: "用户进行 CDN 录制时，可以将录制好的媒体文件存放在 CDN 服务器上，并通过本接口对媒体文件进行点播转码，改变源文件的编码格式、分辨率和码率等属性，在不同终端、网络环境中进行播放。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/cdn/open-api-desc
---

<h1 className={"openapi__heading"}>TranscodeMedia</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


用户进行 CDN 录制时，可以将录制好的媒体文件存放在 CDN 服务器上，并通过本接口对媒体文件进行点播转码，改变源文件的编码格式、分辨率和码率等属性，在不同终端、网络环境中进行播放。

<Warning title="注意">
首次使用本接口之前，请确认是否已经开通 CDN 录制服务。若未开通，请前往 [ZEGO 控制台](https://console.zego.im) 自助开通，详情请参考 [控制台 - 服务配置 - CDN](/console/service-configuration/activate-cdn-service)，或联系 ZEGO 技术支持开通，并配置回调地址，媒体文件转码完成后会通过 [点播转码完成回调](/real-time-video-server/callback/cdn/on-demand-transcoding-completed) 通知。
</Warning>

开发者可以通过 [点播转码完成回调](/real-time-video-server/callback/cdn/on-demand-transcoding-completed) 或 [查询媒体文件任务](/real-time-video-server/api-reference/cdn/describe-media-task) 接口，查看转码任务的状态、文件回放地址等详细信息。

<Note title="调用频率限制">同一个 AppID 下所有房间：20 次/秒</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=TranscodeMedia\n","required":true,"schema":{"type":"string","enum":["TranscodeMedia"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Vendor","in":"query","required":true,"schema":{"type":"string","enum":["Tencent"]},"description":"<p>CDN 厂商名。</p><p>当前仅支持取值为 Tencent：腾讯云。</p>"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"FileId","in":"query","required":true,"schema":{"type":"string"},"description":"需要转码的源文件 ID，可以通过以下方式获取：\n<ul><li><a href=\"/real-time-video-server/callback/cdn/cdn-record-completed\" target=\"blank\">录制文件生成回调</a> 的参数 FileID，仅 CDN 厂商为 Tencent 时会回调该参数。</li><li><a href=\"/real-time-video-server/callback/cdn/merge-media-completed\" target=\"blank\">媒体文件合并完成回调</a> 的参数 file_id。</li><li><a href=\"/real-time-video-server/api-reference/cdn/search-media\" target=\"blank\">检索媒体信息</a> 的参数 FileId。</li></ul>\n\n> **注意**\n>\n> ZEGO 不会对\"传入的 FileId 文件是否真实存在\"进行验证，请您注意填写正确的 FileId；传入错误的 FileId，响应参数中的 Code 为 1000。\n"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Resolution","in":"query","required":true,"schema":{"type":"string","enum":["360p","540p","720p"]},"description":"<p>转码后的媒体文件分辨率，有以下取值可选：</p><ul><li>360p</li><li>540p</li><li>720p</li></ul>\n\n> **注意**\n>\n> 如果您需要自定义文件转码参数，请联系 ZEGO 技术支持配置自定义模板。对于常见的转码规格，默认的各分辨率转码模板对应的参数如下：\n> - 360p：封装格式 MP4，视频编码 H.264，码率 400 kbps，帧率25 fps，音频编码 AAC。\n> - 540p：封装格式 MP4，视频编码 H.264，码率 1000 kbps，帧率 25 fps，音频编码 AAC。\n> - 720p：封装格式 MP4，视频编码 H.264，码率 1800 kbps，帧率 25 fps，音频编码 AAC。\n"}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","description":"以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n<table>\n<thead>\n  <tr><th>返回码</th><th>说明</th><th>处理建议</th></tr>\n</thead>\n<tbody>\n  <tr><td>0</td><td>请求成功。</td><td>-</td></tr>\n  <tr><td>2</td><td>输入参数错误。</td><td>-</td></tr>\n  <tr><td>3</td><td>未开通相关权限。</td><td>请联系 ZEGO 技术支持。</td></tr>\n  <tr><td>4</td><td>CDN 类型不匹配。</td><td>请检查参数。</td></tr>\n  <tr><td>5</td><td>配置错误。</td><td>请联系 ZEGO 技术支持。</td></tr>\n  <tr><td>6</td><td>请求过于频繁。</td><td>请稍后重试。</td></tr>\n  <tr><td>7</td><td>鉴权失败。</td><td>请检查鉴权参数是否正确。</td></tr>\n  <tr><td>1000</td><td>请求失败。</td><td>请联系 ZEGO 技术支持。</td></tr>\n  <tr><td>41003</td><td>文件不存在。</td><td>请确认文件格式、文件 ID 等是否正确。</td></tr>\n</tbody>\n</table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"操作结果描述。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID，由 ZEGO 服务端返回。","example":"3574501647605445341"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>响应数据。</div><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Tencent</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>腾讯云返回内容（Vendor 为 Tencent 时返回）。</div><SchemaItem collapsible={false} name={"TaskId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"媒体文件转码任务的唯一标识 ID，转码结果可以通过 <a href=\"!Callback_onDemand_transcoding\" target=\"blank\">点播转码完成回调</a> 查看。","example":"1500020831-procedurev2-58ed61fcdbb0f78a0bf15cabd8ae4713tt0"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"唯一请求 ID，由请求参数 Vendor 取值对应的 CDN 厂商（即 Tencent）返回，定位问题时需要提供该次请求的 RequestId。","example":"1413c592-5ad4-404e-bfa1-589c32dbcee8"}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"3574501647605445341\",\n  \"Data\": {\n    \"Tencent\": {\n      \"TaskId\": \"1500020831-procedurev2-58ed61fcdbb0f78a0bf15cabd8ae4713tt0\",\n      \"RequestId\": \"1413c592-5ad4-404e-bfa1-589c32dbcee8\"\n    }\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      