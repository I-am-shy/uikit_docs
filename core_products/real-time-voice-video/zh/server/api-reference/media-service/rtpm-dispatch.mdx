---
id: rtpm-dispatch
title: "RTMPDispatchV2"
description: "调用本接口可以发起 RTMP 推拉流调度，支持 'pull' 和 'push' 两种调度模式。"
api: eJztWutPG1cW/1dGtx/SIoNtXi0WZTebVBXSto2SNCttjDYTewKztWfcmSFKFiEZg8GAXyE8gnECpDy8CWBSIDjGwB/D3DvjT94/YXvmjh+AcUJCpH4gSMG+j/O6957zO+fQhxS2W0aOu8jLuXm2Xuakh7yLQ10W5OZkl8T7FF4UkAPpm4PaZIok10h0Gcd+w7G0ureMY0/0nV3m5u0fbjAkmiLjo2RnQN8cxNmVQi5MJtMkPMA4ka/X43EiBk+EjS9yjxMxamZJW43QtSS1iHOxI3/AKTgFvP+UBFL5pF9fGdBHXumL4bw/oR+OUC44EtM3Ngq5sLoXZf753fc/Mfn5LX11OP/yiZp9oh/O6YthbW6bTKyTnQEtMQRS7QyQ0DSVjcy8LeTCVHhKtqSRHt3FsWnK5fRGfSygBd4d+QM45wet/UGcTOGNlyS0q71Oq7kFHFwmOwNM5/VCLnRLkTjW2+ku5EaP/AOVOhZyoduPfRydKG1nOm8UcqFrHp4TFPg4iifCOBvDoRkc2wV63K+9nOCCbTgeLeTChuL41YS6/5QkI3hsEc+mCrnQzdvXGPq9kBvVDyfx3AvKXNt7Sl4k83PDYLiDOcq4dGCm4dWDcbwSAPPsPzVN/tPfbjHa+qi2tqZmRsn0O2oUvLuMg7vU1uWzLxrXPDljlo4XL8QcEDZmywQn1snkAZ4FSUxSO8W9xlQVmhWXzJS8/R+sJPBCN6Pwiof71onIVooMxZyowynkV6bJ2qK6f1h5e8skBya1rT16kciYnyTT9NJSVvlgRNvfMJi0W00eHU6h/UdR4Uq86MPIv3yiRUfys3EceutEHTgeVjN+NfOKuerzdV5n1Mx4IZdotjFkbdGqrU60W4FGh1P44guGzKxqoyEqGJVTT2+TZ1FDs6sulyi5eVEo8aNLDGNd52Ufq7h6GH3jMD+zYaphXADtdfqPR+bmHrC9HuUnHyf8YZUHrEfmDKOc0ICygwn4qaurpH2nsZALkWhKj8QLudG6OuMVH19SVwcPBoezOPSaPEsXcuGq8hhHmQAO9QxVAp7ZszRz7zi/e8ULXtpJr7KWGGKuswrLkKlNEtlQM1nm55t/Z/D+y6LzqEX3HFQ7bzA3REmppAwXwDwx+qOnd8mbAE5u4uf+Qi5xr0dRfLLDapUUVz3r4xv+w3WLDbzX+perLnCg3x4TxXBzTyM4O6ktZdWDcdMs9+7d+7csCk6hzykwDMM40TXRzTmRw2YpDvzAyTLbDWNOJP7iRKWJm+AiZKXTbUy12Nqam5ta7a22Rts3zbavm+ytFWtBXSdy3KXf6dg39obWtobmtga7vcVhb2tqcSI63eUU+g3RwASl2wh36L5kNcxx5mUiO+N6ekqLpvHLQeMBhPT0ir46wHTKtzlZYXBwDQff4FiATG3SbYXcKMQNw48y9IXisQU1M8Y4EVhU4WSlHl6Uux7iyWhEy/mP/IGS5zJ3wiE6ESx2IvBnyZTxDN3mhL2xqbml9etv2pzI8PQnxSySwdlJuqHEurSznhI3XYN5M5AFiT5OYuHAO93IgSTF5613m6eOLMjHSqyXUzgJAm4fElgvhxyI3hBkQTzE2V97OekxOhl9Oxgz7Ebn8YtxajInnEIHc8bNq3bx7jQaQkrcr728xLmRQ5F6OQuSXT2cl0WOPqQ89oFEsiLxQjeyIE7o9QI2OE4EdfVbkKw89sDaB6LkhZWPfB7RzVGS/ZaycmD32rr9b35isfIqHPkDxq5SnAsNgyNODIEHD+3iybSa8eORdT0NketD9OEFhevmJGQxpGUV5EC9vKA0NaL+ClFv8d0Cq/RK3I+i4OLOLXM+ESPJLF6f0dZW1MzvHyiaaepKOW7zXk5WWK/v3CL8LPCPGDLzNj+zTUJbcPMjU+p+RM1ktdWJI3+AJP14KYGDA/pGhrHbDMtOzGuJIT2dxrsbH29NXlBam6sb89xKaOsHOB4p5MLaZErNRvOvwnp6gLpbiDLxENmaIv7VI39AT+/iWED3D96le8D8obddX1oljvXUK7yXq3/IuznRALWcZGV9fL3EPeAkwFJW1uXiZJkXus1peDzyF5WUvtIm50ko/vEnWTLCHU6S3/vGz7QFoIPkGo7tnk8SoG+Ef+RAjQ22iucM37qOCWoC1pMCfrDSJ3UpQuFwfuoQZ1fUTER/GwRE2djSaoCFimcCcdv0uNrkGxJI6SOv8O4bvJFQ342a8ziZOo0xYXBquwyy8HAQB1P4jZ+6CMAh48t4JKtFNwGsn4BkeDgIaDgTwfFw2bnEAfir2WE14yfPF8nOgJqZBMgbj2hzGRwPw6PaHFZzCZzO6SPbOB6lcpUomBB56Y2+vVwEJXtBiirJ1CZenzHkekOmR6gRDEB1pf6KhbnyryvGDlR5Mib0P/fJdNIneSqNo7ilnFzMqXtB+tLMqfQ7nIlDEDQwnwmcyz4lRNKvtdUJLbuKQ6+NPCZQKS9kNxd2i45nTgmwJaSShVziZLJWkaPRVXJPlVU0GzFXVUpdTL3OltzAzucQPf/8BT4M5v2AZ/BKgCSND6FZmilWZn5MEUSGizAmYbe3NTQ2NTQ2NzbYG9tMANrB1NXRvKauzgz9eP8pHo2omYiZaXfeeNjKkIUczsUA1pZom7eqCxSSfaIgczKo0Gizwa8TLzcUx2PzyIJcoqBwggIrWJ/Pw7sMXGMFhApjpywh3v8351IA5UiAghSeMrlmoIJawUPo9d43Rk4cPoXnCzQ9VfeW1cy4uheEezuSVbPDZsKUSeCxxbx/Tz94Ai80uKUlhvKDKRwaLhEAy2+EydR2aaQUOZi71GOUZj40ekic0isJ9S7RzclfURiosPc9AAMZpl3p4Vh3BwXQ7YrU0a70dJRYtFuVHjpiYN7SV7w0pMWH8V5W39igg1ZFovSsZYLtyn3R/fgYbXeH3Wa3HfkHmmw2W2O7VXEbg2ZZoyI91Q9H8q+fHfkDpTV6ejc/G1H3o+ZiwwXQxaVlRSkq2dnsZRLGIy05vErSZ2XXVNPaDCr1KD9bgDL/zV4gm6YymwofcuFsWkqErvp8DASdZErLHl4gh9ayIjMLZCpUwhAXwgBuVtlUeDiYH0zlJ2f1dPoiOTSXORjSMzxNFKtyIr/5yfwyBUxm6Dq2iTxL4/gKWf9NW9x4D9+WE7YD52mkIFVZmrnkOei3VaFfrhGGKb4AjLQ6pIcHqzMtrjf5amsrAIUpMslNg087vrmqJHbbaUnM9zuWUveT1VlDTD+Hunb7aSZVAl51XsVIXJtfu7XoBdutRbdrJKGs1wdZqa3fUiyVVMfFxyLe04i6n6QlUhKL6YeblaSQ+AtE91J95f306GVkOq8fI1OlJAN0oRZTLYgeJ1lZZD1VkS6CAxpOSuCAgh+yvkQX0sIxBL5kimlk8GaMzLwFxGyU8E/QhogZX8GhWRxL64P7FOtSOvrL1ziyYGDdaTUzTp0Ynlsg60uwy4heJB0ja4snC8QVBfj84P6JfgJIezBDkn4yvQmXsqxcpRXvIknx+hxW66lyldXe0mxrabLbW5utLlZ0swJUaIwsBxmlKdOK5SrGTRMKoX74Z0FeTukRoWrTzRkohlV6kANZkQVRAEBrNr2S548jPqPmcurctL15SCSiy4D5TJgXAu8PtdJh+H9+vpAbNaBoVcr1cg97JnU1s47n9vHSan522KA7RnZ2a5Pr+aX7THIkkyYHWzi2WciF8iuzJJOuTeuBdLZoZG2VbP8O2cLWFA5u4uC4thKrTc7DPjrbjgdRffmwkAvhsQW8+6I2ofui92yTZRN46RUQWp9X322+x/bdvhq2T+LIjJpNgI7TmyDX80WDXBfkEA9E41GbF0/0cYJBEWggC3polgMcyN5gMzJzANusywDbZkpys4hCmTsi7+KsdwCLMldvdDK3en0+UYI7ynlZHgSX6chfQViXR+x1N7hEL1QikE+UFS8rVNI9Xso7oVdfGfZfdvwuO36XHb/Ljt9lx++y43fZ8Tuz42cCd4V7pFh9HpaHuiLFE30mhryL4K9pekRZgc99ffdZmftZ8vT3wzCtNAKydPMyZDLlWuOZgfnLm2ZZ8ivmQvuCVVX5hXtc2aN8yHp6YZEBmz5K5E9u99US0+w2fhYpqzb4aghzqp/4WaS6kJ5fDS0qu5GfRYE/ab/vQw7285rkRNvvQwQq9xk/Xa7LFt6ntPBqn1e53frp5/RZOnq1xS/3JC9A/M/a46vt2miv8iN1+BN2+GpqW9HjLGvcBV8kHlRGjrvwdz3QaOIkA5EUQ7+L8ykVu051A4FKqXr2/Xe3UX///wEnUZy0
info_path: core_products/real-time-voice-video/zh/server/api-reference/media-service/open-api-desc
---

<h1 className={"openapi__heading"}>RTMPDispatchV2</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


调用本接口可以发起 RTMP 推拉流调度，支持 "pull" 和 "push" 两种调度模式。

当您需要自行通过 RTMP 协议，从 ZEGO 音视频云进行直播流的推流或拉流时，可以通过本接口获取 RTMP 的推流或拉流节点。开发者在客户端传入流 ID（StreamId）、调度模式（Type）、客户端 IP（ClientIP）和序列号（Sequence）后，ZEGO 媒体服务器（RTC 服务）返回调度结果集，供客户推拉流。

例如，当通过 OBS 等第三方推流工具进行 RTMP 推流时，需要进行推流调度；当需要第三方播放器拉 RTMP 流进行播放时，需要进行拉流调度。

<Warning title="注意">
首次使用本接口，需要联系 ZEGO 技术支持进行配置。
</Warning>
<Note title="调用频率限制">同一个 AppID 下：40 次/秒</Note>
## 旧版接口使用说明

<Accordion title="使用 RTMPDispatch 访问 ZEGO 服务端" defaultOpen="false">
<Note title="说明">

**RTMPDispatchV2（推荐）** 和 **RTMPDispatch** 的区别是，访问 ZEGO 服务端时：

- 使用的是 `RTMPDispatchV2`，ZEGO 服务端返回的 Data 数据为 URL 形式。
- 使用的是 `RTMPDispatch`，ZEGO 服务端返回的 Data 数据为 IP Port 形式。

</Note>

请求地址：`https://rtc-api.zego.im/?Action=RTMPDispatch`

响应示例：

```json
{
    "Code":0,
    "Message":"ok",
    "RequestId":"5094436160208407316",
    "Data":[
        "81.69.49.115:1935"
    ]
}
```
</Accordion>
<br/>

<Note title="说明">
测试环境下（详见 IsTest 公共参数说明），流 ID 需要加上 "zegotest-AppId-" 前缀。例如，流 ID 为 "test"，在 AppId 为 "123456789" 的测试环境下，流 ID 应为 "zegotest-123456789-test"。
</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=RTMPDispatchV2\n","required":true,"schema":{"type":"string","enum":["RTMPDispatchV2"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#签名机制)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"StreamId","in":"query","required":true,"schema":{"type":"string"},"description":"流 ID，长度不超过 256 的字符串。\n- 流 ID 由您自己定义。\n- 在推流时，需要在整个 AppID 内全局唯一，若出现在同一个 AppID 内，不同的用户各推了一条流且流名相同，将会导致后推流的用户推流失败。\n- 仅支持数字，英文字符 和 '-', '_'。\n"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Sequence","in":"query","required":true,"schema":{"type":"Int64"},"description":"请求序列号；仅用于请求对帐，推荐使用时间戳（毫秒级别）。"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Type","in":"query","required":true,"schema":{"type":"string"},"description":"调度模式：\n- pull：获取 RTMP 的拉流节点\n- push：获取 RTMP 的推流节点\n"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"ClientIP","in":"query","required":false,"schema":{"type":"string"},"description":"非必选，如有，则传入客户端 IP 地址，例如：119.23.242.129。\n\n> **注意**\n>\n> 当前不支持 IPv6 格式的 IP 地址。\n"}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"integer","format":"number","description":"返回码。\n以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n<table>\n  <thead>\n    <tr><th>返回码</th><th>说明</th><th>处理建议</th></tr>\n  </thead>\n  <tbody>\n    <tr><td>1010、30002</td><td>接口调用频率过高。</td><td>请降低接口请求频率。</td></tr>\n    <tr><td>1001</td><td>调度失败。</td><td>请联系 ZEGO 技术支持处理。</td></tr>\n    <tr><td>1002</td><td>推流节点为空。</td><td>请联系 ZEGO 技术支持处理。</td></tr>\n    <tr><td>1003</td><td>拉流节点为空。</td><td>请联系 ZEGO 技术支持处理。</td></tr>\n    <tr><td>1005</td><td>App 不在线。</td><td>请联系 ZEGO 技术支持处理。</td></tr>\n    <tr><td>1006</td><td>无效参数。</td><td>请联系 ZEGO 技术支持处理。</td></tr>\n    <tr><td>30003</td><td>内部错误。</td><td>请联系 ZEGO 技术支持处理。</td></tr>\n    <tr><td>30004</td><td>参数 isTest 错误。</td><td>请检查公共请求参数 isTest 是否正确。</td></tr>\n    <tr><td>30005</td><td>无效的 AppId。</td><td>请检查 AppId 是否正确。</td></tr>\n    <tr><td>30009</td><td>无效的 StreamId，流名不规范。</td><td>请检查 StreamId 是否符合流名编码规范。</td></tr>\n    <tr><td>30010</td><td>无效的调度动作。</td><td>请检查 Type 是否正确。</td></tr>\n    <tr><td>30011</td><td>无效的客户端 IP 地址。</td><td>请检查 ClientIP 是否正确。</td></tr>\n  </tbody>\n</table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"操作结果描述","example":"ok"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID","example":"5094436160208407316"}}></SchemaItem><SchemaItem collapsible={false} name={"Data"} required={false} schemaName={"object"} qualifierMessage={undefined} schema={{"type":"object","description":"RTMP 推流或拉流节点。\n\n> **说明**\n>\n> 获取此节点后，请在 2 小时内发起推流或拉流，否则可能导致节点被占用或下线。因此，建议每次进行 RTMP 推拉流时，都调用本接口获得最新的节点。\n","example":["rtmp://81.69.49.115:1935/1540531164/caodantest"]}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"ok\",\n  \"RequestId\": \"5094436160208407316\",\n  \"Data\": [\n    \"rtmp://81.69.49.115:1935/1540531164/caodantest\"\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      