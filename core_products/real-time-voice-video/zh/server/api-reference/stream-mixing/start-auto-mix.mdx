---
id: start-auto-mix
title: "StartAutoMix"
description: "本文介绍如何调用服务端 API 接口，指定房间，自动将房间内的所有 `音频` 流进行混流。可以应用在语聊房、合唱等场景中。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/stream-mixing/open-api-desc
---

<h1 className={"openapi__heading"}>StartAutoMix</h1>

<MethodEndpoint method={"post"} path={"/"}></MethodEndpoint>


本文介绍如何调用服务端 API 接口，指定房间，自动将房间内的所有 `音频` 流进行混流。可以应用在语聊房、合唱等场景中。

在跨房间 PK 连麦等场景中，支持增加其他房间内的某条流，参与自动混流；或剔除当前房间的某条流，不参与自动混流，具体请参考请求参数中的 `ExtraMixInput` 参数说明。

<Note title="说明">
* 目前只支持自动混 `音频` 流。
* 后续房间内如果有流新增或删除，您都不需要做任何处理，ZEGO 服务端内部自动更新混流。
</Note>

“客户端”的混流功能，请参考 [混流 - 自动混流](/real-time-video-android-java/live-streaming/stream-mixing)；“服务端”的相关回调，请参考 [混流开始回调](/real-time-video-server/callback/stream-mixing/started) 和 [混流结束回调](/real-time-video-server/callback/stream-mixing/stopped)。
## 前提条件

在实现混流之前，请确保：

- 已在 [ZEGO 控制台](https://console.zego.im) 创建项目，并申请有效的 AppId 和 ServerSecret，详情请参考 [控制台 - 项目信息](/console/project-info)。
- 已在 [ZEGO 控制台](https://console.zego.im) 自助接入服务开通“混流”服务权限，详情请参考 [控制台 - 服务配置 - 混流](/console/service-configuration/enable-stream-mixing-service)，或联系 ZEGO 技术支持开通。
- 已通过开发者自己的客户端，在房间内发起推拉流，详情请参考 [实现视频通话](/real-time-video-android-java/quick-start/implementing-video-call)。
- 若您希望创建自动混流时，如果房间不存在，可自动创建对应房间，请联系 ZEGO 技术支持开启相关功能。
<Note title="说明">
测试环境下（详见 IsTest 公共参数说明），`输入流`的流 ID 和`输出流`的流 ID：

- 如果是开发者自己输入的原始流 ID，需要加上 “zegotest-AppId-” 前缀，否则会导致混流失败（混流服务器拉不到输入流或拉不到混流输出流）。例如，开发者输入流 ID 为 “test”，在 AppId 为 “123456789” 的测试环境下，流 ID 应为 “zegotest-123456789-test”。
- 如果是通过 SDK 接口，或通过服务端 API 接口获取到的，此时不需要添加 “zegotest-AppId-” 的前缀。
</Note>

<Note title="调用频率限制">100 次/秒</Note>

**此接口中只有部分参数在开始混流后支持动态更新，未标注的则不支持动态更新，详情请参考下表中的参数描述。**

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=StartAutoMix\n","required":true,"schema":{"type":"string","enum":["StartAutoMix"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem></ul></div></details>
<MimeTabs className={"openapi-tabs__mime request"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3><strong className={"openapi-schema__required"}>required</strong></summary><ul className={"request-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"TaskId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"任务 ID，混流任务的唯一标识。\n- 重复调用\"开始混流\"接口，传入相同的 TaskId，可以直接更新混流任务信息。\n- 发起\"音视频\"混流时，如果之前已发起过对应 TaskId 的\"纯音频\"混流任务，则需要先停止此任务，再重新发起\"音视频\"混流任务。\n","example":"2213699902971205739"}}></SchemaItem><SchemaItem collapsible={false} name={"UserId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"发起混流任务的用户 ID，由开发者自定义。\n\n**同一个任务的用户 ID 需要一致，不同任务的用户 ID 需要保持不同**。\n\n通过 UserId 可以实现混流任务的用户归属，也就是该用户才能更新或者停止对应 TaskId 的混流任务，该功能需要联系 ZEGO 技术支持开通。\n","example":"123"}}></SchemaItem><SchemaItem collapsible={false} name={"RoomId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"房间 ID。","example":"room123"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>ExtraMixInput</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>额外的输入流列表（其他房间内的流），默认最多支持 9 条额外的输入流。<br/>**📌注意**<br/>开启自动混流时，最多支持 9 条输入流。即该房间内的流，增加、剔除（根据 ModifyType 取值判断增加或删除某条流）额外的输入流后，流的总数量不能超过 9 条。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"StreamId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"room_other_stream1","description":"混流输入流 ID，该流 ID 来自 RTC 服务。\n\n仅支持数字、英文字符和 \"-\"、\"_\"。\n\n> **注意**\n>\n> StreamId 和 StreamUrl 二者取其一即可，若同时填写 StreamId 和 StreamUrl：\n> - ModifyType 为 0（增加）时，StreamUrl 生效。\n> - ModifyType 为 1（剔除）时，StreamId 生效。\n"}}></SchemaItem><SchemaItem collapsible={false} name={"StreamUrl"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"","description":"混流输入流 URL，支持 RTMP 和 HTTP-FLV 两种协议。\n\n> **注意**\n>\n> StreamId 和 StreamUrl 二者取其一即可，若同时填写 StreamId 和 StreamUrl：\n> - ModifyType 为 0（增加）时，StreamUrl 生效。\n> - ModifyType 为 1（剔除）时，StreamId 生效。\n"}}></SchemaItem><SchemaItem collapsible={false} name={"ModifyType"} required={false} schemaName={"int"} qualifierMessage={"**Possible values:** [`0`, `1`]"} schema={{"type":"integer","format":"int","enum":[0,1],"description":"输入流列表的类型，表示在当前混流任务中\"增加\"或\"剔除\"该条输入流：\n- 0：开启自动混流时，在输入流列表中**增加**当前流，默认值\n- 1：开启自动混流时，在输入流列表中**剔除**当前流。此时只需要填写 StreamId 和本参数的取值即可\n"}}></SchemaItem><SchemaItem collapsible={false} name={"SoundLevelId"} required={false} schemaName={"int"} qualifierMessage={undefined} schema={{"type":"integer","format":"int","description":"声浪 ID。参数 SoundLevel（混流声浪）取值为 \"1\" 时，此参数必填。\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Volume"} required={false} schemaName={"int"} qualifierMessage={undefined} schema={{"type":"integer","format":"int","default":100,"description":"音量，取值范围 [0, 200]，默认为 100。"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>MixOutput</strong><span className={"openapi-schema__name"}> object[]</span><span className={"openapi-schema__divider"}></span><span className={"openapi-schema__required"}>required</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>输出流信息，目前最多支持 3 个。当输出目标为 URL 格式时，目前只支持 RTMP URL 格式：rtmp://xxxxxxxx，且不能传入两个相同的混流输出的地址。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"StreamId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"stream3","description":"输出流 ID。默认情况下表示混流输出至 RTC 或低延迟直播产品，也可联系 ZEGO 技术支持配置混流输出至 ZEGO 代理的 CDN 直播产品，生效范围为整个 AppId。如果希望控制指定流输出至 CDN 直播产品，则不能配置混流默认输出至 ZEGO 代理 CDN，应按需设置 StreamUrl。\n\n**StreamId 和 StreamUrl 二者取其一即可，若填写了 StreamId，则 StreamUrl 不生效。**\n"}}></SchemaItem><SchemaItem collapsible={false} name={"StreamUrl"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"","description":"仅支持 RTMP 协议，表示混流输出至 CDN 直播服务，观众可以从 CDN 直播拉混流。\n\n**StreamId 和 StreamUrl 二者取其一即可，若填写了 StreamUrl，则 StreamId 不生效。**\n"}}></SchemaItem><SchemaItem collapsible={false} name={"AudioCodec"} required={false} schemaName={"int"} qualifierMessage={"**Possible values:** [`0`, `1`, `2`, `3`]"} schema={{"type":"integer","format":"int","enum":[0,1,2,3],"example":0,"description":"音频编码及采样率。如需修改采样率，请联系 ZEGO 技术支持配置：\n- 0：HE-AAC，采样率：44100 kHz，默认值\n- 1：AAC-LC，采样率：44100 kHz\n- 2：MP3，采样率：44100 kHz\n- 3：OPUS，采样率：48000 kHz\n"}}></SchemaItem><SchemaItem collapsible={false} name={"AudioBitrate"} required={false} schemaName={"int"} qualifierMessage={undefined} schema={{"type":"integer","format":"int","description":"混流输出音频码率，不填时默认值为 48000，单位为 bps。"}}></SchemaItem><SchemaItem collapsible={false} name={"SoundChannel"} required={false} schemaName={"int"} qualifierMessage={"**Possible values:** [`1`, `2`]"} schema={{"type":"integer","format":"int","enum":[1,2],"description":"输出音频声道数，优先级比全局参数高：\n- 1：单声道，默认值\n- 2：双声道\n"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem><SchemaItem collapsible={false} name={"Sequence"} required={false} schemaName={"int"} qualifierMessage={undefined} schema={{"type":"integer","format":"int","description":"混流请求的序列号，用于保证时序，同个任务的参数修改需要保证序列号的递增。例如：\"Sequence\": 1。\n\n**如果开启了混流任务的时序控制（如有需要，请联系 ZEGO 技术支持开启），此参数必填。**\n"}}></SchemaItem><SchemaItem collapsible={false} name={"UserData"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"base64_encoded_data","description":"自定义用户数据，使用时需要对此参数内容进行 base64 编码。长度限制为 4000 字节，建议不超过 850 字节。\n\n自定义的用户数据将作为 SEI 信息传输给拉流方，拉流方可通过监听客户端的 <a href=\"https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-player-sync-recv-sei-stream-id\" target=\"_blank\">onPlayerSyncRecvSEI</a> 回调获取该数据。\n\n**🔁再次调用本接口，即可动态更新该参数。**\n"}}></SchemaItem><SchemaItem collapsible={false} name={"SoundLevel"} required={false} schemaName={"int"} qualifierMessage={"**Possible values:** [`0`, `1`]"} schema={{"type":"integer","format":"int","enum":[0,1],"example":0,"description":"混流声浪，指混流的音量大小。支持混流过程中实时更新：\n- 0：不开启，默认值\n- 1：开启。开启后，客户端可以通过 <a href=\"https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-auto-mixer-sound-level-update\" target=\"_blank\">onAutoMixerSoundLevelUpdate</a> 回调来接收自动混流声浪更新的通知\n\n**🔁再次调用本接口，即可动态更新该参数。**\n"}}></SchemaItem><SchemaItem collapsible={false} name={"ByPass"} required={false} schemaName={"int"} qualifierMessage={"**Possible values:** [`0`, `1`]"} schema={{"type":"integer","format":"int","default":0,"enum":[0,1],"description":"单流透传开关，即输入流就一个时是否按输出参数重新编码，该功能需要联系 ZEGO 技术支持开通：\n- 0：不启用，默认值\n- 1：启用\n"}}></SchemaItem><SchemaItem collapsible={false} name={"SoundChannel"} required={false} schemaName={"int"} qualifierMessage={"**Possible values:** [`1`, `2`]"} schema={{"type":"integer","format":"int","default":1,"enum":[1,2],"description":"输出音频声道数，当没有指定输出流时使用该配置：\n- 1：单声道，默认值\n- 2：双声道\n"}}></SchemaItem><SchemaItem collapsible={false} name={"AlignmentType"} required={false} schemaName={"int"} qualifierMessage={"**Possible values:** [`0`, `1`, `2`]"} schema={{"type":"integer","format":"int","enum":[0,1,2],"description":"控制播放的实时音视频流是否需要按照 NTP（网络时间）精准对齐后进行混流。**此参数主要应用于 KTV 场景中，会增加一定的混流延时；非 KTV 类似场景，不建议设置此参数。**\n- 0：不对齐，默认值\n- 1：指定流对齐\n- 2：所有流强制对齐\n"}}></SchemaItem><SchemaItem collapsible={false} name={"RecvBufferLevel"} required={false} schemaName={"int"} qualifierMessage={"**Possible values:** `>= 0` and `<= 4000`"} schema={{"type":"integer","format":"int","minimum":0,"maximum":4000,"description":"控制拉流最小缓冲时间，取值范围 [0, 4000]，单位：毫秒；默认最小缓冲时间为 0。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>ExPara</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>拓展参数，根据实际情况填入，常规任务可不填。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"Key"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"k1","description":"key 值。"}}></SchemaItem><SchemaItem collapsible={false} name={"Value"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"v1","description":"value 值。"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></ul></details></TabItem></MimeTabs>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int"} qualifierMessage={undefined} schema={{"type":"integer","format":"int","description":"以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n<thead>\n  <tr><th>返回码</th><th>说明</th><th>处理建议</th></tr>\n</thead>\n<tbody>\n  <tr><td>110200001</td><td>失败。</td><td>请重试。</td></tr>\n  <tr><td>110200002</td><td>输入参数错误。</td><td>请参考 Message 信息处理。</td></tr>\n  <tr><td>110200003</td><td>鉴权失败。</td><td>请确认鉴权信息是否正确或过期，详情请参考 <a href=\"!Making_API_Requests/Making_API_Requests#5\" target=\"_blank\">调用方式</a> 中的 \"3 签名机制\"。</td></tr>\n  <tr><td>110200004</td><td>解析输入参数失败。</td><td>请检查混流参数是否正确。</td></tr>\n  <tr><td>110200005</td><td>混流开始获取分布式锁失败。</td><td>同一个 UserId 开始混流请求过于频繁，请稍后再试。</td></tr>\n  <tr><td>110200006</td><td>混流结束获取分布式锁失败。</td><td>同一个 UserId 停止混流请求过于频繁，请稍后再试。</td></tr>\n  <tr><td>110200151</td><td>混流任务失败。</td><td>请重试，或联系 ZEGO 技术支持处理。</td></tr>\n  <tr><td>110200194</td><td>混流请求过载。</td><td>请求过于频繁，请稍后再试。</td></tr>\n</tbody>\n</table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"操作结果描述。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID。","example":"8472822294336370476"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>响应数据。</div><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"用户 ID。","example":"123"}}></SchemaItem><SchemaItem collapsible={false} name={"Sequence"} required={false} schemaName={"int"} qualifierMessage={undefined} schema={{"type":"integer","format":"int","description":"序列号。","example":1}}></SchemaItem><SchemaItem collapsible={false} name={"RoomId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"房间 ID。","example":"room123"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>PlayInfo</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>播放信息。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"StreamId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"输出流的流 ID。","example":"test"}}></SchemaItem><SchemaItem collapsible={false} name={"RTMP"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"RTMP 协议对应的 CDN 播放地址（如果指定混流输出地址是 CDN 并且配置了这个协议的拉流域名）。","example":"rtmp://domain/appname/test"}}></SchemaItem><SchemaItem collapsible={false} name={"HLS"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"HLS 协议对应的 CDN 播放地址（如果指定混流输出地址是 CDN 并且配置了这个协议的拉流域名）。","example":"http://domain/appname/test/playlist.m3u8"}}></SchemaItem><SchemaItem collapsible={false} name={"FLV"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"HTTP-FLV 协议对应的 CDN 播放地址（如果指定混流输出地址是 CDN 并且配置了这个协议的拉流域名）。","example":"http://domain/appname/test.flv"}}></SchemaItem><SchemaItem collapsible={false} name={"Status"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer","description":"流状态。","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"UserName"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"用户名称。","example":""}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"8472822294336370476\",\n  \"Data\": {\n    \"UserId\": \"123\",\n    \"Sequence\": 1,\n    \"RoomId\": \"room123\",\n    \"PlayInfo\": [\n      {\n        \"StreamId\": \"test\",\n        \"RTMP\": \"rtmp://domain/appname/test\",\n        \"HLS\": \"http://domain/appname/test/playlist.m3u8\",\n        \"FLV\": \"http://domain/appname/test.flv\",\n        \"Status\": 0,\n        \"UserName\": \"\"\n      }\n    ]\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      