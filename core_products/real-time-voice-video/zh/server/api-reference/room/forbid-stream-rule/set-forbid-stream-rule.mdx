---
id: set-forbid-stream-rule
title: "SetForbidStreamRule"
description: "设置音视频流封禁规则。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/forbid-stream-rule/open-api-desc
---

<h1 className={"openapi__heading"}>SetForbidStreamRule</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


设置音视频流封禁规则。

设置成功后，您可以 [查询音视频流封禁规则](./describe-forbid-stream-rules.mdx) 或 [删除音视频流封禁规则](./del-forbid-stream-rule.mdx)。

<Note title="调用频率限制">同一个 AppID 下所有房间：10 次/秒。</Note>
<Warning title="注意">
参数 DisableAudio 和 DisableVideo 的使用：
- 必须至少有一个取值为 1，否则调用本接口会出错。
- 针对同一条流 ID，如果多次调用本接口设置不同的封禁规则（每次调用接口时的 DisableAudio 和 DisableVideo 参数取值不同），则以最后一次调用接口的参数设置为准。
</Warning>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SetForbidStreamRule\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SetForbidStreamRule"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"StreamId","in":"query","description":"流 ID，最大不超过 256 字节。","required":true,"schema":{"type":"string","maxLength":256}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisableAudio","in":"query","description":"是否封禁音频。0：不封禁（默认）；1：封禁。","required":false,"schema":{"type":"integer","format":"int32","enum":[0,1],"default":0}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisableVideo","in":"query","description":"是否封禁视频。0：不封禁（默认）；1：封禁。","required":false,"schema":{"type":"integer","format":"int32","enum":[0,1],"default":0}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"EffectiveTime","in":"query","description":"封禁规则有效时长，单位：秒。默认 21600。范围 1 ～ 86400（超过 24 小时的取值将自动调整为 24 小时）。","required":false,"schema":{"type":"integer","format":"int64","minimum":1,"maximum":86400,"default":21600}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>请求成功。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>请求失败。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td>输入参数错误。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td>未开通当前接口的使用权限。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>123</td>\n      <td>设置流信息失败。</td>\n      <td>请重试，或联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>206</td>\n      <td>App 请求 QPS 过高被限制。</td>\n      <td>降低请求频率，或联系 ZEGO 技术支持提高 QPS 限制阈值。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"操作结果描述。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID。","example":"TestRequestId167562222222915000"}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"TestRequestId167562222222915000\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      