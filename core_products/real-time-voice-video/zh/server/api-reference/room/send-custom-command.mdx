---
id: send-custom-command
title: "SendCustomCommand"
description: "调用本接口在房间内推送自定义消息，即向同一房间内指定的单个或多个用户发送信令消息。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/open-api-desc
---

<h1 className={"openapi__heading"}>SendCustomCommand</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


调用本接口在房间内推送自定义消息，即向同一房间内指定的单个或多个用户发送信令消息。

客户端接收消息使用 ZEGO Express SDK 回调接口：

| 平台 |ZegoExpress SDK|LiveRoom SDK|
|-|-|-|
|iOS/macOS| onIMRecvCustomCommand | onReceiveCustomCommand |
|Android| onIMRecvCustomCommand | onRecvCustomCommand |
|Windows| onIMRecvCustomCommand |   OnRecvCustomCommand |
|Web| IMRecvCustomCommand | onRecvCustomCommand |

<Note title="调用频率限制">同一个 AppID 下所有房间：100 次/秒（测试环境：10 次/秒）</Note>
<Warning title="注意">
- 在服务端通过某个 FromUserId 发送消息时，使用相同 FromUserId 的客户端不会收到该条消息，即发送方不能接收到自己发送的消息。
- 如果开发者需要让房间内的所有用户都收到消息，调用本接口时，应传入该房间用户之外的 FromUserId。
- 使用的 FromUserId 无需登录该房间，即可直接发送消息。
</Warning>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SendCustomCommand\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SendCustomCommand"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"FromUserId","in":"query","description":"发送方用户 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"ToUserId","in":"query","description":"自定义消息目的用户 ID，最大支持 10 个目的用户 ID。\n如果不填写该参数，自定义消息广播给房间内所有用户；如果填写了该参数，自定义消息只推送到目的用户。\n示例：ToUserId[]=user1&ToUserId[]=user2\n","required":false,"schema":{"type":"array","items":{"type":"string"},"minItems":1,"maxItems":10},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"MessageContent","in":"query","description":"自定义消息内容，长度不能超过 1024 个字节。使用时，需对其内容执行 URL 编码（UrlEncode）处理。","required":true,"schema":{"type":"string","maxLength":1024}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>50003</td>\n      <td>查找用户在线信息失败。</td>\n      <td>请确认请求用户 UserId 是否在线。</td>\n    </tr>\n    <tr>\n      <td>50011</td>\n      <td>用户列表长度过长。</td>\n      <td>请检查请求包中的用户个数是否超过限制。</td>\n    </tr>\n    <tr>\n      <td>50012</td>\n      <td>消息长度超过限制。</td>\n      <td>请检查参数长度是否超过限制。</td>\n    </tr>\n    <tr>\n      <td>50013</td>\n      <td>发送自定义消息失败。</td>\n      <td>请重试，或联系 ZEGO 技术支持处理。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":3005402395393320000,"description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>FailUsers</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>处理失败的目标用户 ID 列表。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"Uid"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"1111","description":"用户 ID。"}}></SchemaItem><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":50003,"description":"失败的错误码（不在线：50003）。"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": 3005402395393320000,\n  \"Data\": {\n    \"FailUsers\": [\n      {\n        \"Uid\": \"1111\",\n        \"Code\": 50003\n      }\n    ]\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      