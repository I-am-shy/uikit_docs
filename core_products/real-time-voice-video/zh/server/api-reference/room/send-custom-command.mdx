---
id: send-custom-command
title: "SendCustomCommand"
description: "调用本接口在房间内推送自定义消息，即向同一房间内指定的单个或多个用户发送信令消息。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/open-api-desc
---

<h1 className={"openapi__heading"}>SendCustomCommand</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


调用本接口在房间内推送自定义消息，即向同一房间内指定的单个或多个用户发送信令消息。

客户端接收消息使用 ZEGO Express SDK 回调接口：

| 平台 |ZegoExpress SDK|LiveRoom SDK|
|-|-|-|
|iOS/macOS| onIMRecvCustomCommand | onReceiveCustomCommand |
|Android| onIMRecvCustomCommand | onRecvCustomCommand |
|Windows| onIMRecvCustomCommand |   OnRecvCustomCommand |
|Web| IMRecvCustomCommand | onRecvCustomCommand |

<Note title="调用频率限制">同一个 AppID 下所有房间：100 次/秒（测试环境：10 次/秒）</Note>
<Warning title="注意">
- 在服务端通过某个 FromUserId 发送消息时，使用相同 FromUserId 的客户端不会收到该条消息，即发送方不能接收到自己发送的消息。
- 如果开发者需要让房间内的所有用户都收到消息，调用本接口时，应传入该房间用户之外的 FromUserId。
- 使用的 FromUserId 无需登录该房间，即可直接发送消息。
</Warning>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SendCustomCommand\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SendCustomCommand"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#签名机制)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"FromUserId","in":"query","description":"发送方用户 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"ToUserId","in":"query","description":"自定义消息目的用户 ID，最大支持 10 个目的用户 ID。\n如果不填写该参数，自定义消息广播给房间内所有用户；如果填写了该参数，自定义消息只推送到目的用户。\n示例：ToUserId[]=user1&ToUserId[]=user2\n","required":false,"schema":{"type":"array","items":{"type":"string"},"minItems":1,"maxItems":10},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"MessageContent","in":"query","description":"自定义消息内容，长度不能超过 1024 个字节。使用时，需对其内容执行 URL 编码（UrlEncode）处理。","required":true,"schema":{"type":"string","maxLength":1024}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>50003</td>\n      <td>查找用户在线信息失败。</td>\n      <td>请确认请求用户 UserId 是否在线。</td>\n    </tr>\n    <tr>\n      <td>50011</td>\n      <td>用户列表长度过长。</td>\n      <td>请检查请求包中的用户个数是否超过限制。</td>\n    </tr>\n    <tr>\n      <td>50012</td>\n      <td>消息长度超过限制。</td>\n      <td>请检查参数长度是否超过限制。</td>\n    </tr>\n    <tr>\n      <td>50013</td>\n      <td>发送自定义消息失败。</td>\n      <td>请重试，或联系 ZEGO 技术支持处理。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":3005402395393320000,"description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>FailUsers</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>处理失败的目标用户 ID 列表。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"Uid"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"1111","description":"用户 ID。"}}></SchemaItem><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":50003,"description":"失败的错误码（不在线：50003）。"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": 3005402395393320000,\n  \"Data\": {\n    \"FailUsers\": [\n      {\n        \"Uid\": \"1111\",\n        \"Code\": 50003\n      }\n    ]\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      