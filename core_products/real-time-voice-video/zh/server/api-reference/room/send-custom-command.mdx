---
id: send-custom-command
title: "SendCustomCommand"
description: "调用本接口在房间内推送自定义消息，即向同一房间内指定的单个或多个用户发送信令消息。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/open-api-desc
---

<h1 className={"openapi__heading"}>SendCustomCommand</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


调用本接口在房间内推送自定义消息，即向同一房间内指定的单个或多个用户发送信令消息。

客户端接收消息使用 ZEGO Express SDK 回调接口：

| 平台 |ZegoExpress SDK|LiveRoom SDK|
|-|-|-|
|iOS/macOS| onIMRecvCustomCommand | onReceiveCustomCommand |
|Android| onIMRecvCustomCommand | onRecvCustomCommand |
|Windows| onIMRecvCustomCommand |   OnRecvCustomCommand |
|Web| IMRecvCustomCommand | onRecvCustomCommand |

<Note title="调用频率限制">同一个 AppID 下所有房间：100 次/秒（测试环境：10 次/秒）</Note>
<Warning title="注意">
- 在服务端通过某个 FromUserId 发送消息时，使用相同 FromUserId 的客户端不会收到该条消息，即发送方不能接收到自己发送的消息。
- 如果开发者需要让房间内的所有用户都收到消息，调用本接口时，应传入该房间用户之外的 FromUserId。
- 使用的 FromUserId 无需登录该房间，即可直接发送消息。
</Warning>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SendCustomCommand\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SendCustomCommand"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IsTest","in":"query","description":"💡公共参数。是否为测试环境。设为 true 表示使用测试环境。2021-11-16 及之前在 ZEGO 控制台创建的项目默认是测试环境，可根据业务需求设置此参数；而之后创建的项目默认是正式环境。\n","required":false,"schema":{"type":"string","enum":["true","false"],"default":"false"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"FromUserId","in":"query","description":"发送方用户 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"ToUserId","in":"query","description":"自定义消息目的用户 ID，最大支持 10 个目的用户 ID。\n如果不填写该参数，自定义消息广播给房间内所有用户；如果填写了该参数，自定义消息只推送到目的用户。\n示例：ToUserId[]=user1&ToUserId[]=user2\n","required":false,"schema":{"type":"array","items":{"type":"string"},"minItems":1,"maxItems":10},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"MessageContent","in":"query","description":"自定义消息内容，长度不能超过 1024 个字节。使用时，需对其内容执行 URL 编码（UrlEncode）处理。","required":true,"schema":{"type":"string","maxLength":1024}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>50003</td>\n      <td>查找用户在线信息失败。</td>\n      <td>请确认请求用户 UserId 是否在线。</td>\n    </tr>\n    <tr>\n      <td>50011</td>\n      <td>用户列表长度过长。</td>\n      <td>请检查请求包中的用户个数是否超过限制。</td>\n    </tr>\n    <tr>\n      <td>50012</td>\n      <td>消息长度超过限制。</td>\n      <td>请检查参数长度是否超过限制。</td>\n    </tr>\n    <tr>\n      <td>50013</td>\n      <td>发送自定义消息失败。</td>\n      <td>请重试，或联系 ZEGO 技术支持处理。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":3005402395393320000,"description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>FailUsers</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>处理失败的目标用户 ID 列表。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"Uid"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"1111","description":"用户 ID。"}}></SchemaItem><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":50003,"description":"失败的错误码（不在线：50003）。"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": 3005402395393320000,\n  \"Data\": {\n    \"FailUsers\": [\n      {\n        \"Uid\": \"1111\",\n        \"Code\": 50003\n      }\n    ]\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      