---
id: set-forbid-user-rule
title: "SetForbidUserRule"
description: "设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/forbid-user-rule/open-api-desc
---

<h1 className={"openapi__heading"}>SetForbidUserRule</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。

设置用户封禁规则不会中断用户当前正在进行的推流，仅会对用户的下一次推流请求生效。若需立即封禁用户当前正在进行的推流，需单独使用[设置音视频流封禁规则](/real-time-video-server/api-reference/room/forbid-stream-rule/set-forbid-stream-rule)，而非用户封禁规则。

<Note title="调用频率限制">同一个 AppID 下所有房间：10 次/秒。</Note>
<Accordion title="参数配置举例" defaultOpen="true">

- 假设需要封禁的用户是 user1，未登录房间 room1：

    - RuleType 取值为 1、DisabledPrivilege[] 取值为 1 时，表示该 IP 地址对应的用户无法登录任何房间。
    - RuleType 取值为 2、DisabledPrivilege[] 取值为 1 时，表示任何用户都无法登录 room1。
    - RuleType 取值为 3、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到任何房间，但无法在任何房间内推流。
    - RuleType 取值为 4、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到 room1，但无法在 room1 内推流。

- 假设需要封禁的用户是 user1，且已登录房间 room1，无论 RuleType 取值如何：

    - DisabledPrivilege[] 取值为 1 或 1&2 时，user1 仍在 room1 内、但无法正常推流，需要调用 [踢出房间用户](./../kick-out-user.mdx) 接口踢出用户。
    - DisabledPrivilege[] 取值为 2 时，user1 无法在 room1 内推流。
</Accordion>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SetForbidUserRule\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SetForbidUserRule"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IsTest","in":"query","description":"💡公共参数。是否为测试环境。设为 true 表示使用测试环境。2021-11-16 及之前在 ZEGO 控制台创建的项目默认是测试环境，可根据业务需求设置此参数；而之后创建的项目默认是正式环境。\n","required":false,"schema":{"type":"string","enum":["true","false"],"default":"false"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RuleType","in":"query","description":"封禁规则类型：\n- 1：通过 IP 地址封禁用户，最多可设置 100 条；\n- 2：通过 RoomId 封禁用户，最多可设置 200 条；\n- 3：通过 UserId 封禁用户，最多可设置 200 条；\n- 4：通过 RoomId 和 UserId 封禁用户，最多可设置 200 条。\n\n其中，最多可设置的规则条数，指同时在有效期内的规则条数，不包含已失效的规则。\n\n如果您不需要某些规则，请及时调用 [删除用户封禁规则](./del-forbid-user-rule.mdx) 接口进行清理。\n","required":true,"schema":{"type":"integer","format":"int32","enum":[1,2,3,4]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IP","in":"query","description":"IP 地址。RuleType 为 1 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。RuleType 为 2、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"UserId","in":"query","description":"用户 ID。RuleType 为 3、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisabledPrivilege","in":"query","description":"封禁用户所能使用的功能。1：登录。2：推流。","required":true,"schema":{"type":"array","items":{"type":"integer","format":"int32","enum":[1,2]},"minItems":1},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"EffectiveTime","in":"query","description":"封禁规则有效时长，单位：秒，取值范围 1 ～ 86400（1 天）。","required":true,"schema":{"type":"integer","format":"int64","minimum":1,"maximum":86400}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>请求成功。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>请求失败。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td>输入参数错误。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td>未开通当前接口的使用权限。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>206</td>\n      <td>App 请求 QPS 过高被限制。</td>\n      <td>降低请求频率，或联系 ZEGO 技术支持提高 QPS 限制阈值。</td>\n    </tr>\n    <tr>\n      <td>50123</td>\n      <td>当前处于有效期内的封禁规则条数超过限制。</td>\n      <td>请减少规则条数。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"TestRequestId1675674022729915000","description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={false} name={"ExpireTime"} required={false} schemaName={"int64"} qualifierMessage={undefined} schema={{"type":"integer","format":"int64","example":1704282648,"description":"封禁规则的过期时间，Unix 时间戳，单位：秒。"}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"TestRequestId1675674022729915000\",\n  \"Data\": {\n    \"ExpireTime\": 1704282648\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      