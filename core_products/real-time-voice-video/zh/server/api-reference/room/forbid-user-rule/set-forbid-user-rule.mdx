---
id: set-forbid-user-rule
title: "SetForbidUserRule"
description: "设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。"
api: eJztWVtTG8kV/itT/ZDarZLQBRZ7KZbEFTtbPGTXsb1+CPAwSA3MWtLMzowcCEXVcBEI0M02GBAyMl5usQGBsUHWBX4M0z2jJ+UnJD0tCYGQLGGcl/Bio57uc75z+vTpr88ZBjLbL4G2LiDyvBv0mIATSg6RE2SO94A2oO8ea9ldbW4L+4/Q3qi2MapvTiD/kppepz9xPKKmlumEU2WMzsf+CJqJo0gonwngsS0UTqjpdaYLx9f1xJtKYT3fNFmo2l5o7uPFXs5p9kpQNIteF5Sa3M7Bbxnsf8l0If/r3NJaNQGuirXG0lNlrNvT7alqSTKoZqJqcge/3Cl8zb5A00G88zuKbekny/pqQItO4NAW/jiazwTUtE/NRFHiE52sRSfU5KyaVPD2Kp2jJ47w/pg2F8fzfuKR2fVcTNHezaLgAdVbj5ZcTEHBeW12W82eaHNbXRR9Ln6gb07m3jzDH0cv2N9kKRgvySJk3Yb5FgnK5sphwyv5TEBXArlXK5UeKTis/SdehozMyS74QzfQ98a1ua3cm2daaCq3FEH+w27QgSIBNamoybfMHUHovMuoyVk8reDYNPaf5BY+5DNRm5XB26sWbfP5qTLWbiEiO7o97XccDl50crynJB+Fx/D8Xs4X1LK7avJYPZ7tBowT9rFel/yzAD0/dANZ9MJu0EGwmRk0OqXvHudiir5RcIUWnaC24MUEQ0LARqIv9lZbSqPsPEXEkCi35TNRIoRhGMbMPPC64KMhATIo/BIpGTWZYmynyuhdTmJ7XdB5X+Seci7YD7t6ymcweOGQuHB1S1tL6Yl1pvM+g2J76JWCEp9Qau4MzMJrfDBPMajptFpEYji5KgJ7gwioZKoxN54tV0pNrq2u+bPq7OfUUfcy9FyTEE4mqTLk3ys3khyX7CRFg2Jb5Z/QpI8Ge21kLdeIrLj55zDRQeY8nAYCTE3OoaP3l8VYAC+81ndTF61CG2Nqdv5cCH52p/0vGdsfioZSC9V08Bz6U2W0ZBa1uzyX6Buj9AAzXXryDZpKUajUHJI9m5osTzjHEzPvlY30WUi6oXUU/p2uKKX4+lCfR1vb3e2WUj7o6PYAE+AFKLLkBup0gjZQlsVKmR2YgMCKrBvKUCTX1zDwsG4I2sAdh3FzmQBHrq/fvFAcAhcvtY6CYSgURyuzNPN0E9UdzIAsC1KbxSLKDjMrcE3/hP18E+f+IxX7w0Mo/8VA8osERbKxBlwR/ublROgEbSRFmQDrcvH/uOcW5KHHrMsLQVsf65KgCUiOAehmQdswkIcEAlaSRc7TD0wAerxucglXyAc9IyYgyUMuMr2PF91k8qDg4p2QahsxnZkuCJ3O2pb/O/58Ffm2kW+fWn2qjBmr8pnA3+/9+DOD/JMkBRcDHc0l1KSCpnb0BNmpS0ytMInzyLAfisBkoGVl0Aa8nEdutoORMqgPuX4PK3tF+BPvccCGMeeiYRxLoZ0FbXtDTb6vE1rB2+U4HnFuKMmsW2gYwi8ebpCEeG7hA/Yf5DMBFJxXs0E1maJ3HY4paC2KfKP6bpKxWQ3PPo9r0Qk9kUBHu1f3JueRW1sud2bDRmg7xygSzGcC2tyWmgrl3gb0RJG/RCdQxE+SibJ5df+WoD2GovTZc1kVoTbtx7FtFD5qDAmRbxAI0AbsTdayc0Z+9ZQD7ZQeQUluGB5eTKDIhppM4Y+zemJeCyXQm3FKg0kSJPCYwg1t8LgL0+xWu81ss5ltrQwKz6ifZtG0kdWNs4hDm8h/iMJ7yL+M0iktOpFb/aQt7+bSi/ruGl5MlAsjARhO4NefcHBXTUbRzGoupuD9Ih/fWaOQ85llXQkQRZFQVbE7v6NMuITxQoarO5UR20nckvn0XVHcCjpU7v3iFVnb/+UcVdtPo5VZ4xY1M4TQ5ZSofjJVRsPKqLbBA43jGE5QhzA2q5XBr1bzmWUiwH4m4AHPuzudzGeW288tbz5bTvJ2o8tbKrU/DzQmqcBakO9QTe5UTiNpx3AbfrVqREEAB6ZQJIAXDlFsi/D1eT+OxdGkr3KmmgyigA9F3qGj92htH8/7S3OKWjfG8EoMj22pySDlGvRRSCcRapY4QuEZvHBY5CBXescV2YjxVsJJnxaZrAzPhvJos/0sXm0mu6nZ1HI+KdyvHZClYDtVxkosr0TO0YkPrb67mLE+c37OnQojGGpDKFDOzrsXIZAXRMu1wKCBWBsG3cpLYDRfG4wKullPsijw9WlFH8/SDEzutZm4Pp49VcZI3qDMneTifCZa4qT1xBQriizRy8nQLTUaa4TWuTlPJ11rq5/k3evrgw6ZewoJdak/XxbO+MJhbv6kRFaI+ZvPjauD0HY9MI6WPzA2Jp9dYW63tlit+YzfxqC1f+Uz019KWAxzOTex32YCbnaQ/m2oGRnpIaIlgfdI0HCl3Wol/12I9RdBNRujtSVgAg7eI0OPTOaxguDiHMaLwfKrRCYPV0Lje3+FDnLFCyJ5X8gcVfVnw8t17d4g6xbIHlkrqmQnc2h5RXtNQkdNr5OCUNqH/AtoKqWmJmneKtzKSlo/fqYtJ5HvgFy941vIP1laTrZiN4DnP5RGjNQ5pivjTBfybaF9pfSl5xuLCFmXWebc0PyUc0LeLEHxKRQtrMCZRdgHRehxQIsIZa/oMTt4J5SKtbB2mRylDvKSa5cHIOvsoI+6dlks/GV86Cgpa7fIA+e/JD7gxVDFMFqb0CKTKJ3Sd3fLPrZbCoLJWFFdu9zLO4cu1ezssLZbZOe5EUpL6e4btaQL381lIyV9lYJtVQSjtX39w/plgvXEkT46px2kC7RsRsGxBJ5L4MAoNff8ohq67ZWyj18g33qh9jW3pCcSX2Da9xULcewtyig5JVooNhqBSCqWlIy+Gs8tRb6yydbWCul3BIGhTmf+dv8ho59M5d4t6m/e0bLiZXhyS0E1G6JraAmSUBj/y2ogcTiSe7doSKdCc4t+pGTqRv2d1WZvrkBBnYjWJtRU6AJnOpdqDeakH/qIYVVNIgd7Koz2npUvqgKw3VI8Ku2W4skFIybwVyhJbD+8lIUXcxWQvA4HlKRK5mBkUy39gnC3cFg/IdqJ1AfwNy+UZFJ6qSWXvJdKU22tt75rvdVitdtv2b//3vad1WqtUFjYcoMjED13WbmO9HxvUOBEetnVdcuUANpuWVvst+2tLbdrviOiE/rJFI7F6VM+nwlUedjTu9KAPjIyYgJG3Zq8cC9WbB4U7jFjHrnloTzAkzJWPzSsY+UB0AYswARouqbVK6/o+q+LqlSfKulWOk46DqF1kjwMBprP+A2inkL+SfJvPJ7PTAPCGy6VbJYG2KrS1eQOWs6itc3c0qQhdwZ/PKotbuBJf1VxOJnAxwcovJfP+HMbSziZqC2rT6wODW9v4g/v8xlSmEC+PeSb1TbCtcW52MHqfjwO6esn+YwfzbxGRyu1BfXy7uouS0XR2lsiaCeuftr7jO/7hRq+j6HggpqKEhtf7hFc5J04DQhF4jx9vHEKCrHHC9BjSCQygAk8LRRZ2oCtyWrUOwhHYh0GRyo+KoqcgXnMcw5oeUyYA3Pnfifz0CsIvEhiFLpZzmWkDmPkTwSsw8V7nU0O3k1IORB4SXaznjK5lZXLC6YNnxG2m67iTVfxpqt401W86SredBX/h13FAnmU4aBsEVwsZ3Bo44oeLtCyLkAq1QO8JJO/h4d7WQn+IrpGRsgwLbIQsuYsYCzVr6pedN88KBRMvmWuu+l4qTVP4FB5D/QpbT8Cg4xcCfUXNwxrwSz0K78KyktbhDXAVHQkvwqqa+ka1rCivJ/5VQxoqGNYj7u/LtALjcN6AJ11Kq+I6/+4TVjDv6UG65fv9k0f8KYPeHkfsEb8lbWYrxiB9Xf7ah2D+1cH0Fivr5Yvio3FKwJprNtXA0iptXhdSeEL+n01YF7WerzeNHZN7bkaNlzsG57h7yE/RI4YANq6SGOStGigaFDdIqF0QKE8eVc03IiUUqXzx3uPwMjIfwBv0apL
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/forbid-user-rule/open-api-desc
---

<h1 className={"openapi__heading"}>SetForbidUserRule</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。

设置用户封禁规则不会中断用户当前正在进行的推流，仅会对用户的下一次推流请求生效。若需立即封禁用户当前正在进行的推流，需单独使用[设置音视频流封禁规则](../forbid-stream-rule/set-forbid-stream-rule.mdx)，而非用户封禁规则。

<Note title="调用频率限制">同一个 AppID 下所有房间：10 次/秒。</Note>
<Accordion title="参数配置举例" defaultOpen="true">

- 假设需要封禁的用户是 user1，未登录房间 room1：

    - RuleType 取值为 1、DisabledPrivilege[] 取值为 1 时，表示该 IP 地址对应的用户无法登录任何房间。
    - RuleType 取值为 2、DisabledPrivilege[] 取值为 1 时，表示任何用户都无法登录 room1。
    - RuleType 取值为 3、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到任何房间，但无法在任何房间内推流。
    - RuleType 取值为 4、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到 room1，但无法在 room1 内推流。

- 假设需要封禁的用户是 user1，且已登录房间 room1，无论 RuleType 取值如何：

    - DisabledPrivilege[] 取值为 1 或 1&2 时，user1 仍在 room1 内、但无法正常推流，需要调用 [踢出房间用户](./../kick-out-user.mdx) 接口踢出用户。
    - DisabledPrivilege[] 取值为 2 时，user1 无法在 room1 内推流。
</Accordion>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SetForbidUserRule\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SetForbidUserRule"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IsTest","in":"query","description":"💡公共参数。是否为测试环境。设为 true 表示使用测试环境。2021-11-16 及之前在 ZEGO 控制台创建的项目默认是测试环境，可根据业务需求设置此参数；而之后创建的项目默认是正式环境。\n","required":false,"schema":{"type":"string","enum":["true","false"],"default":"false"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RuleType","in":"query","description":"封禁规则类型：\n- 1：通过 IP 地址封禁用户，最多可设置 100 条；\n- 2：通过 RoomId 封禁用户，最多可设置 200 条；\n- 3：通过 UserId 封禁用户，最多可设置 200 条；\n- 4：通过 RoomId 和 UserId 封禁用户，最多可设置 200 条。\n\n其中，最多可设置的规则条数，指同时在有效期内的规则条数，不包含已失效的规则。\n\n如果您不需要某些规则，请及时调用 [删除用户封禁规则](./del-forbid-user-rule.mdx) 接口进行清理。\n","required":true,"schema":{"type":"integer","format":"int32","enum":[1,2,3,4]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IP","in":"query","description":"IP 地址。RuleType 为 1 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。RuleType 为 2、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"UserId","in":"query","description":"用户 ID。RuleType 为 3、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisabledPrivilege","in":"query","description":"封禁用户所能使用的功能。1：登录。2：推流。","required":true,"schema":{"type":"array","items":{"type":"integer","format":"int32","enum":[1,2]},"minItems":1},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"EffectiveTime","in":"query","description":"封禁规则有效时长，单位：秒，取值范围 1 ～ 86400（1 天）。","required":true,"schema":{"type":"integer","format":"int64","minimum":1,"maximum":86400}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>请求成功。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>请求失败。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td>输入参数错误。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td>未开通当前接口的使用权限。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>206</td>\n      <td>App 请求 QPS 过高被限制。</td>\n      <td>降低请求频率，或联系 ZEGO 技术支持提高 QPS 限制阈值。</td>\n    </tr>\n    <tr>\n      <td>50123</td>\n      <td>当前处于有效期内的封禁规则条数超过限制。</td>\n      <td>请减少规则条数。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"TestRequestId1675674022729915000","description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={false} name={"ExpireTime"} required={false} schemaName={"int64"} qualifierMessage={undefined} schema={{"type":"integer","format":"int64","example":1704282648,"description":"封禁规则的过期时间，Unix 时间戳，单位：秒。"}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"TestRequestId1675674022729915000\",\n  \"Data\": {\n    \"ExpireTime\": 1704282648\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      