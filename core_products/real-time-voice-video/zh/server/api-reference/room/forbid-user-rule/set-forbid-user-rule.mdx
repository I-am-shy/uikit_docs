---
id: set-forbid-user-rule
title: "SetForbidUserRule"
description: "设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/forbid-user-rule/open-api-desc
---

<h1 className={"openapi__heading"}>SetForbidUserRule</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。

<Note title="调用频率限制">同一个 AppID 下所有房间：10 次/秒。</Note>
<Accordion title="参数配置举例" defaultOpen="true">

- 假设需要封禁的用户是 user1，未登录房间 room1：

    - RuleType 取值为 1、DisabledPrivilege[] 取值为 1 时，表示该 IP 地址对应的用户无法登录任何房间。
    - RuleType 取值为 2、DisabledPrivilege[] 取值为 1 时，表示任何用户都无法登录 room1。
    - RuleType 取值为 3、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到任何房间，但无法在任何房间内推流。
    - RuleType 取值为 4、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到 room1，但无法在 room1 内推流。

- 假设需要封禁的用户是 user1，且已登录房间 room1，无论 RuleType 取值如何：

    - DisabledPrivilege[] 取值为 1 或 1&2 时，user1 仍在 room1 内、但无法正常推流，需要调用 [踢出房间用户](./../kick-out-user.mdx) 接口踢出用户。
    - DisabledPrivilege[] 取值为 2 时，user1 无法在 room1 内推流。
</Accordion>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SetForbidUserRule\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SetForbidUserRule"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IsTest","in":"query","description":"💡公共参数。是否为测试环境。设为 true 表示使用测试环境。2021-11-16 及之前在 ZEGO 控制台创建的项目默认是测试环境，可根据业务需求设置此参数；而之后创建的项目默认是正式环境。\n","required":false,"schema":{"type":"string","enum":["true","false"],"default":"false"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RuleType","in":"query","description":"封禁规则类型：\n- 1：通过 IP 地址封禁用户，最多可设置 100 条；\n- 2：通过 RoomId 封禁用户，最多可设置 200 条；\n- 3：通过 UserId 封禁用户，最多可设置 200 条；\n- 4：通过 RoomId 和 UserId 封禁用户，最多可设置 200 条。\n\n其中，最多可设置的规则条数，指同时在有效期内的规则条数，不包含已失效的规则。\n\n如果您不需要某些规则，请及时调用 [删除用户封禁规则](./del-forbid-user-rule.mdx) 接口进行清理。\n","required":true,"schema":{"type":"integer","format":"int32","enum":[1,2,3,4]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IP","in":"query","description":"IP 地址。RuleType 为 1 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。RuleType 为 2、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"UserId","in":"query","description":"用户 ID。RuleType 为 3、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisabledPrivilege","in":"query","description":"封禁用户所能使用的功能。1：登录。2：推流。","required":true,"schema":{"type":"array","items":{"type":"integer","format":"int32","enum":[1,2]},"minItems":1},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"EffectiveTime","in":"query","description":"封禁规则有效时长，单位：秒，取值范围 1 ～ 86400（1 天）。","required":true,"schema":{"type":"integer","format":"int64","minimum":1,"maximum":86400}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>请求成功。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>请求失败。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td>输入参数错误。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td>未开通当前接口的使用权限。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>206</td>\n      <td>App 请求 QPS 过高被限制。</td>\n      <td>降低请求频率，或联系 ZEGO 技术支持提高 QPS 限制阈值。</td>\n    </tr>\n    <tr>\n      <td>50123</td>\n      <td>当前处于有效期内的封禁规则条数超过限制。</td>\n      <td>请减少规则条数。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"TestRequestId1675674022729915000","description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={false} name={"ExpireTime"} required={false} schemaName={"int64"} qualifierMessage={undefined} schema={{"type":"integer","format":"int64","example":1704282648,"description":"封禁规则的过期时间，Unix 时间戳，单位：秒。"}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"TestRequestId1675674022729915000\",\n  \"Data\": {\n    \"ExpireTime\": 1704282648\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      