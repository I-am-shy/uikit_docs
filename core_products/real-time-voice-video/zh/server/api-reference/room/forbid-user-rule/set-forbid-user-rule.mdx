---
id: set-forbid-user-rule
title: "SetForbidUserRule"
description: "设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/forbid-user-rule/open-api-desc
---

<h1 className={"openapi__heading"}>SetForbidUserRule</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。

设置用户封禁规则不会中断用户当前正在进行的推流，仅会对用户的下一次推流请求生效。若需立即封禁用户当前正在进行的推流，需单独使用[设置音视频流封禁规则](../forbid-stream-rule/set-forbid-stream-rule.mdx)，而非用户封禁规则。

<Note title="调用频率限制">同一个 AppID 下所有房间：10 次/秒。</Note>
<Accordion title="参数配置举例" defaultOpen="true">

- 假设需要封禁的用户是 user1，未登录房间 room1：

    - RuleType 取值为 1、DisabledPrivilege[] 取值为 1 时，表示该 IP 地址对应的用户无法登录任何房间。
    - RuleType 取值为 2、DisabledPrivilege[] 取值为 1 时，表示任何用户都无法登录 room1。
    - RuleType 取值为 3、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到任何房间，但无法在任何房间内推流。
    - RuleType 取值为 4、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到 room1，但无法在 room1 内推流。

- 假设需要封禁的用户是 user1，且已登录房间 room1，无论 RuleType 取值如何：

    - DisabledPrivilege[] 取值为 1 或 1&2 时，user1 仍在 room1 内、但无法正常推流，需要调用 [踢出房间用户](./../kick-out-user.mdx) 接口踢出用户。
    - DisabledPrivilege[] 取值为 2 时，user1 无法在 room1 内推流。
</Accordion>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SetForbidUserRule\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SetForbidUserRule"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RuleType","in":"query","description":"封禁规则类型：\n- 1：通过 IP 地址封禁用户，最多可设置 100 条；\n- 2：通过 RoomId 封禁用户，最多可设置 200 条；\n- 3：通过 UserId 封禁用户，最多可设置 200 条；\n- 4：通过 RoomId 和 UserId 封禁用户，最多可设置 200 条。\n\n其中，最多可设置的规则条数，指同时在有效期内的规则条数，不包含已失效的规则。\n\n如果您不需要某些规则，请及时调用 [删除用户封禁规则](./del-forbid-user-rule.mdx) 接口进行清理。\n","required":true,"schema":{"type":"integer","format":"int32","enum":[1,2,3,4]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IP","in":"query","description":"IP 地址。RuleType 为 1 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。RuleType 为 2、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"UserId","in":"query","description":"用户 ID。RuleType 为 3、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisabledPrivilege","in":"query","description":"封禁用户所能使用的功能。1：登录。2：推流。","required":true,"schema":{"type":"array","items":{"type":"integer","format":"int32","enum":[1,2]},"minItems":1},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"EffectiveTime","in":"query","description":"封禁规则有效时长，单位：秒，取值范围 1 ～ 86400（1 天）。","required":true,"schema":{"type":"integer","format":"int64","minimum":1,"maximum":86400}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>请求成功。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>请求失败。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td>输入参数错误。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td>未开通当前接口的使用权限。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>206</td>\n      <td>App 请求 QPS 过高被限制。</td>\n      <td>降低请求频率，或联系 ZEGO 技术支持提高 QPS 限制阈值。</td>\n    </tr>\n    <tr>\n      <td>50123</td>\n      <td>当前处于有效期内的封禁规则条数超过限制。</td>\n      <td>请减少规则条数。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"TestRequestId1675674022729915000","description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={false} name={"ExpireTime"} required={false} schemaName={"int64"} qualifierMessage={undefined} schema={{"type":"integer","format":"int64","example":1704282648,"description":"封禁规则的过期时间，Unix 时间戳，单位：秒。"}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"TestRequestId1675674022729915000\",\n  \"Data\": {\n    \"ExpireTime\": 1704282648\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      