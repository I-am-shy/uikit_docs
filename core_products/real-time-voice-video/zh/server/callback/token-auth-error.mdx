# Token 鉴权失败回调（不公开）

- - -

## 1 描述

用户使用 Token 登录房间鉴权失败时，关于鉴权失败的相关信息回调。

## 2 回调说明

- 请求方法：POST。

@@@Server_API2_callback_intro_1@@@

- 请求地址：请联系 ZEGO 技术支持配置回调地址。
- 传输协议：HTTPS/HTTP，建议使用 HTTPS。

## 3 回调参数

<table>
  <colgroup>
    <col width="25%">
    <col width="20%">
    <col width="55%">
  </colgroup>
<tbody><tr data-row-level="1">
<th>公共参数</th>
<th>类型</th>
<th>描述</th>
</tr>
<tr data-row-level="2">
<td>Event</td>
<td>String</td>
<td>回调事件，此回调返回值为 <code>token_auth_error</code>。</td>
</tr>
<tr data-row-level="3">
<td>AppId</td>
<td>UInt32</td>
<td>App 的唯一标识。</td>
</tr>
<tr data-row-level="4">
<td>Timestamp</td>
<td>Int64</td>
<td>服务器当前时间，Unix 时间戳。</td>
</tr>
<tr data-row-level="5">
<td>Nonce</td>
<td>String</td>
<td>随机数。</td>
</tr>
<tr data-row-level="6">
<td>Signature</td>
<td>String</td>
<td>检验串，详情见 <a href="https://doc-zh.zego.im/article/19700">检验说明</a>。</td>
</tr>
<tr data-row-level="7">
<th>业务参数</th>
<th>类型</th>
<th>描述</th>
</tr>
<tr data-row-level="8">
<td>RoomId</td>
<td>String</td>
<td>Token 鉴权失败的房间 ID。</td>
</tr>
<tr data-row-level="9">
<td>UserId</td>
<td>String</td>
<td>发起 Token 鉴权的用户 ID。</td>
</tr>
<tr data-row-level="10">
<td>ErrorType</td>
<td>Int32</td>
<td>错误类型。
<ul><li>0：默认值，未分类的错误。</li>
<li>1：无 Token。</li>
<li>2：格式错误。</li>
<li>3：Token 超时。</li></ul>
</tr>
<tr data-row-level="11">
<td>ErrorInfo</td>
<td>String</td>
<td>错误信息，作为描述，仅用于参考，不要作为代码逻辑依赖使用。</td>
</tr>
<tr data-row-level="12">
<td>Token</td>
<td>String</td>
<td>登录时用于鉴权的 Token。</td>
</tr>
<tr data-row-level="13">
<td>ClientIp</td>
<td>String</td>
<td>请求来源 IP 地址。</td>
</tr>
</tbody></table>


## 4 数据示例

```json
{
    "Event": "token_auth_error",
    "AppId": 4155768915,
    "Timestamp": 1720003243,
    "Nonce": "7387357679901855915",
    "Signature": "6af288350d9a5454bb680f6693beeb7d1e392322",
    "RoomId": "unit_test_1720003226_3",
    "UserId": "unit_test_1720003226_3",
    "ErrorType": 3,
    "ErrorInfo": "CheckToken01 timeout error; curTimeSec:1720003243 tokenData.Expire:1720003241",
    "Token": "01NzVuMXg1bzF2ZTlxMGJ5dP5gIsFjfFR8VM4D3Tx7UzqoDihFhz+sRnzeS5EQbN59jYVd3k53j1mq7qFNJPI/IFTs9b7oRf9GcYtpmNwaDKV+xxxxxxxxSnC9hRpobfTTwlX26BGsYcRas6wQ9lZuCv4F7qDO7hbraUZTz0CPyhxfQVR46Mit55HZYez5dDJ4EU4JjeAW5KWVVT6qGZH8JFc0rXAaPZzoFQ8SUtnqaQ2TAMluPHm7zf1",
    "ClientIp": "14.155.212.113"
}
```

## 5 返回响应

返回 HTTP status code 为 2XX （例如 200）表示成功，其他响应都表示失败。


## 6 回调重试策略

@@@Server_API2_callback@@@
