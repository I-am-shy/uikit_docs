# Token 鉴权失败回调（不公开）

- - -

## 描述

用户使用 Token 登录房间鉴权失败时，关于鉴权失败的相关信息回调。

## 回调说明

- 请求方法：POST。

<Note title="说明">

 
  回调数据格式为 JSON，您需要对其进行 UrlDecode 解码。
   
</Note>



- 请求地址：请联系 ZEGO 技术支持配置回调地址。
- 传输协议：HTTPS/HTTP，建议使用 HTTPS。

## 回调参数

| 公共参数 | 类型 | 描述 |
|---|---|---|
| Event | String | 回调事件，此回调返回值为 <code>token_auth_error</code>。 |
| AppId | UInt32 | App 的唯一标识。 |
| Timestamp | Int64 | 服务器当前时间，Unix 时间戳。 |
| Nonce | String | 随机数。 |
| Signature | String | 检验串，详情见 <a href="https://doc-zh.zego.im/article/19700">检验说明</a>。 |
| 业务参数 | 类型 | 描述 |
| RoomId | String | Token 鉴权失败的房间 ID。 |
| UserId | String | 发起 Token 鉴权的用户 ID。 |
| ErrorType | Int32 | 错误类型。
<ul><li>0：默认值，未分类的错误。</li>
<li>1：无 Token。</li>
<li>2：格式错误。</li>
<li>3：Token 超时。</li></ul> |
| ErrorInfo | String | 错误信息，作为描述，仅用于参考，不要作为代码逻辑依赖使用。 |
| Token | String | 登录时用于鉴权的 Token。 |
| ClientIp | String | 请求来源 IP 地址。 |



## 数据示例

```json
{
    "Event": "token_auth_error",
    "AppId": 4155768915,
    "Timestamp": 1720003243,
    "Nonce": "7387357679901855915",
    "Signature": "6af288350d9a5454bb680f6693beeb7d1e392322",
    "RoomId": "unit_test_1720003226_3",
    "UserId": "unit_test_1720003226_3",
    "ErrorType": 3,
    "ErrorInfo": "CheckToken01 timeout error; curTimeSec:1720003243 tokenData.Expire:1720003241",
    "Token": "01NzVuMXg1bzF2ZTlxMGJ5dP5gIsFjfFR8VM4D3Tx7UzqoDihFhz+sRnzeS5EQbN59jYVd3k53j1mq7qFNJPI/IFTs9b7oRf9GcYtpmNwaDKV+xxxxxxxxSnC9hRpobfTTwlX26BGsYcRas6wQ9lZuCv4F7qDO7hbraUZTz0CPyhxfQVR46Mit55HZYez5dDJ4EU4JjeAW5KWVVT6qGZH8JFc0rXAaPZzoFQ8SUtnqaQ2TAMluPHm7zf1",
    "ClientIp": "14.155.212.113"
}
```

## 返回响应

返回 HTTP status code 为 2XX （例如 200）表示成功，其他响应都表示失败。


## 回调重试策略

如果 ZEGO 服务器没有收到响应，或收到的 HTTP status code 不为 2XX（例如 200），都会尝试重试，**最多进行 5 次重试**。每次重试请求与**上一次请求**的间隔时间分别为 2s、4s、8s、16s、32s。若第 5 次重试后仍然失败，将不再重试，该回调丢失。
