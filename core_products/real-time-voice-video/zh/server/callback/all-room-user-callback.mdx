# 房间用户数回调

# 不可发布！！！！后台未部署！！！！

- - -

## 描述

开发者需要**定时获取**每一个房间的用户数量，可以通过本回调获取。当每一个房间创建后，会从创建开始，按照一定时间间隔定时返回房间 ID 及人数。

<Warning title="注意">


本接口定时回调的默认间隔时长为 100s。如需修改间隔时长，请联系 ZEGO 技术支持处理。

</Warning>




## 回调说明

- 请求方法：POST。

<Note title="说明">

 
  回调数据格式为 JSON，您需要对其进行 UrlDecode 解码。
   
</Note>



- 请求地址：请联系 ZEGO 技术支持配置回调地址。
- 传输协议：HTTPS/HTTP，建议使用 HTTPS。


## 回调参数

<table>
  
<tbody><tr>
<th>公共参数</th>
<th>类型</th>
<th>描述</th>
</tr>
<tr>
<td>event</td>
<td>String</td>
<td>回调事件，此回调返回值为 <code>room_user_count</code>。</td>
</tr>
<tr>
<td>appid</td>
<td>String</td>
<td>APP 的唯一标识。</td>
</tr>
<tr>
<td>timestamp</td>
<td>Int64</td>
<td>服务器当前时间，Unix 时间戳，单位：秒。</td>
</tr>
<tr>
<td>nonce</td>
<td>String</td>
<td>随机数。</td>
</tr>
<tr>
<td>signature</td>
<td>String</td>
<td>检验串，详情见 [检验说明](!Callback/Overview)。</td>
</tr>
<tr>
<th>业务参数</th>
<th>类型</th>
<th>描述</th>
</tr>
<tr>
<td>room_id</td>
<td>String</td>
<td>房间 ID。</td>
</tr>
<tr>
<td>create_time</td>
<td>Int64</td>
<td>房间创建时间，单位：毫秒。</td>
</tr>
<tr>
<td>session_id</td>
<td>UInt64</td>
<td>用户会话 ID。</td>
</tr>
<tr>
<td>user_count</td>
<td>Int32</td>
<td>房间内的用户人数。</td>
</tr>
<tr>
<td>admin_user_count</td>
<td>Int32</td>
<td>房间内的管理员人数。该类型用户主要存在于云录制、音视频流审核等场景中，客户端 SDK 的用户相关接口会过滤该类型用户。</td>
</tr>
<tr>
<td>callback_time</td>
<td>Int64</td>
<td>回调房间用户数量的时间，Unix 时间戳，单位：秒。</td>
</tr>
</tbody></table>

<Note title="说明">


建议您将部分参数转换为 Int 进行逻辑处理，相关字段包括 `appid`。

</Note>




## 数据示例

```json
{
    "event": "room_user_count",
    "appid": "1",
    "timestamp": 1688976927,
    "nonce": "7254100665735432500",
    "signature": "xxx",
    "room_id": "room1",
    "create_time": 1688974597526,
    "session_id": 898301257951756300,
    "user_count": 4,
    "admin_user_count": 1,
    "callback_time": 1688976927
}
```


## 返回响应

返回 HTTP status code 为 2XX （例如 200）表示成功，其他响应都表示失败。


## 回调重试策略

如果 ZEGO 服务器没有收到响应，或收到的 HTTP status code 不为 2XX（例如 200），都会尝试重试，**最多进行 5 次重试**。每次重试请求与**上一次请求**的间隔时间分别为 2s、4s、8s、16s、32s。若第 5 次重试后仍然失败，将不再重试，该回调丢失。
