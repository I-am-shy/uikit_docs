@@@ServerAPIWarning@@@

# 点播截图回调

- - -

## 1 描述

开发者通过 [开始点播截图](!MediaThumbnails) 接口完成媒体文件转码后，可以通过该回调查询截图信息。


## 2 回调说明

- 请求方法：POST。

@@@Server_API2_callback_intro_1@@@

- 请求地址：请联系 ZEGO 技术支持配置回调地址。
- 传输协议：HTTPS/HTTP，建议使用 HTTPS。

## 3 回调参数

<table class="collapsible-table" >
  <colgroup>
    <col width="30%">
    <col width="15%">
    <col width="55%">
  </colgroup>
<tbody><tr data-row-level="1">
<th>公共参数</th>
<th>类型</th>
<th>描述</th>
</tr>
<tr data-row-level="2">
<td>event</td>
<td>String</td>
<td>回调事件。<br>此回调返回值为`snapshot` - 截图完成。</td>
</tr>
<tr data-row-level="3">
<td>appid</td>
<td>String</td>
<td>App 的唯一标识。</td>
</tr>
<tr data-row-level="4">
<td>timestamp</td>
<td>String</td>
<td>服务器当前时间，Unix 时间戳。</td>
</tr>
<tr data-row-level="5">
<td>nonce</td>
<td>String</td>
<td>随机数。</td>
</tr>
<tr data-row-level="6">
<td>signature</td>
<td>String</td>
<td>检验串，详情见 [检验说明](!Callback/Overview)。</td>
</tr>
<tr data-row-level="7">
<th>业务参数</th>
<th>类型</th>
<th>描述</th>
</tr>
<tr data-row-level="8">
<td>task_id</td>
<td>String</td>
<td>截图任务 ID，与 <a href="!MediaThumbnails" target="balnk">开始点播截图</a> 响应结果中的 task_id 保持一致。</td>
</tr>
<tr data-row-level="9">
<td>vendor</td>
<td>String</td>
<td>&nbsp;CDN 厂商：
- tencent：腾讯云。
- hw：华为云。</td>
</tr>
<tr data-row-level="10">
<td>field_id</td>
<td>String</td>
<td>源媒体文件 ID。<br>
仅当 CND 厂商为腾讯云有该字段。</td>
</tr>
<tr data-row-level="11" data-row-child="true">
<td>snapshot_pic_list</td>
<td>&nbsp;Array SnapshotPicObject</td>
<td>点播截图信息列表 JSON 数组格式字符串。</td>
</tr>
<tr data-row-level="11-1">
<td>url</td>
<td>string</td>
<td>点播截图 URL</td>
</tr>
<tr data-row-level="11-2">
<td>offset</td>
<td>float</td>
<td>该张截图对应视频文件中的时间偏移，即为第多少毫秒的截图，单位为毫秒。<br>
仅当 CND 厂商为腾讯云时，在时间点截图条件下，才有该字段。</td>
</tr>
</tbody></table>


## 4 数据示例

```json
{
        "appid": "12345",  
        "event": "snapshot",
        "timestamp": "148150008",
        "nonce": "158243",
        "signature": "signature"
        "task_id": "1253642700910365374",
        "field_id": "abcwurywbhsfwi",
        "vendor": "tencent",
        "snapshot_pic_list": "[{\"url\":\"http://abc.com/1.jpg\",\"offset\":0},{\"url\":\"http://abc.com/1.jpg\",\"offset\":0}]",
}
```


## 5 返回响应

返回 HTTP status code 为 2XX （例如 200）表示成功，其他响应都表示失败。


## 6 回调重试策略

@@@Server_API2_callback@@@
