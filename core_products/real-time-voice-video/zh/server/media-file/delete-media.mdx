@@@ServerAPIWarning@@@

# 删除媒体文件

---

## 1 描述


用户进行 CDN 录制时，会把录制好的媒体文件存放在 CDN 服务器上，用户可以调用本接口删除该文件。

<div class="mk-warning">

首次使用本接口之前，请确认是否已经开通 CDN 录制服务。若未开通，请前往 [ZEGO 控制台\](https://console.zego.im) 自助开通，详情请参考 [控制台 - 服务配置 - CDN\](#14223)，或联系 ZEGO 技术支持开通。
</div>

## 2 接口原型

- 请求方法：GET
- 请求地址：https://rtc-api.zego.im/?Action=DeleteMedia
- 传输协议：HTTPS
- 调用频率限制：20 次/秒

## 3 请求参数

@@@Request_Params_Des@@@

<table>
<colgroup>
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 15%">
<col style="width: 55%">
</colgroup>
<thead>
  <tr>
    <th>参数</th>
    <th>类型</th>
    <th>是否必选</th>
    <th>描述</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>Vendor</td>
    <td>String</td>
    <td>是</td>
    <td><p>可能的取值及对应的 CDN 厂商：</p><ul><li>Tencent：腾讯云。</li><li>Ws：网宿。</li><li>Huawei：华为云。</li></ul></td>
  </tr>
  <tr>
    <td>FileId[]</td>
    <td>Array of String</td>
    <td>是</td>
    <td><p>文件唯一标识，在 <a href="!Callback/Record_File_Create_Callback" target="blank">录制文件生成回调</a> 中返回，最大支持 100 个媒体文件 FileId。</p><p>请注意，各 CDN 厂商的录制文件唯一标识不同：</p><ul><li>腾讯云：FileID。</li><li>网宿：PersistentId。</li><li>华为云：ObsObject。</li></ul><p>您也可以通过 <a href="!Media_File/SearchMedia" target="blank">检索媒体信息</a> 接口，获取媒体文件的唯一标识，标识对应的参数名称有所差异，请注意区分使用。</p><p>示例：&FileId[]=5285890813221514958&FileId[]=5285890813221513290</p></td>
  </tr>
</tbody>
</table>


## 4 请求示例

```
https://rtc-api.zego.im/?Action=DeleteMedia
&Vendor=Tencent
&FileId[]=5285890813221514958&FileId[]=5285890813221513290
&<公共请求参数>
```

## 5 响应参数


<table class="collapsible-table">
<colgroup>
<col style="width: 25%">
<col style="width: 20%">
<col style="width: 55%">
</colgroup>
<thead>
  <tr>
    <th>参数</th>
    <th>类型</th>
    <th>描述</th>
  </tr>
</thead>
<tbody>
  <tr data-row-level="1">
    <td>Code</td>
    <td>Number</td>
    <td>返回码。</td>
  </tr>
  <tr data-row-level="2">
    <td>Message</td>
    <td>String</td>
    <td>操作结果描述。</td>
  </tr>
  <tr data-row-level="3">
    <td>RequestId</td>
    <td>String</td>
    <td>请求 ID，由 ZEGO 服务端返回。</td>
  </tr>
  <tr data-row-level="4" data-row-child="true">
    <td>Data</td>
    <td>String</td>
    <td>响应数据，由以下参数 JSON 序列化后生成。</td>
  </tr>
  <tr data-row-level="4-1">
    <td>Deleted</td>
    <td>Array of String</td>
    <td>成功删除的文件列表。</td>
  </tr>
  <tr data-row-level="4-2" data-row-child="true">
    <td>Errors</td>
    <td>Array of Object</td>
    <td>未成功删除的文件列表。</td>
  </tr>
  <tr data-row-level="4-2-1">
    <td>Code</td>
    <td>String</td>
    <td>删除文件失败的错误码。</td>
  </tr>
  <tr data-row-level="4-2-2">
    <td>Message</td>
    <td>String</td>
    <td>删除文件失败的错误消息。</td>
  </tr>
  <tr data-row-level="4-2-3">
    <td>Key</td>
    <td>String</td>
    <td>删除失败的文件的唯一标识。</td>
  </tr>
  <tr data-row-level="4-2-4">
    <td>RequestId</td>
    <td>String</td>
    <td>唯一请求 ID，由请求参数 Vendor 取值对应的 CDN 厂商返回，定位问题时需要提供该次请求的 RequestId。</td>
  </tr>
</tbody>
</table>


## 6 响应示例

```
{
    "Code": 0,
    "Message": "success",
    "Data": "{\"Deleted\":[\"3270835010809755971\",\"3270835010811335406\"],\"Errors\":[]}",
    "RequestId": "3574501647605445341"
}
```

## 7 返回码

@@@Return_Params_Des@@@

|返回码|说明|处理建议|
|-----|------|-----|
| 0 | 请求成功。 |-|
| 2 | 输入参数错误。 |-|
| 3 | 未开通相关权限。 | 请联系 ZEGO 技术支持。|
| 4 | CDN 类型不匹配。 | 请检查参数。|
| 5 | 配置错误。 | 请联系 ZEGO 技术支持。|
| 6 | 请求过于频繁。 | 请稍后重试。|
| 7 | 鉴权失败。 | 请检查鉴权参数是否正确。|
| 1000  | 请求失败。 | 请联系 ZEGO 技术支持。|
