<style>
table th:nth-of-type(1) {width: 20%;}

table {width: 100%;}
</style>

@@@ServerAPIWarning@@@

# 获取房间用户列表

---

## 1 描述

调用本接口获取房间内用户列表。


## 2 接口原型

- 请求方法：GET
- 请求地址：https://rtc-api.zego.im/?Action=DescribeUserList
- 传输协议：HTTPS
- 调用频率限制：
   - 同一个 AppID 下：200 次/秒
   - 对同一个房间：1 次/1 秒



## 3 请求参数

@@@Request_Params_Des@@@

<table>
  <colgroup>
    <col width="20%">
    <col width="20%">
    <col width="20%">
    <col width="40%">
  </colgroup>
  <tbody><tr>
    <th>参数</th>
    <th>类型</th>
    <th>是否必选</th>
    <th>描述</th>
  </tr>
  <tr>
    <td>RoomId</td>
    <td>String</td>
    <td>是</td>
    <td>房间 ID。房间不存在会返回空列表。</td>
  </tr>
  <tr>
    <td>Mode</td>
    <td>Int32</td>
    <td>否</td>
    <td>用户登录房间的时间排序，默认值为 0。<ul><li>0：按时间正序</li><li>1：按时间倒序</li></ul></td>
  </tr>
  <tr>
    <td>Limit</td>
    <td>Int32</td>
    <td>否</td>
    <td><p>单次请求返回的用户个数，取值范围 0-200，即调用本接口一次最多返回 200 个用户。<b>默认值为 200</b>，房间内人数超过 200 时，需要根据前一次调用本接口时、返回结果中的 Marker（用户起始位标识）取值，再次调用本接口查询其余用户。</p>
<p>例如，房间内有 450 个用户，调用本接口查询用户列表时：</p><ol>
<li>第一次调用本接口，入参 Marker 传空，查询第 1 ～ 200 的用户；返回结果中 Marker 值假设为&nbsp; “marker1”。</li><li>第二次调用本接口，入参 Marker 取值为 “marker1”，查询第 201 ～ 400 的用户；返回结果中 Marker 值假设为 “marker2”。</li>
<li>第三次调用本接口，入参 Marker 取值为 “marker2”，查询第 401 ～ 450 的用户；查询完毕，返回结果中 Marker 为空。</li>
</ol></td>
  </tr>
  <tr>
    <td>Marker</td>
    <td>String</td>
    <td>否</td>
    <td>查询用户起始位标识，每次请求的响应有返回，为空时从头开始返回用户信息。</td>
  </tr>
</tbody></table>





## 4 请求示例

```
https://rtc-api.zego.im/?Action=DescribeUserList
&RoomId=room_demo
&Mode=0
&Limit=2
&Marker=
&<公共请求参数>
```

## 5 响应参数


<table class="collapsible-table" >
  <colgroup>
    <col width="30%">
    <col width="20%">
    <col width="50%">
  </colgroup>
<tbody><tr data-row-level="1">
<th>参数</th>
<th>类型</th>
<th>描述</th>
<td></td>
</tr>
<tr data-row-level="2">
<td>Code</td>
<td>Int32</td>
<td>返回码。</td>
<td></td>
</tr>
<tr data-row-level="3">
<td>Message</td>
<td>String</td>
<td>操作结果描述。</td>
<td></td>
</tr>
<tr data-row-level="4">
<td>RequestId</td>
<td>String</td>
<td>请求 ID。</td>
<td></td>
</tr>
<tr data-row-level="5" data-row-child="true">
<td>Data</td>
<td>Object</td>
<td>响应数据。</td>
<td></td>
</tr>
<tr data-row-level="5-1">
<td>Marker</td>
<td>String</td>
<td>用户起始位标识。</td>
<td></td>
</tr>
<tr data-row-level="5-2" data-row-child="true">
<td>UserList</td>
<td>Array of Object</td>
<td>用户列表。</td>
<td></td>
</tr>
<tr data-row-level="5-2-1">
<td>UserId</td>
<td>String</td>
<td>用户名。</td>
<td></td>
</tr>
<tr data-row-level="5-2-2">
<td>UserName</td>
<td>String</td>
<td>用户昵称。</td>
<td></td>
</tr>
<tr data-row-level="5-2-3">
<td>UserRole</td>
<td>UInt32</td>
<td><p>用户角色。</p><ul><li>1：主播。</li><li>2：观众。</li><li>4：管理员，该类型用户主要存在于云录制、音视频流审核等场景中，客户端 SDK 的用户相关接口会过滤该类型用户。</li></ul>
<p><b>该返回参数，仅在接入 LiveRoom 服务时有实际意义，接入 Express 服务时请忽略此参数。</b></p></td>
<td></td>
</tr>
</tbody></table>





## 6 响应示例

```
{
    "Code": 0,
    "Message": "success",
    "RequestId": "TestRequestId1635940600561291000",
    "Data": {
        "Marker": "1635940599950-user2",
        "UserList": [
            {
                "UserId": "user1",
                "UserName": "user1",
                "UserRole": 1
            },
            {
                "UserId": "user2",
                "UserName": "user2",
                "UserRole": 2
            }
        ]
    }
}
```

## 7 返回码

请参考 [全局返回码\|_blank](!Return_Codes/Return_Codes)。
