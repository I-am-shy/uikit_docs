---
articleID: 21033
---
# Quick Start for Live Streaming

---


This document introduces how to quickly implement a simple video live streaming through the Live Streaming feature.


## Introduction

Explanation of related concepts:

- ZEGO Express SDK: A real-time audio, video, and live streaming SDK provided by ZEGO, offering developers convenient access, high definition and smoothness, multi-platform interoperability, low latency, and high concurrency audio and video services.
- Stream: Refers to a set of continuously sending audio and video data encapsulated in a specified encoding format. A user can publish multiple streams simultaneously (for example, one for camera data, one for screen sharing data) and play multiple streams simultaneously. Each stream is identified by a stream ID (streamID).
- Publish stream: The process of pushing the encapsulated audio and video data stream from the capture stage to the ZEGO real-time audio and video cloud.
- Play stream: The process of pulling and playing existing audio and video data streams from the ZEGO MSDN network.
- Room: An audio and video space service provided by ZEGO, used to organize user groups. Users in the same room can send and receive real-time audio, video, and messages with each other.
    - Users need to log in to a room first before they can publish and play streams.
    - Users can only receive relevant messages in the room they are in (user entry/exit, audio and video stream changes, etc.).
    - Each room is identified by a unique roomID within an AppID. All users who log in to the room using the same roomID belong to the same room.


For more related concepts, please refer to [Term Explanation](/glossary/term-explanation).


## Prerequisites

Before implementing the Live Streaming feature, please ensure:

- The ZEGO Express SDK has been integrated into your project. For details, please refer to [Quick Start - Integration](/live-streaming-ios-swift/quick-start/integrating-sdk).
- A project has been created in the [ZEGOCLOUD Console](https://console.zego.im), and a valid AppID has been applied for. For details, please refer to "Project Information" in [Console - Project Management](/console/project-info).


## Implementation Flow

The basic flow for users to conduct video live streaming through ZEGO Express SDK is:

User A and B join the room, User B previews and publishes the audio and video stream to the ZEGO cloud service (Publish stream), and User A plays User B's audio and video stream after receiving the notification of User B's published audio and video stream (Play stream).


<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Common/ZegoExpressEngine/common_usage_new.png" /></Frame>


### Enable Service

The Live Streaming feature is not enabled by default. Before using it, please enable it yourself in the [ZEGOCLOUD Console](https://console.zego.im) (for enablement steps, please refer to "Live Streaming" in [Project Management - Service Configuration](/console/service-configuration/l3)), or contact ZEGOCLOUD Technical Support to enable it.

### Initialization

**1. Create User Interface**

Create a live streaming user interface for your project according to scenario requirements. We recommend adding the following elements to your project:

- Local video view
- Remote video view
- Exit live streaming button

<Note title="Note">


- The local video view is only displayed when the local user is a host, that is, if the local user is an audience member, only the remote video view is displayed.
- The remote video view is only displayed when the remote user is a host.

</Note>




<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/QuickStart/express_quickstart_video_call_new.png" /></Frame>

**2. Import ZegoExpressEngine**

Import ZegoExpressEngine in your project.

```swift
import ZegoExpressEngine
```


**3. Create Engine**

Call the create engine interface, pass the applied AppID to the parameter "appID", and create an engine singleton object.


```swift
let profile = ZegoEngineProfile()
// Please obtain through official website registration, format: 1234567890
profile.appID = <#appID#>
// Specify using the live streaming scenario (please fill in the scenario suitable for your business according to the actual situation)
profile.scenario = .default
// Create the engine and register self as the eventHandler callback. If no callback registration is needed, the eventHandler parameter can be passed as nil, and the "setEventHandler:" method can be called later to set the callback
ZegoExpressEngine.createEngine(with: profile, eventHandler: self)
```

**4. Set Callback**

You can listen to and handle the event callbacks you care about by implementing the class of the [ZegoEventHandler](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler) interface and implementing the required callback methods. Then pass the instantiated object as the `eventHandler` parameter to `createEngine` or pass it to [setEventHandler](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#set-event-handler) to register the callback.

<Warning title="Warning">


It is recommended to register the callback when creating the engine or immediately after creating the engine to avoid missing event notifications due to delayed registration.

</Warning>





<Accordion title="Common Notification Callbacks" defaultOpen="false">
**1. Notification of connection status changes in the room**

[onRoomStateChanged](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-room-state-changed-error-code-extended-data-room-id): When you locally call [loginRoom](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#login-room-user) to join a room, you can monitor your connection status in the room in real time by listening to the [onRoomStateChanged](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-room-state-changed-error-code-extended-data-room-id) callback.

You can handle business logic according to different states in the callback.

```swift
func onRoomStateChanged(_ reason: ZegoRoomStateChangedReason, errorCode: Int32, extendedData: [AnyHashable : Any], roomID: String) {

}
```

The meaning of ZegoRoomStateChangedReason states is as follows, for more information please refer to [Room Connection Status](/live-streaming-ios/room/room-connection-status):


<table>

  <tbody><tr>
    <th>State</th>
    <th>Enum Value</th>
    <th>Meaning</th>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonLogining</td>
    <td>0</td>
    <td>Logging in to the room. When calling [loginRoom] to log in to the room or [switchRoom] to switch to the target room, it enters this state, indicating that a connection to the server is being requested. Usually, the application interface is displayed through this state.</td>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonLogined</td>
    <td>1</td>
    <td>Successfully logged in to the room. When logging in to or switching rooms successfully, it enters this state, indicating that the room login has been successful, and users can normally receive callback notifications for additions and deletions of other users and all stream information in the room.</td>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonLoginFailed</td>
    <td>2</td>
    <td>Failed to log in to the room. When logging in to or switching rooms fails, it enters this state, indicating that the room login or room switching has failed, for example, incorrect AppID or Token, etc.</td>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonReconnecting</td>
    <td>3</td>
    <td>Room connection temporarily interrupted. If the interruption is caused by poor network quality, the SDK will perform internal retries.</td>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonReconnected</td>
    <td>4</td>
    <td>Room reconnection successful. If the interruption is caused by poor network quality, the SDK will perform internal retries, and after successful reconnection, it enters this state.</td>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonReconnectFailed</td>
    <td>5</td>
    <td>Room reconnection failed. If the interruption is caused by poor network quality, the SDK will perform internal retries, and after failed reconnection, it enters this state.</td>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonKickOut</td>
    <td>6</td>
    <td>Kicked out of the room by the server. For example, when the same user name logs in to the room elsewhere, causing the local end to be kicked out of the room, it will enter this state.</td>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonLogout</td>
    <td>7</td>
    <td>Successfully logged out of the room. This state is the default before logging in to the room. When calling [logoutRoom] to successfully log out of the room or [switchRoom] internally logs out of the current room successfully, it enters this state.</td>
  </tr>
  <tr>
    <td>ZegoRoomStateChangedReasonLogoutFailed</td>
    <td>8</td>
    <td>Failed to log out of the room. When calling [logoutRoom] fails to log out of the room or [switchRoom] internally fails to log out of the current room, it enters this state.</td>
  </tr>
</tbody></table>



**2. Notification of other users entering or exiting the room**

[onRoomUserUpdate ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-room-user-update-user-list-room-id): When other users in the same room enter or exit the room, you can receive notifications through this callback. When the parameter [ZegoUpdateType ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~enum~ZegoUpdateType#zego-update-type-add) in the callback is ZegoUpdateTypeAdd, it indicates that a user has entered the room; when [ZegoUpdateType ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~enum~ZegoUpdateType#zego-update-type-add) is ZegoUpdateTypeDelete, it indicates that a user has exited the room.

<Warning title="Warning">


- Only when the [isUserStatusNotify ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoRoomConfig#is-user-status-notify) parameter in the configuration [ZegoRoomConfig ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoRoomConfig) passed when logging in to the room [loginRoom ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#login-room-user) is true can users receive callbacks of other users in the room.
- When the number of people in the room exceeds 500, the `onRoomUserUpdate` callback is not guaranteed to be valid. If your business scenario involves more than 500 people in a room, please contact ZEGOCLOUD Technical Support.


</Warning>



```swift
// When other users in the same room enter or exit the room, you can receive notifications through this callback. When the parameter ZegoUpdateType in the callback is ZegoUpdateTypeAdd, it indicates that a user has entered the room; when ZegoUpdateType is ZegoUpdateTypeDelete, it indicates that a user has exited the room.
// Only when the isUserStatusNotify parameter in the configuration ZegoRoomConfig passed when logging in to the room loginRoom is YES can users receive callbacks of other users in the room.
// When the number of people in the room exceeds 500, the onRoomUserUpdate callback is not guaranteed to be valid. If your business scenario involves more than 500 people in a room, please contact ZEGOCLOUD Technical Support.
func onRoomUserUpdate(_ updateType: ZegoUpdateType, userList: [ZegoUser], roomID: String) {
    if updateType == .add {
        for user in userList {
            NSLog("User %@ entered room %@", user.userName, roomID)
        }
    } else if updateType == .delete {
        for user in userList {
            NSLog("User %@ exited room %@", user.userName, roomID)
        }
    }
}
```

**3. Notification of user publishing audio and video stream status**

[onPublisherStateUpdate](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-publisher-state-update-error-code-extended-data-stream-id): According to actual application needs, after a user publishes an audio and video stream, when the status of the published video stream changes (such as network interruption causing publishing exceptions, etc.), you will receive this callback, and the SDK will automatically retry.

```swift
// Notification of user publishing audio and video stream status
// When the status of the user's published audio and video stream changes, this callback will be received. If network interruption causes publishing exceptions, the SDK will notify status changes while retrying to publish.
func onPublisherStateUpdate(_ state: ZegoPublisherState, errorCode: Int32, extendedData: [AnyHashable : Any]?, streamID: String) {
    if errorCode != 0 {
        NSLog("Publishing stream status error errorCode: %d", errorCode)
    } else {
        switch (state) {
        case .publishing:
            NSLog("Publishing stream")
            break
        case .publishRequesting:
            NSLog("Requesting to publish stream")
            break
        case .noPublish:
            NSLog("Not publishing stream")
            break
    }
}
```

**4. Notification of user playing audio and video stream status**

[onPlayerStateUpdate](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-player-state-update-error-code-extended-data-stream-id): According to actual application needs, after a user plays an audio and video stream, when the status of the played video stream changes (such as network interruption causing playing exceptions, etc.), you will receive this callback, and the SDK will automatically retry.

```swift
// Notification of user playing audio and video stream status
// When the status of the user's played audio and video stream changes, this callback will be received. If network interruption causes playing exceptions, the SDK will automatically retry.
func onPlayerStateUpdate(_ state: ZegoPlayerState, errorCode: Int32, extendedData: [AnyHashable : Any]?, streamID: String) {
    if (errorCode != 0) {
        NSLog("Playing stream status error streamID: %@, errorCode:%d", streamID, errorCode)
    } else {
        switch (state) {
        case .playing:
            NSLog("Playing stream")
            break
        case .playRequesting:
            NSLog("Requesting to play stream")
            break
        case .noPlay:
            NSLog("Not playing stream")
            break
        }
    }
}
```
</Accordion>

<a id="createroom"></a>

### Log In to Room


You can call the [loginRoom ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#login-room-user) interface to log in to a room. If the room does not exist, calling this interface will create and log in to this room. The parameters for roomID and user are generated locally by you, but need to meet the following conditions:

- Within the same AppID, you need to ensure that "roomID" is globally unique.
- Within the same AppID, you need to ensure that "userID" is globally unique. It is recommended that developers associate "userID" with their own business account system.

```swift
// roomID is generated locally by you, need to ensure that "roomID" is globally unique. Different users need to log in to the same room to conduct calls
let roomID = "room1"

// Create a user object, ZegoUser's constructor method userWithUserID will set "userName" to be the same as the passed parameter "userID". Neither "userID" nor "userName" can be "nil", otherwise it will cause room login failure.
// userID is generated locally by you, need to ensure that "userID" is globally unique.
let user = ZegoUser(userID: "user1")

let config = ZegoRoomConfig()

// Only by passing in a ZegoRoomConfig with the "isUserStatusNotify" parameter set to "true" can you receive the onRoomUserUpdate callback.
config.isUserStatusNotify = true
// token is generated by the user's own server. To go through the process faster, you can also obtain a temporary audio and video token through the ZEGOCLOUD Console
config.token = "<#token#>"

ZegoExpressEngine.shared().loginRoom(roomID, user: user, config: config) { errorCode, extendedData in
    // (Optional callback) Room login result. If you only care about the login result, just pay attention to this callback
    if (errorCode == 0) {
        NSLog("Room login successful")
    } else {
        // Login failed, please refer to errorCode description /real-time-video-ios-oc/client-sdk/error-code
        NSLog("Room login failed")
    }
}
```

#### Login Status (Room Connection Status) Callback

After calling the login room interface, you can monitor your connection status in the room in real time by listening to the [onRoomStateChanged ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-room-state-changed-error-code-extended-data-room-id) callback.

```swift
// After locally calling loginRoom to join the room, you can monitor your connection status in the room in real time by listening to the onRoomStateChanged callback.
// For more information, please refer to https://doc-zh.zego.im/article/12884
func onRoomStateChanged(_ reason: ZegoRoomStateChangedReason, errorCode: Int32, extendedData: [AnyHashable : Any], roomID: String) {
    if reason == .logining {
        // Logging in to the room. When calling [loginRoom] to log in to the room or [switchRoom] to switch to the target room, it enters this state, indicating that a connection to the server is being requested. Usually, the application interface is displayed through this state.
    } else if reason == .logined {
        // Successfully logged in to the room. When logging in to or switching rooms successfully, it enters this state, indicating that the room login has been successful, and users can normally receive callback notifications for additions and deletions of other users and all stream information in the room.
        // Only when the room status is login successful or reconnection successful can publishing streams (startPublishingStream) and playing streams (startPlayingStream) normally send and receive audio and video
    } else if reason == .loginFailed {
        // Failed to log in to the room. When logging in to or switching rooms fails, it enters this state, indicating that the room login or room switching has failed, for example, incorrect AppID or AppSign, etc.
    } else if reason == .reconnecting {
        // Room connection temporarily interrupted. If the interruption is caused by poor network quality, the SDK will perform internal retries.
    } else if reason == .reconnected {
        // Room reconnection successful. If the interruption is caused by poor network quality, the SDK will perform internal retries, and after successful reconnection, it enters this state.
    } else if reason == .reconnectFailed {
        // Room reconnection failed. If the interruption is caused by poor network quality, the SDK will perform internal retries, and after failed reconnection, it enters this state.
    } else if reason == .kickOut {
        // Kicked out of the room by the server. For example, when the same user name logs in to the room elsewhere, causing the local end to be kicked out of the room, it will enter this state.
    } else if reason == .logout {
        // Successfully logged out of the room. This state is the default before logging in to the room. When calling [logoutRoom] to successfully log out of the room or [switchRoom] internally logs out of the current room successfully, it enters this state.
    } else if reason == .logoutFailed {
        // Failed to log out of the room. When calling [logoutRoom] fails to log out of the room or [switchRoom] internally fails to log out of the current room, it enters this state.
    }
}
```

<a id="publishingStream"></a>


### Host previews their screen and publishes to ZEGO audio and video cloud

**1. (Optional) Host previews their screen**

<Note title="Note">


Whether or not [startPreview ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-preview) is called for preview, you can publish your audio and video stream to the ZEGO audio and video cloud.

</Note>




If you want to see the local screen, you can call the [startPreview](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-preview) interface to set the preview view and start local preview.

```swift
// Set local preview view and start preview. The view mode uses the SDK's default mode, scaling proportionally to fill the entire View
let previewCanvas = ZegoCanvas(view: localUserViewObject.view.view)
ZegoExpressEngine.shared().startPreview(previewCanvas)
```

**2. Publish your audio and video stream to the ZEGO audio and video cloud**

After the user calls the [loginRoom](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#login-room-user) interface, they can directly call the [startPublishingStream](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-publishing-stream) interface, pass in "streamID", and publish their audio and video stream to the ZEGO audio and video cloud. You can know whether the publishing is successful by listening to the [onPublisherStateUpdate](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-publisher-state-update-error-code-extended-data-stream-id) callback.

"streamID" is generated locally by you, but needs to ensure:

Under the same AppID, "streamID" is globally unique. If under the same AppID, different users each publish a stream with the same "streamID", the user who publishes later will fail to publish.

The example here publishes immediately after calling the [loginRoom](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#login-room-user) interface. When implementing specific business, you can choose other timing to publish, as long as you call [loginRoom](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#login-room-user) first.

```swift
// User calls this interface to publish after calling loginRoom
// Under the same AppID, developers need to ensure that "streamID" is globally unique. If different users each publish a stream with the same "streamID", the user who publishes later will fail to publish.
ZegoExpressEngine.shared().startPublishingStream(localStreamID)
```

<Note title="Note">If you need to know about Express's microphone/audio/speaker related interfaces, please refer to [FAQ - How to implement turning on/off camera/video screen/microphone/audio/speaker?](http://doc-zh.zego.im/faq/How_to_switch_devices).</Note>

### Play host's audio and video

When conducting live streaming, we need to play the host's audio and video. Through the Live Streaming play stream delay, it can be controlled within 1s, achieving a smooth live streaming experience with ultra-low latency, strong synchronization, resistance to extreme weak networks, ultra-low stuttering, ultra-clear picture quality, and first-frame instant play.

When other users in the same room publish their audio and video streams to the ZEGO audio and video cloud, we will receive the notification of audio and video stream additions in the [onRoomStreamUpdate](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-room-stream-update-stream-list-extended-data-room-id) callback, and can obtain the "streamID" of a certain stream through ZegoStream.

In this callback, we can call [startPlayingStream](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-playing-stream-canvas), pass in "streamID" to play the user's audio and video. You can know whether the audio and video are successfully played by listening to the [onPlayerStateUpdate ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-player-state-update-error-code-extended-data-stream-id) callback. You can choose the following playing methods.

<Warning title="Warning">


- Live Streaming is not enabled by default. Please enable it yourself in the ZEGOCLOUD Console or contact ZEGOCLOUD Technical Support. For details, please refer to [Enable Service](/live-streaming-ios/quick-start/implementing-live-streaming#enable-service).
- If users encounter related errors during audio and video live streaming, they can check [Error Codes](/live-streaming-ios-swift/client-sdk/error-code).

</Warning>




Call the [startPlayingStream](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-playing-stream-canvas) interface and set the [resourceMode](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoPlayerConfig#resource-mode) parameter to "ZegoStreamResourceModeOnlyL3", indicating Live Streaming play stream.


```swift
// When other users in the room publish/stop publishing streams, we will receive corresponding notifications of stream additions and removals here
func onRoomStreamUpdate(_ updateType: ZegoUpdateType, streamList: [ZegoStream], extendedData: [AnyHashable: Any]?, roomID: String) {
    // When updateType is ZegoUpdateTypeAdd, it represents that a new audio and video stream has been added. At this time, we can call the startPlayingStream interface to play this audio and video stream
    if updateType == .add {
        // Start playing stream, set remote playing render view, the view mode uses the SDK's default mode, scaling proportionally to fill the entire View
        // The following remoteUserView is a View on the UI interface. Here, to make the example code more concise, we only play the first stream in the newly added audio and video stream list. In actual business, it is recommended that developers loop through streamList and play each audio and video stream
        let streamID = streamList[0].streamID
        let playerConfig = ZegoPlayerConfig()
        playerConfig.resourceMode = .onlyL3
        ZegoExpressEngine.shared().startPlayingStream(streamID, canvas: ZegoCanvas(view: view: viewObject.view.view), config: playerConfig)
    }
}
```

### Debug Live Streaming feature

Run the project on a real device. After running successfully, you can see the local video screen.

For convenience of experience, ZEGO provides a [Web Debug Example](https://zegodev.github.io/zego-express-webrtc-sample/assistDev/index.html). On this page, enter the same AppID, RoomID, Server address, and Token to join the same room and communicate with the real device. When the live streaming starts successfully, you can hear remote audio and see remote video screens.

### Stop publishing/playing audio and video streams

**1. Stop publishing stream, stop preview**

Call the [stopPublishingStream ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#stop-publishing-stream-1) interface to stop sending the local audio and video stream to remote users.

```swift
// Stop publishing stream
ZegoExpressEngine.shared().stopPublishingStream()
```

If local preview is enabled, call the [stopPreview ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#stop-preview) interface to stop preview.

```swift
// Stop local preview
ZegoExpressEngine.shared().stopPreview()
```

**2. Stop playing stream**

Call the [stopPlayingStream ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#stop-playing-stream) interface to stop playing the audio and video stream published by the remote end.

<Warning title="Warning">


If developers receive the notification of "decrease" in audio and video streams through the [onRoomStreamUpdate](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-room-stream-update-stream-list-extended-data-room-id) callback, please call the [stopPlayingStream ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#stop-playing-stream) interface in time to stop playing, to avoid playing empty streams and generating additional costs; or, developers can choose an appropriate timing according to their own business needs and actively call the [stopPlayingStream ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#stop-playing-stream) interface to stop playing.


</Warning>



```swift
// Stop playing stream
ZegoExpressEngine.shared().stopPlayingStream("stream1")
```

### Log Out of Room

Call the [logoutRoom ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#logout-room) interface to log out of the room.

```swift
// Log out of room
ZegoExpressEngine.shared().logoutRoom()
```

### Destroy Engine

If users completely do not use audio and video functions, they can destroy the engine and release resources such as microphone, camera, memory, CPU, etc.

- If you need to listen to the callback to ensure that device hardware resources are released, you can pass in "callback" when destroying the engine. This callback is only used for sending notifications, and developers cannot release engine-related resources in the callback.
- If you don't need to listen to the callback, you can pass in "nil".

```swift
ZegoExpressEngine.destroy(nil)
```

## Live Streaming API Call Sequence

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/QuickStart/quickstart_uml.png" /></Frame>

## FAQ

**1. Can I directly kill the process when calling [logoutRoom ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#logout-room) to log out of the room?**

After calling [logoutRoom ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#logout-room) and directly killing the process, there is a certain probability that the [logoutRoom ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#logout-room) signal will not be sent out. Then the ZEGO server can only consider that this user has exited the room after the heartbeat times out. To ensure that the [logoutRoom ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#logout-room) signal is sent out, it is recommended to call [destroyEngine ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#destroy-engine) again and wait for the callback before killing the process.

## Related Documents
- [Common Error Codes](/real-time-video-ios-swift/client-sdk/error-code)
- [How to handle room and user related issues?](https://doc-zh.zego.im/faq/express_room?product=ExpressVideo&platform=all)
- [How to set and get SDK logs and stack information?](https://doc-zh.zego.im/faq/express_sdkLog?product=ExpressVideo&platform=all)
- [Does the SDK support reconnection after disconnection?](https://doc-zh.zego.im/faq/reconnect?product=ExpressVideo&platform=all)
- [In live streaming scenarios, how to listen to events of remote audience role users logging in/exiting the room?](https://doc-zh.zego.im/faq/audience_event?product=ExpressVideo&platform=all)
- [How to adjust the camera focal length (zoom function)?](https://doc-zh.zego.im/faq/express_adjust_focal?product=ExpressVideo&platform=all)

- [Why can't I open the camera?](https://doc-zh.zego.im/faq/camera?product=ExpressVideo&platform=all)

- [How to ensure smooth audio and video in poor network environments (traffic control function)?](https://doc-zh.zego.im/faq/flowcontrol?product=ExpressVideo&platform=all)
