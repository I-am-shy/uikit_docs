---
articleID: 14760
---
# 常用视频配置

- - -

## 1 功能简介

@@@Common_Video_Configuration_Function_Introduction@@@

## 2 示例源码下载

请参考 [下载示例源码](!DownloadDemo/DownloadDemo) 获取源码。

相关源码请查看 “/ZegoExpressExample/Examples/CommonFeatures/CommonVideoConfig”目录下的文件。

## 3 前提条件

在设置视频配置之前，请确保：

@@@Express-Video_Prerequisites@@@

## 4 使用步骤

### 4.1 修改视频配置

- **自行设置**

@@@Common_Video_Configuration_Set_by_Yourself@@@

```C++

ZegoVideoConfig videoConfig;

videoConfig.captureHeight = 360;
videoConfig.captureWidth = 640;
videoConfig.encodeHeight = 360;
videoConfig.encodeWidth = 640;
videoConfig.fps = 15
videoConfig.bitrate = 600;

// 设置视频配置
ZegoExpressEngine::getEngine()->setVideoConfig(videoConfig);
```

<div class="mk-hint">
移动端的宽高分辨率与 PC 端的宽高分辨率是相反的，例如移动端 360p 的分辨率为 360x640，而 PC 端 360p 的分辨率为 640x360。
</div>

- **使用预设值**

除自行设置之外，也可以使用 ZEGO Express SDK 提供的预设组合值，ZegoVideoConfigPreset 的预设组合值如下：

| ZegoVideoConfigPreset | 采集分辨率<br/>（宽 × 高） | 编码分辨率<br/>（宽 × 高） | 帧率（fps） | 码率（kbps） |
| ------------------- | ------------------ | --------------- | --------- | ---------- |
|      ZEGO_VIDEO_CONFIG_PRESET_180P      |       320 × 180        |      320 × 180      |     15      |     300      |
|      ZEGO_VIDEO_CONFIG_PRESET_270P      |       480 × 270       |      480 × 270      |     15      |     400      |
|      ZEGO_VIDEO_CONFIG_PRESET_360P      |       640 × 360        |      640 × 360      |     15      |     600      |
|      ZEGO_VIDEO_CONFIG_PRESET_540P      |       960 × 540        |      960 × 540      |     15      |     1200     |
|      ZEGO_VIDEO_CONFIG_PRESET_720P      |       1280 × 720       |      1280 × 720     |     15      |     1500     |
|     ZEGO_VIDEO_CONFIG_PRESET_1080P      |       1920 × 1080      |     1920 × 1080     |     15      |     3000     |  

使用预设值时示例代码如下：

```C++
ZegoVideoConfig vConfig(ZEGO_VIDEO_CONFIG_PRESET_360P);
engine->setVideoConfig(vConfig);
```

### 4.2 修改视频视图模式

<div class="mk-warning">
设置视频视图模式前需先停止预览或拉流，否则无法生效。
</div>

通过修改视图对象 [ZegoCanvas](@-ZegoCanvas) 的 “viewMode” 参数可以修改视频的视图模式。目前支持如下三种视频渲染填充模式:

|枚举值|说明|
|-|-|
|ZEGO_VIEW_MODE_ASPECT_FIT|等比缩放，可能有黑边。|
|ZEGO_VIEW_MODE_ASPECT_FILL|等比缩放填充整个 View，可能有部分被裁减。|
|ZEGO_VIEW_MODE_SCALE_TO_FILL|填充整个 View，图像可能被拉伸。|

三种视频渲染填充模式效果如图所示：


![](/Pics/Windows/Common/CommonFeatures/CommonVideoConfig/viewMode_windows.png)

<div class = 'mk-hint'>

- 上图中展示的视图分辨率为 320 x 390（宽 x 高），视频分辨率为 340 x 340（宽 x 高）。
- 上图中原视频尺寸长等于宽，视图尺寸长大于宽，故在 “ZEGO_VIEW_MODE_ASPECT_FIT” 渲染模式下，视频上下出现黑边；若此时视图尺寸宽大于长，则在 “ZEGO_VIEW_MODE_ASPECT_FIT” 渲染模式下，视频左右将会出现黑边。
</div>

以设置预览视图模式为 “ZEGO_VIEW_MODE_ASPECT_FIT” 并开始预览为例：

```C++
// winId为视频预览窗口句柄
ZegoCanvas previewCanvas(ZegoView(winId));
// 将视图模式设置为 ZEGO_VIEW_MODE_ASPECT_FIT
previewCanvas.viewMode = ZEGO_VIEW_MODE_ASPECT_FIT;
// 开始预览
engine->startPreview(&previewCanvas);
```

### 4.3 设置镜像模式

<div class="mk-hint">

该模式也支持在推流过程中设置并即时生效。
</div>

在推流前或停止推流后可通过调用 [setVideoMirrorMode](@setVideoMirrorMode) 设置本地预览视频以及推送的视频是否开启镜像模式。目前支持如下四种镜像模式：

|枚举值|说明|
|-|-|
|ZEGO_VIDEO_MIRROR_MODE_NO_MIRROR|本地预览和拉流端看到的视频都不是镜像画面。|
|ZEGO_VIDEO_MIRROR_MODE_ONLY_PREVIEW_MIRROR|只有本地预览时才是镜像画面，默认采用此模式。|
|ZEGO_VIDEO_MIRROR_MODE_ONLY_PUBLISH_MIRROR|只有拉流端看到的视频才是镜像画面。|
|ZEGO_VIDEO_MIRROR_MODE_BOTH_MIRROR|本地预览和拉流端看到的视频都是镜像画面。|

四种镜像模式的效果如下：

![](/Pics/Windows/Common/CommonFeatures/CommonVideoConfig/mirror_mode_windows.png)

以设置拉流端镜像且本地预览非镜像为例：

```C++
engine->setVideoMirrorMode(ZEGO_VIDEO_MIRROR_MODE_ONLY_PUBLISH_MIRROR);
```


## 相关文档

- [如何选择视频分辨率、帧率、码率？](https://doc-zh.zego.im/faq/video_info)
- [怎么处理视频放大或黑边问题？](https://doc-zh.zego.im/faq/video_big)
- [怎么处理视频模糊问题？](https://doc-zh.zego.im/faq/video_blur)
