---
articleID: 14758
---
# 常用视频配置

- - -

## 1 功能简介

@@@Common_Video_Configuration_Function_Introduction@@@

## 2 示例源码下载

请参考 [下载示例源码](!DownloadDemo/DownloadDemo) 获取源码。

相关源码请查看 “/ZegoExpressExample/Examples/CommonFeatures/CommonVideoConfig” 目录下的文件。

## 3 前提条件

在进行视频配置之前，请确保：

@@@Express-Video_Prerequisites@@@

## 4 使用步骤

### 4.1 修改视频配置

- **设置详细参数**

@@@Common_Video_Configuration_Set_by_Yourself@@@

```objc
//Set Video Config Before StartPreview And StartPublishing
ZegoVideoConfig *videoConfig = [[ZegoVideoConfig alloc] init];
videoConfig.captureResolution = CGSizeMake(360, 640);
videoConfig.encodeResolution = CGSizeMake(360, 640);
videoConfig.fps = 15;
videoConfig.bitrate = 600;
[[ZegoExpressEngine sharedEngine] setVideoConfig:videoConfig];
```

<div class="mk-hint">

移动端的宽高分辨率与 PC 端的宽高分辨率是相反的，例如移动端 360p 的分辨率为 360 x 640，而 PC 端 360p 的分辨率为 640 x 360。
</div>

- **使用预设值设置**

@@@Common_Video_Configuration_Use_Preset_Values@@@

使用预设值时示例代码如下：

```objc
ZegoVideoConfig *config = [ZegoVideoConfig configWithPreset:ZegoVideoConfigPreset1080P];
[[ZegoExpressEngine sharedEngine] setVideoConfig:config];
```

### 4.2 修改视频视图模式

<div class="mk-warning">

设置视频视图模式前需要先停止预览或停止拉流，否则无法生效。

</div>

通过修改视图对象 [ZegoCanvas](@-ZegoCanvas) 的 “viewMode” 参数可以修改视频的视图模式。目前支持如下三种视频渲染填充模式:

|枚举值|说明|
|-|-|
|ZegoViewModeAspectFit|等比缩放，可能有黑边。|
|ZegoViewModeAspectFill|等比缩放填充整个 View，可能有部分被裁减。|
|ZegoViewModeScaleToFill|填充整个 View，图像可能被拉伸。|

三种视频渲染填充模式效果如图所示：

![](/Pics/iOS/ZegoExpressEngine/CommonUsage/viewMode_ios.jpg)

<div class = 'mk-hint'>

- 上图中展示的视图分辨率为 300 x 500（宽 x 高），原视频分辨率为 300 x 300（宽 x 高）。
- 上图中原视频尺寸高等于宽，视图尺寸高大于宽，故在 “ZegoViewModeAspectFit” 渲染模式下，视频上下出现黑边；若此时视图尺寸宽大于高，则在 “ZegoViewModeAspectFit” 渲染模式下，视频左右将会出现黑边。
</div>

以设置预览视图模式为 “ZegoViewModeAspectFit” 为例：

```objc
// remotePlayView 为 UI 界面上的 view 对象
ZegoCanvas *previewCanvas = [ZegoCanvas canvasWithView:self.remotePlayView];
// 将视图模式设置为 ZegoViewModeAspectFit
previewCanvas.viewMode = ZegoViewModeAspectFit;
// 开始预览
[[ZegoExpressEngine sharedEngine] startPreview:previewCanvas];
```

### 4.3 设置镜像模式

<div class="mk-hint">

该模式支持在推流前后设置并即时生效。
</div>

你可以调用 [setVideoMirrorMode](@setVideoMirrorMode) 设置本地预览视频以及推送的视频是否开启镜像模式。目前支持如下四种镜像模式：

|枚举值|说明|
|-|-|
|ZegoVideoMirrorModeNoMirror|本地预览和拉流端看到的视频都不是镜像画面。|
|ZegoVideoMirrorModeOnlyPreviewMirror|只有本地预览时才是镜像画面，默认采用此模式。|
|ZegoVideoMirrorModeOnlyPublishMirror|只有拉流端看到的视频才是镜像画面。|
|ZegoVideoMirrorModeBothMirror|本地预览和拉流端看到的视频都是镜像画面。|

四种镜像模式的效果如下：

![](/Pics/iOS/ZegoExpressEngine/CommonUsage/mirror_mode_ios.jpg)

以设置拉流端镜像显示，设置本地预览非镜像显示为例：

```objc
[[ZegoExpressEngine sharedEngine] setVideoMirrorMode:ZegoVideoMirrorModeOnlyPublishMirror];
```


## 相关文档

- [如何选择视频分辨率、帧率、码率？](https://doc-zh.zego.im/faq/video_info)
- [怎么处理视频放大或黑边问题？](https://doc-zh.zego.im/faq/video_big)
- [怎么处理视频模糊问题？](https://doc-zh.zego.im/faq/video_blur)
