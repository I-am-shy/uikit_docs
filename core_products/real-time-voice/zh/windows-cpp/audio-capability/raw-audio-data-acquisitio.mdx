---
articleID: 5080
---
# 原始音频数据获取

- - -

## 1 功能简介

SDK 为开发者提供了获取原始音频录制的功能，获取的原始音频数据格式为 PCM。

## 2 使用步骤

获取原始音频功能的使用流程如下：

### 2.1 初始化SDK

请参考 [快速开始 - 实现流程\|_blank](7633#3_1) 的 “3.1 创建引擎”

### 2.2 启用原始音频数据功能

```C++
// 开启获取原始音频数据功能
ZegoAudioFrameParam param;
param.channel = ZEGO_AUDIO_CHANNEL_STEREO;
param.sampleRate = ZEGO_AUDIO_SAMPLE_RATE_8K;
unsigned int bitmask = ZEGO_AUDIO_DATA_CALLBACK_BIT_MASK_CAPTURED | ZEGO_AUDIO_DATA_CALLBACK_BIT_MASK_PLAYBACK;
engine->startAudioDataObserver(bitmask, param);
```
<div class="mk-hint">

如有需要可参考 [位掩码的使用](#8663)。
</div>

### 2.3 设置回调接收原始音频数据并处理

```C++
// 设置原始音频数据回调
class MyAudioDataHandler: public IZegoAudioDataHandler
{
public:
    /** 本地采集音频数据，推流后可收到回调 */
    virtual void onCapturedAudioData(const unsigned char* /*data*/, unsigned int /*dataLength*/, ZegoAudioFrameParam /*param*/) {

    }

    /** 远端拉流音频数据，开始拉流后可收到回调 */
    virtual void onPlaybackAudioData(const unsigned char* /*data*/, unsigned int /*dataLength*/, ZegoAudioFrameParam /*param*/) {

    }

    /** 本地采集与远端拉流声音混合后的音频数据回调 */
    virtual void onMixedAudioData(const unsigned char* /*data*/, unsigned int /*dataLength*/, ZegoAudioFrameParam /*param*/) {

    }
};

engine->setAudioDataHandler(std::make_shared<MyAudioDataHandler>());
```

## 3 API 参考列表

| 方法 | 描述 |
|-------|--------|
| [enableAudioDataCallback \|_blank](/zh/api?doc=Express_Video_SDK_API~CPP_windows~class~zego-express-i-zego-express-engine#enable-audio-data-callback) | 开启获取原始音频数据功能 |
| [setAudioDataHandler \|_blank](/zh/api?doc=Express_Video_SDK_API~CPP_windows~class~zego-express-i-zego-express-engine#set-audio-data-handler) | 设置原始音频数据回调 |
