---
articleID: 3585
---
#  跑通示例源码
---
articleID: 3585
---
<div class="download-area">
    <div class="sdk-download-item-wrapper">
      <div class="download-title">示例源码</div>
      <div class="download-selector">
        <div class="download-select-wrapper" style="padding-right: 0;">
          <a class="download-target-btn" href="javascript:void(0);">本地下载</a>
          <ul class="download-dropdown-list">
            <li data-href="https://storage.zego.im/express/example/audio/qt_cpp/ZegoExpressDemo_qt_cpp.zip"
              class="dropdown-option">
              本地下载
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

# 跑通示例源码

## 示例源码运行指引

<div class="mk-warning">

- ZEGO 已统一环境概念，不再有正式/测试之分，**2021-11-16** 及之前在 [ZEGO 控制台](https://console.zego.im) 创建项目的用户，请参考 [测试环境废弃说明](!OldDocWithTestEnv-TestEnvSupersessionDesc/TestEnvSupersessionDesc) 进行 SDK 升级和调整相关代码。
- 此示例源码只包含了实时语音基本的推拉流操作，若需要获取进阶功能的示例，请参考 [实时音视频示例源码](!ExpressVideoSDK-DownloadDemo/DownloadDemo)（实时语音 SDK 是将实时音视频 SDK 的视频功能裁剪后得来，API 基本一致）。
</div>

本文介绍如何快速跑通示例源码，体验基础的音视频通话服务。

### 1 准备环境

请确保开发环境满足以下技术要求：

* 系统要求：
    * Windows 7 或以上版本。
    * macOS 11.0 或以上版本。
* 安装了 Visual Studio 2019 或以上版本。
* 安装了 Xcode 13 或以上版本。
* 已安装 [CMake](https://cmake.org/download/)。
* 已安装 [Qt](http://download.qt.io/official_releases/qt) 5.9 ～ 5.15 之间的任意版本，详细信息请参考 [Getting Started with Qt\|_balnk](https://doc.qt.io/qt-5/gettingstarted.html)。
* 麦克风、摄像头等支持音视频功能的外部设备正常。

### 2 前提条件

已在 [ZEGO 控制台](https://console.zego.im) 创建项目，并申请有效的 AppID 和 AppSign，详情请参考 [控制台 - 项目管理](#12107) 中的“项目信息”。

<div class="mk-warning">

SDK 同时也支持 Token 鉴权，若您需要升级鉴权方式，可参考 [如何从 AppSign 鉴权升级为 Token 鉴权](http://doc-zh.zego.im/faq/token_upgrade?product=ExpressVideo)。
</div>

- 安装完 CMake 和 Qt 后需要添加环境变量：

    <div class = 'mk-warning'>

    下面提供的 CMake 和 Qt 路径仅供参考，用户需要根据自己设备上的实际路径填写。
    </div>

    - **Windows 系统：**

        1. 修改环境变量：给 Path 中添加 `C:\Program Files\CMake\bin`
        2. 修改环境变量：给 Path 中添加 `C:\Qt\Qt5.12.12\5.12.12\msvc2017\bin`
        3. 添加用户变量：添加 `QTDIR` 用户变量为 `C:\Qt\Qt5.12.12\5.12.12\msvc2017`

    - **macOS 系统：**

        ```bash
        export PATH="$PATH:$HOME/Qt5.12.12/5.12.12/clang_64/bin"
        export QTDIR="$HOME/Qt5.12.12/5.12.12/clang_64"
        ```

### 3 示例源码目录结构

下列结构为示例源码的文件结构，下文所涉及的文件路径均为相对于此目录的路径。

```tree
.
├── README_zh.md
├── README.md
├── libs
│   └── ZegoExpress
│       ├── linux # ZegoExpressVideo Linux SDK 存放目录
│       ├── mac # ZegoExpressAudio macOS SDK 存放目录
│       │   └── ZegoExpressEngine.xcframework
│       └── win # ZegoExpressAudio Windows SDK 存放目录
│           ├── x64
│           └── x86
└── ZegoExpressExample
    ├── KeyCenter.cpp # 填写申请的 AppID 和 AppSign
    ├── KeyCenter.h
    ├── ZegoExpressExample.pro # Qt 工程文件
    ├── Examples
    ├── HomePage
    ...
```

### 4 运行示例源码

示例源码中缺少 SDK 初始化所需的 “AppID” 和 “AppSign”，需要修改 “/ZegoExpressExample/KeyCenter.cpp” 文件，请使用本文 [前提条件](!DownloadDemo/DownloadDemo#1_2) 已获取的 AppID 和 AppSign 正确填写，否则示例源码无法正常运行。

1. 打开工程。

    使用 QtCreator 打开 “./ZegoExpressExample/ZegoExpressExample.pro” 工程文件。

2. 编译和运行项目工程。

    1. 方式一：通过 QtCreator 直接 Run 或者 Build

        打开 Qt 工程后，单击左下角的 “Run”、“Debug”、“Build” 按钮来构建、运行 Demo。

    2. 方式二：通过 qmake 和 make 构建

        * Windows

            1. 打开 cmd.exe，并执行 `cd \path\to\this\folder` 命令进到此文件所在的目录。
            2. 找到 “vcvarsall.bat” 的路径 (例如 VS 2019 版本在 “C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat”)
            3. 执行 `call "\path\to\your\vcvarsall.bat" x86` 命令设置 MSVC 环境
            4. 执行 `qmake ZegoExpressExample\ZegoExpressExample.pro CONFIG+=Win32 -o .\build\Makefile` 命令通过 qmake 生成 Makefile
            5. 执行 `cd build` 命令进入 build 目录，并通过 `nmake` 命令构建工程。
            6. 执行 `cd ..` 命令回到上级目录，并通过 `windeployqt .\bin\release\ZegoExpressExample.exe` 部署 Qt App。

        * macOS

            1. 打开终端，并执行 `cd /path/to/this/folder` 命令进到此文件所在的目录。
            2. 执行 `qmake ZegoExpressExample/ZegoExpressExample.pro CONFIG+=x86_64 -o ./build/Makefile` 命令通过 qmake 生成 Makefile。
            3. 执行 `cd build` 命令进入 build 目录，并通过 `make` 命令构建工程。
            4. 执行 `cd ..` 命令回到上级目录，并通过 `macdeployqt ./bin/release/ZegoExpressExample.app` 命令部署 Qt App。

### 5 体验实时音视频功能

在真机中运行项目，运行成功后，可以看到本端视频画面。

为方便体验，ZEGO 提供了一个 [Web 端调试示例 ](https://zegodev.github.io/zego-express-webrtc-sample/assistDev/index.html)，在该页面下，输入相同的 AppID、RoomID，输入不同的 UserID、以及对应的 [Token](#16309)，即可加入同一房间与真机设备互通。当成功开始音视频通话时，可以听到远端的音频，看到远端的视频画面。
