# 原始音频数据获取

- - -

## 1 功能简介

SDK 为开发者提供了获取原始音频录制的功能，获取的原始音频数据格式为 PCM。


## 2 前提条件

在获取原始音频数据之前，请确保：

@@@Express_Audio_Prerequisites@@@


## 3 使用步骤

### 3.1 初始化 SDK

请参考 [快速开始 - 实现流程\|_blank](7628#3_1) 的 “3.1 创建引擎”。

### 3.2 启用原始音频数据功能


```objc
// 需要的音频数据类型 Bitmask，此处示例三个回调都开启
ZegoAudioDataCallbackBitMask bitmask = ZegoAudioDataCallbackBitMaskCaptured | ZegoAudioDataCallbackBitMaskPlayback | ZegoAudioDataCallbackBitMaskMixed;

// 需要的音频数据参数，此处示例单声道、16K
ZegoAudioFrameParam *param = [[ZegoAudioFrameParam alloc] init];
param.channel = ZegoAudioChannelMono;
param.sampleRate = ZegoAudioSampleRate16K;

// 开启获取原始音频数据功能
[[ZegoExpressEngine sharedEngine] startAudioDataObserver:bitmask param:param];
```

<div class="mk-hint">

如有需要可参考 [最佳实践 - 位掩码的使用\|_blank](#8660)。
</div>

### 3.3 设置回调获取原始音频数据并处理


```objc
// 设置音频数据回调
[[ZegoExpressEngine sharedEngine] setAudioDataHandler:self];
```

```objc
// 根据需要实现以下三个回调，分别对应上述 Bitmask 的三个选项

- (void)onCapturedAudioData:(const unsigned char *)data dataLength:(unsigned int)dataLength param:(ZegoAudioFrameParam *)param {
    // 本地采集音频数据，推流后可收到回调
}

- (void)onPlaybackAudioData:(const unsigned char *)data dataLength:(unsigned int)dataLength param:(ZegoAudioFrameParam *)param {
    // 远端拉流音频数据，开始拉流后可收到回调
}

- (void)onMixedAudioData:(const unsigned char *)data dataLength:(unsigned int)dataLength param:(ZegoAudioFrameParam *)param {
    // 本地采集与远端拉流声音混合后的音频数据回调
}
```

## 4 API 参考列表

| 方法 | 描述 |
|-------|--------|
| [enableAudioDataCallback \|_blank](/zh/api?doc=express_video_sdk_API~ObjectiveC_ios~class~zego-express-engine#enable-audio-data-callback-callback-bit-mask-param) | 开启获取原始音频数据功能 |
| [setAudioDataHandler \|_blank](/zh/api?doc=express_video_sdk_API~ObjectiveC_ios~class~zego-express-engine#set-audio-data-handler) | 设置原始音频数据回调 |
