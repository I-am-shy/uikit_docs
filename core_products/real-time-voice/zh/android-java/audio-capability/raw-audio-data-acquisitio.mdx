---
articleID: 5079
---
# 原始音频数据获取

- - -

## 1 功能简介

SDK 为开发者提供了获取原始音频录制的功能，获取的原始音频数据格式为 PCM。

## 2 前提条件

在获取原始音频数据之前，请确保：

@@@Express_Audio_Prerequisites@@@


## 3 使用步骤

### 3.1 初始化 SDK

请参考 [快速开始 - 实现流程](7627#3_1) 的 “3.1 创建引擎”。

### 3.2 启用原始音频数据功能

```java
// 开启获取原始音频数据功能
ZegoAudioFrameParam param=new ZegoAudioFrameParam();
param.channel = ZegoAudioChannel.STEREO;
param.sampleRate = ZegoAudioSampleRate.ZEGO_AUDIO_SAMPLE_RATE_8K;
int bitmask = 0;
// 添加bitmask，开启采集到音频数据到回调开关。
// 采集，拉流，混合对应的位掩码值分别是：CAPTURED=1，PLAYBACK=2, MIXED=4，bitmask最终得到的值为7，表示会同时触发采集、拉流、混合的原始数据回调。
bitmask |= ZegoAudioDataCallbackBitMask.CAPTURED.value();
bitmask |= ZegoAudioDataCallbackBitMask.MIXED.value();
bitmask |= ZegoAudioDataCallbackBitMask.PLAYBACK.value();
engine.startAudioDataObserver(bitmask, param);
```

<div class="mk-hint">

如有需要可参考 [最佳实践 - 位掩码的使用](#8661)。
</div>

### 3.3 设置回调接收原始音频数据并处理

```java
// 设置原始音频数据回调
engine.setAudioDataHandler(new IZegoAudioDataHandler() {
	@Override
	public void onCapturedAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param) {
	/** 本地采集音频数据，推流后可收到回调 */
	}

	@Override
	public void onPlaybackAudioData (ByteBuffer data, int dataLength, ZegoAudioFrameParam param) {
	/** 远端拉流音频数据，开始拉流后可收到回调 */
	}

	@Override
	public void onMixedAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param) {
	/** 本地采集与远端拉流声音混合后的音频数据回调 */
	}
});
```

## 4 API 参考列表

| 方法 | 描述 |
|-------|--------|
| [enableAudioDataCallback ](/zh/api?doc=express_video_sdk_API~Java_android~class~im-zego-zegoexpress-zego-express-engine#enable-audio-data-callback) | 开启获取原始音频数据功能 |
| [setAudioDataHandler ](/zh/api?doc=express_video_sdk_API~Java_android~class~im-zego-zegoexpress-zego-express-engine#set-audio-data-handler) | 设置原始音频数据回调 |
