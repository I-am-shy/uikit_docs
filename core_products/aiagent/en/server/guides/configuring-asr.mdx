# Configuring ASR

---

## Function Introduction

To improve the recognition accuracy of speech recognition (or speech-to-text) in different scenarios, the following methods can be used:
- Select the appropriate vendor/recognition model: Support Tencent ASR, Aliyun Paraformer, Aliyun Gummy, Microsoft, etc.
- Select the appropriate language: The default Tencent and Aliyun Paraformer models are for Chinese recognition, and Microsoft is for English recognition.
- Set recognition hot words: In certain scenarios, there are usually some specialized words, such as character names, user IDs, function names, etc., which can be set as temporary hot words when creating an agent instance to improve the accuracy of speech recognition.

## Prerequisites

Currently, Tencent is the default vendor that is supported and opened. If you need Aliyun, Microsoft, etc., please contact ZEGOCLOUD business to open.

## Usage Method

Currently, ASR related parameters can be set through 4 interfaces:
| Interface | Description |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Register Agent](/aiagent-server/api-reference/agent-configuration-management/register-agent)                                                                                                                                   | Set vendor, hot words, language, etc. parameters.                                                                                                                                                                                        |
| [Create Agent Instance](/aiagent-server/api-reference/agent-instance-management/create-agent-instance)<br/>[Create Digital Human Agent Instance](/aiagent-server/api-reference/agent-instance-management/create-digital-human-agent-instance) | Set vendor, hot words, language, etc. parameters. <br/><Note title="Note">If not set, the ASR parameters carried by the registered Agent ( [RegisterAgent](/aiagent-server/api-reference/agent-configuration-management/register-agent) ) will be used by default.</Note> |
| [Update Agent Instance](/aiagent-server/api-reference/agent-instance-management/update-agent-instance)                                                                                                                             | <Warning title="Note">Supports modifying hot words and languages. Other parameters please contact technical support for confirmation.</Warning>                                                                                                                                                                |

## ASR Parameters <a id="asr-params" />

| Parameters                   | Type   | Required | Description                                                                                                                                                                                                                                  |
| ---------------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Vendor                 | String | No       | ASR vendor, default is Tencent：<ul><li>Tencent: Tencent</li><li>AliyunParaformer: Aliyun Paraformer</li><li>AliyunGummy: Aliyun Gummy</li><li>Microsoft: Microsoft ASR</li></ul>                                                                 |
| ~HotWord~              | String | No       | This parameter has been deprecated. <br/>Please set it through the Params extended parameters, please refer to the hot word setting instructions for each vendor below.                                                                                                                                             |
| Params                 | Object | No       | Vendor parameters, please refer to the parameter setting instructions for each vendor below.                                                                                                                                                                                  |
| VADSilenceSegmentation | number | No       | Set the number of milliseconds after which two sentences are no longer considered as one. Range [200, 2000], default is 500. Please refer to [Speech Segmentation Control](/aiagent-server/advanced/speech-segmentation-control) for details.                                                              |
| PauseInterval          | number | No       | Set the number of milliseconds within which two sentences are considered as one, i.e., ASR multi-sentence concatenation. Range [200, 2000]. Only when this value is greater than VADSilenceSegmentation, ASR multi-sentence concatenation will be enabled. Please refer to [Speech Segmentation Control](/aiagent-server/advanced/speech-segmentation-control) for details. |

The Params parameters for each vendor are as follows:

<Tabs titleSize="h3">
<Tab title="Tencent">

Tencent Cloud detailed parameter description please refer to: [Tencent Cloud-Real-Time Speech Recognition](https://cloud.tencent.com/document/product/1093/48982) > Interface Call Process > Handshake Stage > Parameter Description.

#### Set Hot Words

Only temporary hot word tables are supported to set parameters. Please refer to [Tencent Cloud-Real-Time Speech Recognition](https://cloud.tencent.com/document/product/1093/48982#835304ab-3b0b-487e-9daa-08f7086b4fdf) `hotword_list` parameter detailed description.

Single hot word limit: "hotword|weight", single hot word does not exceed 30 characters (up to 10 characters), weight [1-11], such as "ZEGOCLOUD|5" or "ASR|11";
Temporary hot word table limit: multiple hot words are separated by English commas, up to 128 hot words, such as "ZEGOCLOUD|10, real-time interaction|5,ASR|11";

Note:
1. When the hot word weight is set to 11, the current hot word will be upgraded to a super hot word, it is recommended to only set important and necessary hot words to 11, setting too many hot words with a weight of 11 will affect the overall character accuracy rate.
2. Hot words cannot contain spaces, such as `ZEGOCLOUD real-time interaction`.

#### Set Language

Please refer to [Tencent Cloud-Real-Time Speech Recognition](https://cloud.tencent.com/document/product/1093/48982#835304ab-3b0b-487e-9daa-08f7086b4fdf) `engine_model_type` (engine model type) parameter detailed description. The default value is `16k_zh`, Chinese general.
<Accordion title="Supported Engine Model Type Detailed List" defaultOpen="false">
- 16k_zh： Chinese General;
- 16k_zh-PY: Chinese-English-Cantonese;
- 16k_zh-TW: Chinese Traditional;
- 16k_zh_edu: Chinese Education;
- 16k_zh_medical: Chinese Medical;
- 16k_zh_court: Chinese Court;
- 16k_yue: Cantonese;
- 16k_en: English General;
- 16k_en_game: English Game;
- 16k_en_edu: English Education;
- 16k_zh_en: Chinese-English-Cantonese+7 Chinese Dialect Large Model Engine【Large Model Version】. The current model supports Chinese, English, Cantonese, Sichuan, Shaanxi, Henan, Shanghai, Hunan, Hubei and Anhui dialects, model parameter quantity is huge, language model performance enhancement, greatly improving the recognition accuracy of low-quality audio with large noise, echo, small human voice, and distant human voice.
- 16k_ko: Korean;
- 16k_ja: Japanese;
- 16k_th: Thai;
- 16k_id: Indonesian;
- 16k_vi: Vietnamese;
- 16k_ms: Malay;
- 16k_fil: Filipino;
- 16k_pt: Portuguese;
- 16k_tr: Turkish;
- 16k_ar: Arabic;
- 16k_es: Spanish;
- 16k_hi: Hindi;
- 16k_fr: French;
- 16k_de: German;
</Accordion>

#### Usage Example

Below is an example of setting "zego" as a hot word and the language as English.

<CodeGroup>
```json RegisterAgent
// !mark(7:8)
{
    "AgentId": "xiaozhi",
    "Name": "Xiao Zhi",
    "ASR": {
        "Vendor": "Tencent",
        "Params": {
            "engine_model_type": "16k_en",
            "hotword_list": "zego|10"
        }
    },
    "LLM": {
        "Url": "https://ark.cn-beijing.volces.com/api/v3/chat/completions",
        "ApiKey": "zego_test",
        "Model": "zego_test",
        "SystemPrompt": "You are Xiaozhi, an adult woman, a companion assistant **created by ZEGOClOUD**. knowledgeable in both astronomy and geography, intelligent, wise, enthusiastic, and friendly. \nDialogue requirements: 1. Dialogue with users according to the requirements of the persona. \n2.No more than 100 words."
    },
    "TTS": {
        "Vendor": "Bytedance",
        "Params": {
            "app": {
                "appid": "zego_test",
                "token": "zego_test",
                "cluster": "volcano_tts"
            },
            "audio": {
                "voice_type": "en_female_sarah_mars_bigtts"
            }
        }
    }
}
```

```json CreateAgentInstance
// !mark(13:14)
{
    "AgentId": "xiaozhi",
    "UserId": "user_1",
    "RtcInfo": {
        "RoomId": "room_1",
        "AgentStreamId": "agent_stream_1",
        "AgentUserId": "agent_user_1",
        "UserStreamId": "user_stream_1"
    },
    "ASR": {
        "Vendor": "Tencent",
        "Params": {
            "engine_model_type": "16k_en",
            "hotword_list": "zego|10"
        }
    }
}
```
</CodeGroup>

</Tab>
<Tab title="Aliyun Paraformer">

Detailed parameter description please refer to: [Aliyun Paraformer Real-Time Speech Recognition](https://help.aliyun.com/zh/model-studio/websocket-for-paraformer-real-time-service?spm=a2c4g.11186623.help-menu-2400256.d_2_6_3_0_2.57b22440ixCBox&scm=20140722.H_2856047._.OR_help-T_cn~zh-V_1#519eb48f0ewv8) > Command (Client → Server) > run-task Command: Start Task > payload parameter description.

#### Set Hot Words
<Warning title="Note">Currently, setting hot words for the Aliyun Paraformer model is not supported.</Warning>

#### Set Language

Set the language through the `payload.parameters.language_hints` parameter. If the language cannot be determined in advance, it can be set, and the model will automatically recognize the language. Please refer to the Paraformer parameter description for details.

<Accordion title="Supported Language Code List" defaultOpen="false">
- zh: Chinese
- en: English
- ja: Japanese
- yue: Cantonese
- ko: Korean
- de：German
- fr：French
- ru：Russian
</Accordion>

#### Usage Example

Below is an example of setting the language as English.

<CodeGroup>
```json RegisterAgent
// !mark(7:14)
{
    "AgentId": "xiaozhi",
    "Name": "Xiao Zhi",
    "ASR": {
        "Vendor": "AliyunParaformer",
        "Params": {
            "payload": {
                "model": "paraformer-realtime-v2",
                "parameters": {
                    "language_hints": [
                        "en"
                    ]
                }
            }
        }
    },
    "LLM": {
        "Url": "https://ark.cn-beijing.volces.com/api/v3/chat/completions",
        "ApiKey": "zego_test",
        "Model": "zego_test",
        "SystemPrompt": "You are Xiaozhi, an adult woman, a companion assistant **created by ZEGOClOUD**. knowledgeable in both astronomy and geography, intelligent, wise, enthusiastic, and friendly. \nDialogue requirements: 1. Dialogue with users according to the requirements of the persona. \n2.No more than 100 words."
    },
    "TTS": {
        "Vendor": "Bytedance",
        "Params": {
            "app": {
                "appid": "zego_test",
                "token": "zego_test",
                "cluster": "volcano_tts"
            },
            "audio": {
                "voice_type": "en_female_sarah_mars_bigtts"
            }
        }
    }
}
```

```json CreateAgentInstance
// !mark(13:20)
{
    "AgentId": "xiaozhi",
    "UserId": "user_1",
    "RtcInfo": {
        "RoomId": "room_1",
        "AgentStreamId": "agent_stream_1",
        "AgentUserId": "agent_user_1",
        "UserStreamId": "user_stream_1"
    },
    "ASR": {
        "Vendor": "AliyunParaformer",
        "Params": {
            "payload": {
                "model": "paraformer-realtime-v2",
                "parameters": {
                    "language_hints": [
                        "en"
                    ]
                }
            }
        }
    }
}
```
</CodeGroup>
</Tab>
<Tab title="Aliyun Gummy">
Detailed parameter description please refer to: [Aliyun Gummy Real-Time Speech Recognition](https://help.aliyun.com/zh/model-studio/real-time-websocket-api?spm=a2c4g.11186623.help-menu-2400256.d_2_6_4_0_2.20693613UcHYB7&scm=20140722.H_2869339._.OR_help-T_cn~zh-V_1#7409babe31tp1) > WebSocket Client Programming and Message Processing > Send Messages to the Server > payload parameter description.

#### Set Hot Words
<Warning title="Note">Currently, setting hot words for the Aliyun Gummy model is not supported.</Warning>

#### Set Language
Set the language through the `payload.parameters.source_language` parameter. If the language cannot be determined in advance, it can be set, and the model will automatically recognize the language. Please refer to the Gummy parameter description for details.

<Accordion title="Supported Language Code List" defaultOpen="false">
- zh: Chinese
- en: English
- ja: Japanese
- yue: Cantonese
- ko: Korean
- de: German
- fr: French
- ru: Russian
- it: Italian
- es: Spanish
</Accordion>

#### Usage Example

Below is an example of setting the language as English.

<CodeGroup>
```json RegisterAgent
// !mark(7:12)
{
    "AgentId": "xiaozhi",
    "Name": "Xiao Zhi",
    "ASR": {
        "Vendor": "AliyunGummy",
        "Params": {
            "payload": {
                "model": "gummy-realtime-v1",
                "parameters": {
                    "source_language": "en"
                }
            }
        }
    },
    "LLM": {
        "Url": "https://ark.cn-beijing.volces.com/api/v3/chat/completions",
        "ApiKey": "zego_test",
        "Model": "zego_test",
        "SystemPrompt": "You are Xiaozhi, an adult woman, a companion assistant **created by ZEGOClOUD**. knowledgeable in both astronomy and geography, intelligent, wise, enthusiastic, and friendly. \nDialogue requirements: 1. Dialogue with users according to the requirements of the persona. \n2.No more than 100 words."
    },
    "TTS": {
        "Vendor": "Bytedance",
        "Params": {
            "app": {
                "appid": "zego_test",
                "token": "zego_test",
                "cluster": "volcano_tts"
            },
            "audio": {
                "voice_type": "en_female_sarah_mars_bigtts"
            }
        }
    }
}
```

```json CreateAgentInstance
// !mark(13:18)
{
    "AgentId": "xiaozhi",
    "UserId": "user_1",
    "RtcInfo": {
        "RoomId": "room_1",
        "AgentStreamId": "agent_stream_1",
        "AgentUserId": "agent_user_1",
        "UserStreamId": "user_stream_1"
    },
    "ASR": {
        "Vendor": "AliyunGummy",
        "Params": {
            "payload": {
                "model": "gummy-realtime-v1",
                "parameters": {
                    "source_language": "en"
                }
            }
        }
    }
}
```
</CodeGroup>
</Tab>
<Tab title="Microsoft">

<Warning title="Note">Microsoft currently only supports setting the `phrase_list` and `language` parameters.</Warning>

#### Set Phrase List

A phrase list is a list of words or phrases that are pre-provided to help improve its recognition ability. Phrases added to the phrase list have a higher importance and are more likely to be recognized.
Can be set through the `phrase_list` parameter. Please refer to [Microsoft - Using Phrase Lists to Improve Recognition Accuracy](https://learn.microsoft.com/zh-cn/azure/ai-services/speech-service/improve-accuracy-phrase-list?tabs=terminal&pivots=programming-language-python) for details.

<Note title="Note">Allowed characters include letters and numbers specific to the locale, space characters, and special characters such as +, -, $, :, (, ), \{, \}, _, , ?, @, \, ’, &, #, %, ^, *, `, \<, \>, ;, /. Other special characters will be removed from the phrase list.</Note>

#### Set Language
Can be set through the `language` parameter. Please refer to [Microsoft - Language and Voice Support for Speech Services](https://learn.microsoft.com/zh-cn/azure/ai-services/speech-service/language-support?tabs=stt) for details.

#### Usage Example

Below is an example of setting "zego" and "microsoft" as a phrase list and the language as English.

<CodeGroup>
```json RegisterAgent
// !mark(7:10)
{
    "AgentId": "xiaozhi",
    "Name": "Xiao Zhi",
    "ASR": {
        "Vendor": "Microsoft",
        "Params": {
            "language": "en-US",
            "phrase_list": [
                "zego",
                "microsoft"
            ]
        }
    },
    "LLM": {
        "Url": "https://ark.cn-beijing.volces.com/api/v3/chat/completions",
        "ApiKey": "zego_test",
        "Model": "zego_test",
        "SystemPrompt": "You are Xiaozhi, an adult woman, a companion assistant **created by ZEGOClOUD**. knowledgeable in both astronomy and geography, intelligent, wise, enthusiastic, and friendly. \nDialogue requirements: 1. Dialogue with users according to the requirements of the persona. \n2.No more than 100 words."
    },
    "TTS": {
        "Vendor": "Bytedance",
        "Params": {
            "app": {
                "appid": "zego_test",
                "token": "zego_test",
                "cluster": "volcano_tts"
            },
            "audio": {
                "voice_type": "en_female_sarah_mars_bigtts"
            }
        }
    }
}
```

```json CreateAgentInstance
// !mark(13:16)
{
    "AgentId": "xiaozhi",
    "UserId": "user_1",
    "RtcInfo": {
        "RoomId": "room_1",
        "AgentStreamId": "agent_stream_1",
        "AgentUserId": "agent_user_1",
        "UserStreamId": "user_stream_1"
    },
    "ASR": {
        "Vendor": "Microsoft",
        "Params": {
            "language": "en-US",
            "phrase_list": [
                "zego",
                "microsoft"
            ]
        }
    }
}
```
</CodeGroup>
</Tab>
</Tabs>

