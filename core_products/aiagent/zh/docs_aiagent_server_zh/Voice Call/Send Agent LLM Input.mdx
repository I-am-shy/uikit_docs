# 主动调用 LLM
---

##  描述

本接口可用于以用户身份主动调用 LLM 服务，并基于 LLM 的响应内容，以智能体身份主动调用 TTS 服务，向用户发送语音消息。
- 当调用此接口时，若会话中的智能体正在说话，则该智能体的说话进程会被打断；
- 调用本接口生成的信息会被记录在会话消息历史之中，并作为上下文输入给 LLM。

<Note title="说明">
调用本接口之前，请确保已 [创建会话](./../Conversation/Create%20Conversation.mdx) 和 [发起语音会话](./Start%20Rtc%20Chat.mdx)。
</Note>

## 接口原型

- 请求方法：POST
- 请求地址：`https://aigc-chat-api.zegotech.cn?Action=SendAgentLLMInput`
- 传输协议：HTTPS
- 调用频率限制：10 次/秒
## 请求参数

| 参数 | 类型 | 是否必选 | 描述 |
|------|------|---------|------|
| UserId           | String | 是    | 用户 ID。仅支持数字、英文字符、'-'、'_'。长度上限为 32 字节。                              |
| ConversationId   | String | 是    | 会话的唯一标识。仅支持数字、英文字符、'-'、'_'。长度上限为 128 字节。在同一 AppID 下全局唯一。           |
| AgentId | String | 是 | 智能体 ID。用于登录 IM 或 RTC 服务。仅支持 数字、英文字符、'-'、'_'、'@'。长度上限为 32 字节。                              |
| Text | String | 是 | 发送给 LLM 的文本内容，最大不超过 300 个字符。 |
| System | String | 否 | 智能体系统提示（prompt）。<ul><li>为空：沿用本轮对话的 `System`。</li><li>不为空：临时修改本次对话的 `System`。</li></ul> |

## 请求示例

- 请求地址 URL：

```https
https://aigc-chat-api.zegotech.cn?Action=SendAgentLLMInput
&<公共请求参数>
```

- 请求消息体：

```json
{
    "UserId": "test_user_001",
    "ConversationId": "test_conversation_001",
    "AgentId": "@RBT#test_agent_001",
    "Text": "你好，请介绍一下你自己",
    "System": "你是一个专业的AI助手，擅长自我介绍"
}
```

## 响应参数

| 参数 | 类型 | 描述 |
|------|------|------|
| Code | Int | 返回码。0 表示成功，其他值表示失败。如需了解错误码及响应处理建议，请参考 [返回码](./../Return%20codes.mdx)。 |
| Message | String | 请求结果的说明信息。 |
| RequestId | String | 请求 ID。 |
## 响应示例

```json
{
    "Code": 0,
    "Message": "Succeed",
    "RequestId": "1843985617336143872",
    "Data": null
}
```

