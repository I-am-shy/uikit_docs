# API

## ZegoAIAgent

ZEGO AI Agent SDK的主类，采用单例模式设计，提供AI Agent的核心功能。

### getInstance

获取ZegoAIAgent的单例实例。

<CodeGroup>
```typescript title="函数原型"
public static getInstance(): ZegoAIAgent
```

```typescript title="示例代码"
const aiAgent = ZegoAIAgent.getInstance();
```
</CodeGroup>

### getVersion

获取SDK版本号。

<CodeGroup>
```typescript title="函数原型"
public static getVersion(): string
```

```typescript title="示例代码"
const version = ZegoAIAgent.getVersion();
console.log('SDK版本号:', version);
```
</CodeGroup>

### initSDK

初始化SDK，设置认证信息和用户配置。

参数说明：
- authData: 认证数据对象
  - appID: 应用ID
  - token: 认证token
  - server: 服务器地址
- profile: 用户配置对象
  - userID: 用户ID
  - userName: 用户名称

<CodeGroup>
```typescript title="函数原型"
public async initSDK(authData: AuthData, profile: UserProfile): Promise<AIAgentResult>
```

```typescript title="示例代码"
const authData = {
  appID: 12345678,
  token: 'your_token_here',
  server: 'server_url'
};

const userProfile = {
  userID: 'user123',
  userName: 'TestUser'
};

const result = await aiAgent.initSDK(authData, userProfile);
if (result.code === 0) {
  console.log('SDK初始化成功');
} else {
  console.error('SDK初始化失败:', result.message);
}
```
</CodeGroup>

### queryConversationList

查询会话列表，支持分页查询。

参数说明：
- config: 查询配置选项（可选）
  - conversationID: 会话ID，用于查询指定会话
  - pageNum: 页码，从1开始
  - pageSize: 每页数量

<CodeGroup>
```typescript title="函数原型"
public async queryConversationList(config?: QueryConversationListConfig): Promise<AIAgentConversationList>
```

```typescript title="示例代码"
const config = {
  pageNum: 1,
  pageSize: 10
};

const result = await aiAgent.queryConversationList(config);
if (result.code === 0) {
  console.log('会话列表:', result.conversationList);
}
```
</CodeGroup>

### createConversation

创建新的会话。

参数说明：
- customAgentConfig: 自定义AI智能体配置
  - AgentTemplateId: AI助手的模板ID
  - Name: AI助手的名称
  - Avatar: AI助手的头像URL
  - Intro: AI助手的简介
  - System: AI助手的系统提示词
  - LLM: 大语言模型配置（可选）
  - TTS: 语音合成配置（可选）
  - ASR: 语音识别配置（可选）
  - MetaHumanConfig: 数字人配置（可选）
- chatConfig: 聊天配置（可选）

<CodeGroup>
```typescript title="函数原型"
public async createConversation(customAgentConfig: CustomAgentConfig, chatConfig?: ChatConfig): Promise<AIAgentCreateResult>
```

```typescript title="示例代码"
const customAgentConfig = {
  AgentTemplateId: 'template_001',
  Name: 'AI助手',
  Avatar: 'avatar_url',
  Intro: '我是一个AI助手',
  System: '系统提示词'
};

const result = await aiAgent.createConversation(customAgentConfig);
if (result.code === 0) {
  console.log('会话创建成功:', result.conversation);
}
```
</CodeGroup>

### updateConversation

更新会话配置。

参数说明：
- conversationID: 会话ID
- config: 更新配置
  - agentTemplateID: 新的模板ID
  - customAgentConfig: 自定义AI智能体配置
  - chatConfig: 聊天配置

<CodeGroup>
```typescript title="函数原型"
public async updateConversation(conversationID: string, config: UpdateConversationConfig): Promise<AIAgentResult>
```

```typescript title="示例代码"
const config = {
  agentTemplateID: 'new_template_001',
  customAgentConfig: {
    Name: '新AI助手名称'
  }
};

const result = await aiAgent.updateConversation('conversation_id', config);
if (result.code === 0) {
  console.log('会话更新成功');
}
```
</CodeGroup>

### resetConversationMsg

重置会话消息，清空会话历史。

参数说明：
- conversationID: 会话ID

<CodeGroup>
```typescript title="函数原型"
public async resetConversationMsg(conversationID: string): Promise<AIAgentResult>
```

```typescript title="示例代码"
const result = await aiAgent.resetConversationMsg('conversation_id');
if (result.code === 0) {
  console.log('会话消息重置成功');
}
```
</CodeGroup>

### deleteConversation

删除指定会话。

参数说明：
- conversationID: 会话ID

<CodeGroup>
```typescript title="函数原型"
public async deleteConversation(conversationID: string): Promise<AIAgentResult>
```

```typescript title="示例代码"
const result = await aiAgent.deleteConversation('conversation_id');
if (result.code === 0) {
  console.log('会话删除成功');
}
```
</CodeGroup>

### getConversation

获取指定会话的信息。

参数说明：
- conversationID: 会话ID

<CodeGroup>
```typescript title="函数原型"
public getConversation(conversationID: string): Conversation | null
```

```typescript title="示例代码"
const conversation = aiAgent.getConversation('conversation_id');
if (conversation) {
  console.log('会话信息:', conversation);
} else {
  console.log('会话不存在');
}
```
</CodeGroup>

### startChat

开始聊天会话。

参数说明：
- options: 开始聊天的配置选项
  - conversationID: 会话ID
  - roomID: 房间ID
  - userStreamID: 用户流ID
  - agentStreamID: 智能体流ID
  - metaHumanStreamID: 数字人流ID
  - chatMode: 聊天模式

<CodeGroup>
```typescript title="函数原型"
public async startChat(options: {
  conversationID: string;
  roomID: string;
  userStreamID: string;
  agentStreamID: string;
  metaHumanStreamID: string;
  chatMode: ChatMode;
}): Promise<AIAgentResult>
```

```typescript title="示例代码"
const options = {
  conversationID: 'conversation_id',
  roomID: 'room_001',
  userStreamID: 'user_stream_001',
  agentStreamID: 'agent_stream_001',
  metaHumanStreamID: 'metahuman_stream_001',
  chatMode: ChatMode.Normal
};

const result = await aiAgent.startChat(options);
if (result.code === 0) {
  console.log('聊天开始成功');
}
```
</CodeGroup>

### stopChat

停止聊天会话。

参数说明：
- conversationID: 会话ID

<CodeGroup>
```typescript title="函数原型"
public async stopChat(conversationID: string): Promise<AIAgentResult>
```

```typescript title="示例代码"
const result = await aiAgent.stopChat('conversation_id');
if (result.code === 0) {
  console.log('聊天停止成功');
}
```
</CodeGroup>

### renewToken

更新认证token。当监听到RTC SDK的tokenWillExpire事件时，可调用此接口更新token。

参数说明：
- token: 新的认证token

<CodeGroup>
```typescript title="函数原型"
public renewToken(token: string): void
```

```typescript title="示例代码"
aiAgent.renewToken('new_token_here');
console.log('Token更新完成');
```
</CodeGroup>
