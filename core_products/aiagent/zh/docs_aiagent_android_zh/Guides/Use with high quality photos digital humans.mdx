# 和精品照片数字人搭配使用

---

精品照片数字人是 AI Agent SDK 的一项高级功能，它能让您的 AI 助手拥有逼真的数字人形象，提供更加自然和沉浸式的交互体验。本文将指导您如何在 AI Agent SDK 中使用精品照片数字人功能。

## 前提条件

在开始使用精品照片数字人功能之前，请确保：

1. 已完成 AI Agent SDK 的初始化，包括配置认证信息和用户信息。
2. 已创建基础会话，了解基本的会话管理流程。
3. 已在控制台开通精品照片数字人相关服务。

## 功能特点

- 高品质视觉效果：基于精品照片的数字人形象，提供逼真的面部表情和动作。
- 灵活的布局控制：支持自定义数字人显示位置、大小和图层。（待定）
- 丰富的语音配置：可调节音调、语速和音量，实现个性化的语音表现。（待定）
- 视频输出控制：支持设置视频分辨率和格式。（待定）

## 使用步骤

### 1. 创建数字人会话

```typescript
// AI Agent SDK

// 开始数字人聊天
const metaHumanOptions = {
    conversationID: 'conversation_id',      // 会话ID，需要与创建会话时的ID一致
    roomID: 'room_id',                     // 房间ID，用于音视频通信
    userStreamID: 'user_stream_id',        // 用户流ID
    agentStreamID: 'agent_stream_id',      // 智能体流ID
    chatMode: ChatMode.MetaHuman,          // 聊天模式：数字人
    metaHumanStreamID: 'meta_human_stream_id', // 数字人流ID
    metaHumanConfig: {
        metaHuman: {
            metaHumanId: 'meta_human_id',   // 数字人ID，从控制台获取
            layout: {
                top: 0,                     // 距顶部位置（像素）
                left: 0,                    // 距左侧位置（像素）
                width: 1280,                // 宽度（像素）
                height: 720,                // 高度（像素）
                layer: 0                    // 图层层级
            }
        },
        backgroundColor: '#000000',   
        videoOption: {
            width: 1280,                   // 视频宽度
            height: 720,                   // 视频高度
            format: 'mp4'                  // 视频格式
        }
    }
};

try {
    const startResult = await aiAgent.startChat(metaHumanOptions);
    if (startResult.code === 0) {
        console.log('数字人聊天开始成功');
        // 在这里可以进行后续的交互操作
    }
} catch (error) {
    console.error('开始数字人聊天失败:', error);
    // 处理错误情况
}
```

### 2. 结束数字人会话

当需要结束数字人会话时，调用 `stopChat` 方法：

```typescript
try {
    const stopResult = await aiAgent.stopChat('conversation_id');
    if (stopResult.code === 0) {
        console.log('数字人聊天结束成功');
    }
} catch (error) {
    console.error('结束数字人聊天失败:', error);
}
```

## 注意事项

1. 确保在调用 `startChat` 之前已经完成 SDK 初始化和会话创建。
2. 数字人相关的配置参数（如 metaHumanId等）需要从[数字人PaaS 服务](https://doc-zh.zego.im/article/18584)获取。
3. 视频分辨率设置需要考虑实际的显示区域和性能需求。(如果这些参数需要用户传，是否需要根据不同场景设置推荐？才能达到最佳体验)
4. 音频参数调节要在合理范围内，避免影响用户体验。（待定）