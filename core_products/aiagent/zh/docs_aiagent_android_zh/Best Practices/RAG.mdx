# 和 RAG 搭配使用

---

## 前提条件
- 联系 ZEGO 技术支持配置自定义 LLM System 回调地址。

## 实现流程
### 步骤1：启用 ASR 文本回调
在[创建会话](./../Server%20API/Conversation/Create%20Conversation.mdx)时设置 ChatConfig 下的 LLMSystemMode 为非 0 值。
- LLMSystemMode 设置为 1 时，AI Agent 会使用会话默认 System 调用一次 LLM，待开发者返回本轮对话的自定义 System 后，AI Agent 会使用自定义 System 再次调用 LLM。
- LLMSystemMode 设置为 2 时，AI Agent 会等待开发者返回本轮对话的自定义 System 后，再调用 LLM。如果未收到返回，则使用会话默认 System 调用 LLM。

### 步骤2：响应自定义 System 回调
开发者在收到[自定义 System](./../Server%20API/Callbacks/Custom%20LLM%20System%20Callback.mdx) 回调后，需要使用 ASR 文本内容执行 RAG 流程，并返回本轮对话的 System 给到 AI Agent。
