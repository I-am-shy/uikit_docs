# 克隆音色并应用在AI语音对话中

---

<Note title="说明">

在与AI的实时语音互动对话时，将AI智能体的音色切换为期望的音色，例如用户的声音等。只需录制秒级别目标音色数据，即可即时完成对用户音色、说话风格、口音和声学环境音的复刻。
音色克隆属于增值能力，计费方式请参考：[定价&典型场景费用预估](../Introduction/Pricing.mdx)

> 目前支持火山引擎、MiniMax、阿里等多家厂商的声音复刻及语音合成能力。

</Note>

## 前提条件
- 已经参考[快速开始](../Quick%20start/Based%20on%20%20SDK.mdx)接入AI 实时语音互动方案。
- 请联系技术支持开通TTS（文字转语音/语音合成）服务（需要选定所需厂商），并获取相关子账号或APIKey等信息。

## 实现流程
### 步骤1：音色克隆操作

**minimax**

1. 使用[前提条件](#前提条件)中获取到的子帐号，登录minimax控制台（选择子帐号登录），并获取api_key

<Frame width="auto" height="auto">
  <img src="https://media-resource.spreading.io/docuo/workspace740/af061ebc6eaf0f12ae9e7f72235bd04e/1d02312c2c.PNG" alt="1280X1280 (1).PNG"/>
</Frame>

<Frame width="auto" height="auto">
  <img src="https://media-resource.spreading.io/docuo/workspace740/af061ebc6eaf0f12ae9e7f72235bd04e/a57770ff04.PNG" alt="1280X1280 (2).PNG"/>
</Frame>
2. 参考[MiniMax文档中心-快速复刻（Voice Cloning）](https://platform.minimaxi.com/document/Voice%20Cloning?key=66719032a427f0c8a570165b#GuPbbFheke90twNM9xfS1Akp)完成音色克隆：
3. 克隆完成后，请保管好voice_id

**火山引擎**
1. 使用 [前提条件](#前提条件) 中获取到的api_key
2. 参考[声音复刻API-2.0](https://www.volcengine.com/docs/6561/1305191)，进行音色克隆。
3. 复刻完成后，请保管好speaker_id、声音复刻的集群

### 步骤2:在语音对话中使用克隆的音色

在创建会话 [CreateConversation](../Server%20API/Conversation/Create%20Conversation.mdx) 请求，TTS结构体中填写对应的Voice字段，设置音色信息：
- MiniMax：填写voice_id
- 火山引擎：填写speaker_id
  同时注意ExtensionParams（第三方 TTS 扩展参数）的设置。


``` json
// Minimax普通流式API
{
    "Type": "Minimax",
    "Voice": "voice_id"
}

// 火山双向流式API
{
    "ExtensionParams": {
        "ApiType": "bidirection", // 使用双向流式的API
        "ResourceId": "volc.megatts.default" // 根据开通的声音复刻2.0的套餐版本选择 1. volc.megatts.default（小时版）2. volc.megatts.concurr（并发版）
    },
    "Type": "Huoshan",
    "Voice": "speaker_id"
}

// 火山普通流式API
{
    "ExtensionParams": {
        "ApiType": "stream", // 使用普通流式的API
        "Cluster": "volcano_icl", // 声音复刻的集群，控制台可以查看
    },
    "Type": "Huoshan",
    "Voice": "speaker_id"
}
```

相关接口文档：[服务端API文档](../Server%20API/Overview.mdx)