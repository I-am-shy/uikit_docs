# 通用参数说明

---

## CustomAgentConfig

| 参数            | 类型   | 是否必选 | 描述                                                                                                 |
| --------------- | ------ | -------- | ---------------------------------------------------------------------------------------------------- |
| AgentTemplateId | String | 否       | 智能体模版 id。<ul><li>创建或更新会话时无需传入。</li><li>创建或更新模版时必填。</li></ul>           |
| Name            | String | 否       | 智能体模版名称，长度不超过 64 字节。                                                                 |
| Avatar          | String | 否       | 智能体头像 url。长度不超过 500 字节。                                                                |
| Intro           | String | 否       | 智能体简介。                                                                                         |
| System          | String | 否       | 智能体系统提示（prompt）。                                                                           |
| LLM             | Object | 否       | 大模型参数。本参数结构，请见[LLM](#llm)。                                                            |
| TTS             | Object | 否       | TTS参数。本参数结构，请见[TTS](#tts)。                                                               |
| Source          | String | 否       | 模版来源，查询模版列表时返回：<ul><li>"Zego": 表示模版由即构提供。</li><li>"Customer": 表示模版由客户提供。</li></ul> |
| Sex             | String | 否       | 智能体的性别。仅作存储用途，不会产生任何影响。                                                       |
| WelcomeMessage  | String | 否       | 智能体的欢迎语。如果不填，按照"你好，我是某某某"的格式下发。                                         |

## LLM

| 参数                 | 类型              | 是否必选 | 描述                                                                                     |
|----------------------|-------------------|----------|------------------------------------------------------------------------------------------|
| Type                 | String            | 是        | 大语言模型类型。可选：<ul><li>`WenXin`：文心一言。</li><li>`Doubao`：豆包。</li><li>`Minimax`：MiniMax。</li><li>`StepFun`：阶跃星辰。</li><li>`Qwen`：通义千问。</li></ul> |
| Model                | String            | 是        | 模型名称。不同 LLM 支持的模型不同，具体请参考对应云商的官网文档。                                           |
| IgnoreBracketText    | Array of Number  | 否        | 移除 LLM 返回结果中不需要的内容。支持取值及含义如下：<ul><li>1：emoji 表情。</li></ul>                      |
| ResponseFormatType   | Number               | 否        | 大模型返回内容格式。<ul><li>0：常规文本（默认）。</li><li>1：JSON。</li></ul>                                        |
| ResponseMessageName  | String            | 否        | 大模型返回 JSON 时，TTS 读取内容的字段名，当 ResponseFormatType 值为 1 时才有效。                          |
| ExtensionLLMParams   | String            | 否        | JSON 字符串。填写大语言模型支持字段，例如temperature、top_p等<br/>\{\"temperature\":0.2,\"top_p\":0.7\} |

## TTS

| 参数                   | 类型              | 是否必选 | 描述                                                                                                                                   |
|------------------------|-------------------|----------|--------------------------------------------------------------------------------------------------------------------------------------|
| Type                   | String            | 是        | 语音合成类型。可选：<ul><li>`Aliyun`：阿里云 TTS。</li><li>`Huoshan`：火山云 TTS。</li><li>`Minimax`：MiniMax。</li></ul>                                                                                   |
| Voice                  | String            | 是        | 音色，不同 TTS 支持的音色不同。具体请参考对应云商的官网文档。             |
| ExtensionParams        | Object            | 否        | 第三方 TTS 扩展参数。本参数结构，请见 [ExtensionParams](#extensionparams)。                       |
| IgnoreBracketText      | Array of Number  | 否        | 将大模型返回内容中指定标点符号中的文字过滤后，再进行语音合成。你需要在大模型 prompt 中自行定义哪些内容放在指定标点符号内。支持取值及含义如下：<ul><li>1：中文括号（）</li><li>2：英文括号()</li><li>3：中文方括号【】</li><li>4：英文方括号[]</li><li>5：英文花括号{}</li><li>默认值：1、2，表示对（）、()、过滤</li><li>空数组：不过滤</li></ul><br/> |
| IgnoreCustomBracketText| Array of String   | 否        | 将大模型返回内容中两个相同内容之间的文字过滤后，再进行语音合成。数组大小限制最大5个。示例：<ul><li>配置：["###"]</li><li>效果：<br/>###<br/>被忽略的内容<br/>###</li></ul>                                   |
| SilenceDuration        | Number   | 否  | 在基于 ZEGO 断句进行 TTS 时，断句停顿额外增加对应的耗时。默认为 0，单位为毫秒。取值范围 [0, 5000]。               |
| ExtensionTTSParams     | String            | 否        | 第三方 TTS 请求参数，一般为第三方请求体。可以用于填写大语言模型支持字段，例如 temperature、top_p 等。格式为：转义之后的 JSON 字符串。<br/>比如：\{\"model\":\"model_name\",\"text\":\"text_content\",\"temperature\":0.1,\"top_p\":1.0\}<br/>目前支持第三方的参数：<ul><li>MiniMax 大模型 TTS。</li><li>火山引擎 TTS（大模型语音合成API)。</li><li>火山引擎 TTS（双向流式 API）。</li></ul>本参数结构，请见 [ExtensionTTSParams（各第三方 TTS 扩展透传参数说明）](#extensionttsparams各第三方-tts-扩展透传参数说明)。  |

## ExtensionTTSParams（各第三方 TTS 扩展透传参数说明）

<Warning title="注意">
使用 ExtensionTTSParams 时，需要将以下 JSON 格式内容转义为字符串（\" key/value \"）。
</Warning>

<Tabs title="TTS厂商">
<Tab title="MiniMax TTS">

MiniMax TTS 的 JSON 格式说明请参考 MiniMax 官方文档 [T2A v2（语音生成）](https://platform.minimaxi.com/document/T2A%20V2?key=66719005a427f0c8a5701643)（请参考其中开启“流式”的请求体）。

当前可以支持的内容:
- speed
- vol
- pitch
- emotion

示例如下：
```json {17-20}
{
    "model" : "speech-01",
    "text": "",
    "stream": True,
    "timber_weights": [
        {
          "voice_id": "male-qn-qingse",
          "weight": 1
        },
        {
          "voice_id": "female-shaonv",
          "weight": 1
        }
    ],
    "voice_setting":{
        "voice_id": "",
        "speed": 1,
        "vol": 1,
        "pitch": 0,
        "emotion": "happy"
    },
    "audio_setting":{
        "sample_rate": 32000,
        "bitrate": 128000,
        "format": "mp3"
    }
}
```
</Tab>
<Tab title="火山引擎 TTS（大模型语音合成API)(默认)">

火山引擎 TTS（大模型）单向(默认)的 JSON 格式说明请参考火山引擎官方文档 [大模型语音合成API](https://www.volcengine.com/docs/6561/1257584)。

当前可以支持的内容:
- cluster
- speed_ratio

示例如下：
```json {5,13}
{
    "app": {
        "appid": "appid123",
        "token": "access_token",
        "cluster": "volcano_tts",
    },
    "user": {
        "uid": "uid123"
    },
    "audio": {
        "voice_type": "zh_male_M392_conversation_wvae_bigtts",
        "encoding": "pcm",
        "speed_ratio": 1.0,
    },
    "request": {
        "reqid": "uuid",
        "text": "字节跳动语音合成",
        "operation": "query",
    }
}
```
</Tab>
<Tab title="火山引擎 TTS（双向流式 API）">

火山引擎 TTS（双向流式 API）的 JSON 格式说明请参考火山引擎官方文档 [双向流式API](https://www.volcengine.com/docs/6561/1329505)。

当前可以支持的内容:
- pitch_rate
- speech_rate

```json {11,12}
{
    "user": {
        "uid": "12345"
    },
    "event": 100,
    "req_params": {
        "text": "明朝开国皇帝朱元璋也称这本书为,万物之根",
        "speaker": "zh_female_shuangkuaisisi_moon_bigtts",
        "audio_params": {
            "format": "mp3",
            "pitch_rate": 0,
            "speech_rate": 100,
            "sample_rate": 24000
        },
    }
}
```
</Tab>
</Tabs>

---

## ExtensionParams

| 参数                  | 类型   | 是否必选 | 描述                                                                                                                                   |
|----------------------|--------|----------|--------------------------------------------------------------------------------------------------------------------------------------|
| Cluster              | String | 否       | 集群 ID，仅适用于火山引擎。当您使用火山引擎 TTS 复刻音色以及其大模型语音合成 API 时需指定本参数为 `volcano_icl`（声音复刻集群）。<Warning title="注意">此字段会被 [ExtensionTTSParams](#extensionttsparams各第三方-tts-扩展透传参数说明) 的 Cluster 替换。</Warning>                                               |
| ApiType              | String | 否       | 第三方 API 类型，仅适用于火山引擎：<ul><li>stream：大模型语音合成 API</li><li>bidirection：双向流式 API</li></ul>                                         |
| ResourceId           | String | 否       | 资源 ID，仅适用于火山引擎。当您使用火山引擎 TTS 双向流式 API 时需指定:<ul><li>volc.service_type.10029：大模型语音合成</li><li>声音复刻 2.0（不支持声音复刻 1.0）：<ul><li>小时版：volc.megatts.default</li><li>并发版：volc.megatts.concurr</li></ul></li></ul> |

## ChatConfig

| 参数                  | 类型   | 是否必选 | 描述                                                                                                                                   |
|----------------------|--------|----------|--------------------------------------------------------------------------------------------------------------------------------------|
| LLMSystemMode        | int    | 否       | LLM 的 System 输入来源，支持的值如下：<ul><li>0：自定义智能体参数（[CustomAgentConfig](#customagentconfig)）的 `System`。</li><li>1：自定义智能体参数（[CustomAgentConfig](#customagentconfig)）的 `System`；并行业务基于 ASR 识别结果自定义本轮对话 System（相当于编辑用户问题，LLM 重新回答）</li><li>2：业务基于 ASR 识别结果自定义本轮对话 System，若 5s 内没有返回，则不再等待，以原逻辑进行处理，即创建会话时的System。<Note title="注意">基于ASR语音识别结果，自定义当轮对话 LLM - System的处理方式，请查看 [自定义 LLM System 回调](./../Callbacks/Custom%20LLM%20System%20Callback.mdx)。</Note></li></ul> |
| EnableLLMServerMessage | Int  | 否       | 是否开启服务端回调 LLM 结果。若开启，则按照每句话返回 LLM 输出结果。回调内容请参考 [通用回调](./../Callbacks/General%20Callback.mdx)。支持的值如下：<ul><li>0：不开启。（默认）</li><li>1：开启。</li></ul>                                               |