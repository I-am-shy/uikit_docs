# API

## CustomAgentConfig

CustomAgentConfig 类用于配置 AI Agent 的会话参数，包含以下属性：
- `AgentTemplateId`: 智能体模板ID
- `Name`: 智能体名称
- `Avatar`: 智能体头像URL
- `LLM`: 大语言模型配置
- `TTS`: 文本转语音配置
- `Sex`: 性别
- `Intro`: 介绍
- `System`: 系统提示词
- `WelcomeMessage`: 欢迎消息
- `MetaHumanConfig`: 数字人配置

示例用法：
```java
CustomAgentConfig config = new CustomAgentConfig();
config.Name = "助手";
config.Sex = "男";
config.Intro = "这是一个智能助手";
```

## ZegoAIAgent

Zego AI Agent SDK 主入口类，提供了以下核心功能：
- SDK 的初始化和配置
- AI 会话的创建、查询、更新和删除
- 语音/视频通话的开启和关闭
- 会话配置的动态更新（包括 LLM、TTS 等设置）

使用单例模式实现，通过 `instance()` 方法获取实例。

### instance

获取 ZegoAIAgent 的单例实例。使用单例模式确保在整个应用程序中只有一个 ZegoAIAgent 实例。

```java
public static ZegoAIAgent instance();
```

### initSDK

初始化 SDK。

```java
public void initSDK(Application application, AuthData authData, UserProfile profile);
```

参数说明：
- application: Android application 实例
- authData: app 鉴权信息
- profile: 当前用户信息

### queryConversationList

查询会话列表。

```java
public void queryConversationList(int pageNum, int pageSize, QueryConversationListCallback callBack);
```

参数说明：
- pageNum: 页码，默认值1
- pageSize: 每页数量，默认值100
- callBack: 会话列表回调

### createConversation

创建 AIAgent 会话。

```java
public void createConversation(CustomAgentConfig customAgentConfig, CreateConversationCallback callBack);
```

参数说明：
- customAgentConfig: 会话配置
- callBack: 创建会话回调

### createConversationWithZIM

创建 AIAgent 和 ZIM 会话。

```java
public void createConversationWithZIM(CustomAgentConfig customAgentConfig, CreateConversationCallback callBack);
```

### onRemoteVideoFrameRawData

接收远程视频帧数据。

```java
public void onRemoteVideoFrameRawData(ByteBuffer[] data, int[] dataLength, ZegoAIAgentVideoFrameParam param, String streamID);
```

参数说明：
- data: 视频帧数据数组
- dataLength: 视频帧数据长度数组
- param: 视频帧参数
- streamID: 视频流ID

### onPlayerSyncRecvSEI

接收同步SEI数据。

```java
public void onPlayerSyncRecvSEI(String streamID, byte[] data);
```

参数说明：
- streamID: 视频流ID
- data: SEI数据

参数说明：
- customAgentConfig: 会话配置
- callBack: 创建会话回调

### updateConversation

更新会话配置。

```java
public void updateConversation(String conversationId, CustomAgentConfig agentConfig, UpdateConversationCallback callBack);
```

参数说明：
- conversationId: 会话 ID
- agentConfig: 会话配置
- callBack: 更新回调

### resetConversationMsg

重置会话上下文。

```java
public void resetConversationMsg(String conversationId, ResetConversationMsgCallback callBack);
```

参数说明：
- conversationId: 会话 ID
- callBack: 重置会话上下文回调

### deleteConversation

删除会话。

```java
public void deleteConversation(String conversationId, DeleteConversationCallback callBack);
```

参数说明：
- conversationId: 会话 ID
- callBack: 删除会话回调

### startChat

开启语音通话。

```java
public void startChat(String conversationID, String roomID, String userStreamID, String agentStreamID, StartRTCChatCallback callBack);
```

参数说明：
- conversationID: 会话 ID
- roomID: 当前会话所在房间 ID
- userStreamID: 用户推语音流 ID
- agentStreamID: AI Agent 推流 ID
- callBack: 开启语音通话回调

### startChat (视频通话)

开启视频通话。

```java
public void startChat(String conversationID, String roomID, String userStreamID, String agentStreamID, String metaHumanStreamID, @NonNull ZegoPreviewView previewView, StartRTCVideoChatCallback callBack);
```

参数说明：
- conversationID: 会话 ID
- roomID: 当前会话所在房间 ID
- userStreamID: 用户推语音流 ID
- agentStreamID: AI Agent 推流 ID
- metaHumanStreamID: 数字人推流 ID
- previewView: 预览 view，视频内容会渲染到该 view 上
- callBack: 开启视频通话回调

### stopChat

关闭会话。

```java
public void stopChat(String conversationID, StopRTCChatCallback callBack);
```

参数说明：
- conversationID: 会话 ID
- callBack: 关闭回调

### setLogFileDir

设置日志文件目录。设置 SDK 日志文件的存储目录，用于问题排查和调试。

```java
public void setLogFileDir(Context context, String baseDir);
```

参数说明：
- context: Android 上下文对象
- baseDir: 日志文件存储的基础目录路径

### getVersion

获取 SDK 版本号。返回当前 AI Agent SDK 的版本号字符串。

```java
public String getVersion();
```

返回值：
- SDK 版本号，格式为 "x.y.z"

### renewToken

更新 token。

```java
public void renewToken(String token);
```

参数说明：
- token: 新的 token 值