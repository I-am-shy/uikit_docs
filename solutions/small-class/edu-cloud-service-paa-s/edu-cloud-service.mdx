# 在线课堂示例 demo 后台服务说明

---

@@@SC_GC_Server_Des@@@

## 4 快速入门

### 4.1 登录教室

调用 [login_room](#5904) 接口登录教室，会自动初始化教室，如果输入了相同的 `room_id` 则会进入同一教室。客户端需保证 `uid` 唯一性，相同的 `uid` 后端会认为是同一个用户。


```json
{
  "room_id":"123456",
  "uid":171171717,
  "nick_name":"shawn",
  "role":1
}
```


登录房间成功后返回教室的默认状态和配置项，以及用户的状态信息，客户端需要根据这些信息初始化房间和用户状态。


```json
{
  "ret": {
    "code": 0,
    "message": "succeed"
  },
  "data": {
    "max_join_live_num": 4,
    "room_id": "123456",
    "default_camera_state": 2,
    "default_mic_state": 2,
    "allow_turn_on_camera": 2,
    "allow_turn_on_mic": 2,
    "uid": 171171717,
    "nick_name": "Shawn",
    "role": 1,
    "login_time": 1600920322511,
    "camera": 1,
    "mic": 1,
    "can_share": 2
  }
}
```


### 4.2 上课中相关操作

上课过程中，教师和学生通过以下接口实现管理设备状态、中途离开教室、结束教学等功能。

#### 4.2.1 修改设备状态

调用 [set_user_info](#5908) 接口可以修改自己的设备、共享状态，教师也可以通过此接口修改学生的设备、共享状态。

```json
{
  "uid":171171717,
  "room_id":"123456",
  "target_uid":171171717,
  "mic":2,
  "camera":2,
  "can_share":2
}
```


#### 4.2.2 离开教室

调用 [leave_room](#5910) 接口可以离开教室，用户状态信息会被删除，当所有人都离开教室 15 分钟以后，教室会自动销毁。


```json
{
  "uid":171171717,
  "room_id":"123456"
}
```

#### 4.2.3 结束教学

调用 [end_teaching](#5911) 接口可以结束教学，将教室内所有用户踢出教室，然后立即销毁教室。

```json
{
  "uid":171171717,
  "room_id":"123456"
}
```
