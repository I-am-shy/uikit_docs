# 业务介绍
- - -
用户会选择感兴趣的歌房加入。进入房间后，客户可以上麦参与互动，上麦后可以选择自己喜欢的歌曲点歌并等待排麦。等排到的时候就可以跟着伴奏唱歌。搭建一个完整的在线K歌房需多个功能模块，如下：

|房间管理|麦位管理|点歌管理|K歌管理|评分功能|
| -- | -- | -- | -- | -- |
|房间列表|上/下麦|歌单展示|人声和伴奏切换|歌唱评分|
|创建房间|麦位控制|搜索歌曲|开始/停止/切歌|音准线展示|
|加入房间|换麦|点歌|伴奏和人声音量调节||
|销毁房间|锁麦位|排麦|美声混响||
||邀请上麦|已点列表|唱歌玩法||
||麦位禁言||歌词同步||

接下来会逐个介绍各个功能模块，通过介绍可以对搭建K歌房所需的功能有个完整的认识。

## 1 房间管理
房间管理主要包含功能：房间列表、创建房间、加入房间、销毁房间。

用户可以创建房间，或者从房间列表中选择感兴趣的房间加入。当房内没用户时，房间可以自动销毁。

<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/ktv/Room_list.jpg" /></Frame>

## 2 麦位管理
麦位管理主要包含功能：上/下麦、换麦、锁麦位、邀请上麦、麦位禁言等。

用户进入房间后，如果想和麦上用户互动就需要上麦。歌房内的麦位一般都是有序且有限的。有空麦位才能上麦，为了参与互动可以抢麦位。房主有权利锁住麦位，邀请用户上麦，对麦上用户禁言等。

<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/ktv/Mic_Management.png" /></Frame>

## 3 点歌管理

点歌管理主要包含功能：歌单展示、搜索歌曲、点歌和排麦、已点列表。

用户上麦后可以点歌，观众不能点歌。麦上用户可以直接搜索歌曲或者根据各种类型的榜单去找歌曲然后点歌，客户业务后台会维护一个已点列表并自动排麦。

<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/ktv/Choose_Song.png" /></Frame>

可以参考 [点歌管理](!online_ktv_solution_order_song) 实现排麦和已点列表功能。

### 3.1 正版曲库
Zego 正版曲库支持歌单展示、搜索歌曲、点歌，逐字歌词下载等。更多具体的内容查看 [ZEGO 内容中心 - 点歌](./Sing%20songs.mdx)。

## 4 K歌管理
K歌系统主要包含功能：人声和伴奏切换、开始/停止/切歌、伴奏和人声音量调节、美声混响、唱歌玩法、歌词同步。

<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/ktv/Sing.png" /></Frame>

点歌用户可以随时切换人声和伴奏，如果觉得不会唱，可以切歌。歌唱途中，点歌用户可以将伴奏和人声音量调整到合适的范围，也可以选择喜欢的混响音效，设置完成后即可随着音乐开唱。如果用户不熟悉歌词，还可以参照着已同步的歌词进行演唱。

ZEGO 目前支持实现 3 种唱歌玩法，分别为独唱、合唱以及抢唱：

### 4.1 独唱

独唱方案，用户上麦后自由点歌后进行排麦演唱。演唱者进行歌曲演唱时，将麦克风人声和媒体播放器声音进行混流，观众在台下接收音频流。

### 4.2 合唱
歌曲合唱有两种形式：实时合唱和串行合唱。

实时方案：
在歌房中，麦上用户本地同时播放伴奏，同时开唱。其他用户可以中途加入合唱。低延迟实时合唱体验，真正实时合唱。服务器对人声和伴奏精准对齐，保证观众收听体验。

串行KTV方案：
合唱各方串行加入，主唱推出一条流，包含了伴奏和人声，副唱跟着主唱的伴奏进行合唱，观众再拉由副唱发出的混流。

### 4.3 抢唱

抢唱，是一种兼具“唱歌+社交+游戏竞技”属性的K歌玩法，在一轮抢唱游戏中，会播放若干首歌曲的高潮片段供玩家抢麦，玩家获得麦权可开始演唱歌曲。

## 5 评分功能
评分功能主要包含功能：音准线展示和歌唱评分。
独唱用户有时候需要打分系统评价本次唱歌，以便改进唱功。另外参与互动的合唱用户需要打分来增加互动。

<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/ktv/Rate.png" /></Frame>
