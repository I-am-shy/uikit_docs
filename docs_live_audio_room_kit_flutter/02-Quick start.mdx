import LiveAudioRoomKit_QuickStart_Prerequisites_En from "../snippets/uikit/live_audio_room/LiveAudioRoomKit_QuickStart_Prerequisites-en.mdx";

# Quick start

## Prerequisites

<LiveAudioRoomKit_QuickStart_Prerequisites_En />

## Integrate the SDK

### Add ZegoUIKitPrebuiltLiveAudioRoom as dependencies

Run the following code in your project's root directory: 

```dart
flutter pub add zego_uikit_prebuilt_live_audio_room
```

### Import the SDK

Now in your Dart code, import the Live Audio Room Kit SDK.

```dart
import 'package:zego_uikit_prebuilt_live_audio_room/zego_uikit_prebuilt_live_audio_room.dart';
```


## Using the Live Audio Room Kit

import LiveAudioRoomKit_QuickStart_Using_En from "../snippets/uikit/live_audio_room/LiveAudioRoomKit_QuickStart_Using-en.mdx";

<LiveAudioRoomKit_QuickStart_Using_En />

```dart
class LivePage extends StatelessWidget {
  final String roomID;
  final bool isHost;

  const LivePage({Key? key, required this.roomID, this.isHost = false}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return SafeArea(
      child: ZegoUIKitPrebuiltLiveAudioRoom(
        appID: yourAppID, // Fill in the appID that you get from ZEGOCLOUD Admin Console.
        appSign: yourAppSign, // Fill in the appSign that you get from ZEGOCLOUD Admin Console.
        userID: 'user_id',
        userName: 'user_name',
        roomID: roomID,
        config: isHost
            ? ZegoUIKitPrebuiltLiveAudioRoomConfig.host()
            : ZegoUIKitPrebuiltLiveAudioRoomConfig.audience(),
      ),
    );
  }
}
```

Then, you can create a live audio room. And the audience can join the live audio room by entering the `roomID`.

## Config your project


<Tabs>
  <Tab title="Android">
    <Tabs>
      <Tab title="android/app/build.gradle">
        Open the file `android/app/build.gradle`
        
        1. add the following:

        ```gradle
        dependencies {
          implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version"
        }
        ```
        <Frame width="800" height="auto" caption="">
          <img src="images/android-config-appbuildgradle.jpeg" />
        </Frame>

        2. edit the `minSdkVersion`.
        ```xml
        minSdkVersion 21
        ```
        <Frame width="auto" height="auto" caption="">
          <img src="https://storage.zego.im/sdk-doc/Pics/ZegoUIKit/Flutter/android_min_sdk_21.png" />
        </Frame>

        <Tip title="created with Flutter 2.x.x">
          > If your project is created with **Flutter 2.x.x**, you will need to modify the `compileSdkVersion` to **33**.
          
          <Frame width="800" height="auto" caption="">
            <img src="https://storage.zego.im/sdk-doc/Pics/ZegoUIKit/Flutter/compile_sdk_version.png" />
          </Frame>
        </Tip>
      </Tab>

      <Tab title="android/build.gradle">
        Open the file `android/build.gradle`, and add the following:

        ```gradle
        buildscript {
          ext.kotlin_version = '1.8.0'
        }
        ```
        <Frame width="800" height="auto" caption="">
          <img src="images/android-config-buildgradle.jpeg" />
        </Frame>
      </Tab>

      <Tab title="Permissons">
        Open the file `your_project/app/src/main/AndroidManifest.xml`, and add the following:

        ```xml
        <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
        <uses-permission android:name="android.permission.RECORD_AUDIO" />
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-permission android:name="android.permission.CAMERA" />
        <uses-permission android:name="android.permission.BLUETOOTH" />
        <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.READ_PHONE_STATE" />
        <uses-permission android:name="android.permission.WAKE_LOCK" />
        ```

        <Frame width="auto" height="auto" caption="">
          <img src="https://storage.zego.im/sdk-doc/Pics/ZegoUIKit/Flutter/live/permission_android.png" />
        </Frame>
      </Tab>

      <Tab title="Prevent code obfuscation">
        To prevent obfuscation of the SDK public class names, do the following:

        1. In your project's `your_project > android > app` folder, create a `proguard-rules.pro` file with the following content as shown below:

        ```xml
        -keep class **.zego.** { *; }
        -keep class **.**.zego_zpns.** { *; }
        ```

        2. Add the following config code to the `release` part of the `your_project/android/app/build.gradle` file.

        ```xml
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        ```

        <Frame width="auto" height="auto" caption="">
          <img src="https://storage.zego.im/sdk-doc/Pics/ZegoUIKit/Flutter/android_class_confusion_zpns.png" />
        </Frame>
      </Tab>
    </Tabs>
  </Tab>

  <Tab title="iOS">
    <Tabs>
      <Tab title="Permissions">
import UIKIT_IOS_PERMISSION_CONFIG_EN from "../snippets/uikit/UIKIT_IOS_PERMISSION_CONFIG-en.mdx";

<UIKIT_IOS_PERMISSION_CONFIG_EN />
      </Tab>
      <Tab title="Disable Bitcode">
import UIKIT_IOS_DISABLE_BITCODE_EN from "../snippets/uikit/UIKIT_IOS_DISABLE_BITCODE-en.mdx";

<UIKIT_IOS_DISABLE_BITCODE_EN />
      </Tab>
    </Tabs>
  </Tab>
</Tabs>


## Run & Test

Now you can simply click the **Run** or **Debug** button to run and test your App on the device.

<Frame width="auto" height="auto" caption="">
  <img src="https://storage.zego.im/sdk-doc/Pics/ZegoUIKit/Flutter/run_flutter_project.jpg" />
</Frame>

## Related guide

[Custom prebuilt UI](./03-Custom%20prebuilt%20features/01-Overview.mdx)

## Resources

<CardGroup cols={2}>
  <Card title="Sample code" href="https://github.com/ZEGOCLOUD/zego_uikit_prebuilt_live_audio_room_example_flutter" target="_blank">
    Click here to get the complete sample code.
  </Card>
  <Card title="API reference" href="https://pub.dev/documentation/zego_uikit_prebuilt_live_audio_room/latest/zego_uikit_prebuilt_live_audio_room/zego_uikit_prebuilt_live_audio_room-library.html" target="_blank">
    Click here for detailed explanations of all APIs.
  </Card>
</CardGroup>
