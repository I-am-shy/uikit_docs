# Quick start

- - -

## Introduction

ZEGOCLOUD Analytics Dashboard Server provides multiple Server API interfaces, allowing developers to send requests to the ZEGOCLOUD Server to query user push and pull stream data, regional data, and operation data. Developers can initiate HTTPS network requests and use the GET method to call the Server API to interact with the ZEGOCLOUD Server.

This article takes "how to call a Server API interface" as an example to help developers quickly understand the usage of various Server API interfaces.

## Prerequisites

Before calling the Server API interface, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zegocloud.com/) and applied for valid AppId and ServerSecret. For details, please refer to "Project Information" in [Control Panel - Project Management](https://doc-zh.zego.im/article/12107).
- You have prepared the development environment for debugging the Server API interface.
- You have prepared your own client and built related business scenarios.

## GET Request Example Code

ZEGOCLOUD provides example code in multiple programming languages for developers to refer to based on actual circumstances. For example, to send a GET request to the ZEGOCLOUD Server using the [query business scale](./Operation%20data/Get%20biz%20usage.mdx) interface:

<CodeGroup>
```go Go
package main

import (
	"crypto/md5"
	"crypto/rand"
	"encoding/hex"
	"fmt"
	"io/ioutil"
	"net/http"
	"net/url"
	"time"
)

//Please modify the AppId to your AppId, and the AppId is uint32
//For example: 1234567890
var appId uint32 = 1234567890

//Please modify the serverSecret to your serverSecret, and the serverSecret is a string
//For example: "abcde1234aaaaaaaabbbbbbb"
var serverSecret = 

func main() {
	queryParams := url.Values{}
	startDate := "20250110"
	endDate := "20250112"
	metrics := "publish_count"
	queryParams.Add("StartDate", startDate)
	queryParams.Add("EndDate", endDate)
    queryParams.Add("Metrics[]", "publish_count")
    queryParams.Add("Metrics[]", "view_count")

	timestamp := time.Now().Unix()
  // Generate a 16-bit hexadecimal random string
	nonce := make([]byte, 8)
	rand.Read(nonce)
	hexNonce := hex.EncodeToString(nonce)
  // Generate a signature
	signature := generateSignature(appId, serverSecret, hexNonce, timestamp)
	authParams := url.Values{}
	authParams.Set("AppId", fmt.Sprintf("%d", appId))
  // The random number in the public parameters must be consistent with the random number generated for the signature
	authParams.Set("SignatureNonce", hexNonce)
	authParams.Set("SignatureVersion", "2.0")
  // The timestamp in the public parameters must be consistent with the timestamp generated for the signature
	authParams.Set("Timestamp", fmt.Sprintf("%d", timestamp))
	authParams.Set("Signature", signature)
	// analytics-api.zego.im represents the request is the Star Map Server API
  // The following example can call the "GetBizUsage" API to query the daily real-time audio-video data statistics within the specified time period
	addr := fmt.Sprintf("https://analytics-api.zego.im/?Action=GetBizUsage&%s&%s", authParams.Encode(), queryParams.Encode())
	rsp, err := http.Get(addr)
	if err != nil {
		fmt.Printf("http.Get err:%+v", err)
		return
	}
	defer rsp.Body.Close()
	body, err := ioutil.ReadAll(rsp.Body)
	if err != nil {
		fmt.Printf("ioutil.ReadAll err:%+v", err)
		return
	}
	fmt.Printf("body:%+v", string(body))
}

// Generate a signature
// Signature=md5(AppId + SignatureNonce + ServerSecret + Timestamp)
func generateSignature(appId uint32, serverSecret, signatureNonce string, timeStamp int64) string {
	data := fmt.Sprintf("%d%s%s%d", appId, signatureNonce, serverSecret, timeStamp)

	h := md5.New()
	h.Write([]byte(data))
	return hex.EncodeToString(h.Sum(nil))
}
```

```python Python
# -*- coding: UTF-8 -*-
import hashlib
import secrets
import time


from urllib.parse import urlencode

import requests

# Generate a signature
# Signature=md5(AppId + SignatureNonce + ServerSecret + Timestamp)
def GenerateSignature(appId, signatureNonce, serverSecret, timestamp):
    str1 = str(appId) + signatureNonce + serverSecret + str(timestamp)
    hash = hashlib.md5()
    hash.update(str1.encode("utf8"))
    signature = hash.hexdigest()
    return signature


if __name__ == '__main__':
    # Please modify the appId to your AppId, and the AppId is a number
    # For example: 1234567890
    appId = 1234567890
    # Please modify the serverSecret to your serverSecret, and the serverSecret is a string
    # For example: "abcde1234aaaaaaaabbbbbbb"
    serverSecret = 
    # Generate a random number
    signatureNonce = secrets.token_hex(8)
    
    timestamp = int(time.time())
    # The timestamp in the public parameters must be consistent with the timestamp generated for the signature
    sig = GenerateSignature(appId, signatureNonce, serverSecret, timestamp)

    # The following example can call the "GetBizUsage" API to query the daily real-time audio-video data statistics within the specified time period
    par = {
        "Action": "GetBizUsage",
        "AppId": appId,
        "Signature": sig,
        "SignatureNonce": signatureNonce, # The timestamp in the public parameters must be consistent with the timestamp generated for the signature
        "SignatureVersion": "2.0",
        "Timestamp": timestamp, # The timestamp in the public parameters must be consistent with the timestamp generated for the signature
        "StartDate": "20250110"
        "EndDate": "20250112"
        "Metrics[]": "publish_count"
        "Metrics[]": "view_count"
    }
    url = 'https://analytics-api.zego.im/'
    req = requests.get(url, params=par)
    print("Url: ", req.url)
    print("StatusCode: ", req.status_code)
    print("Respone: ", req.text)
```

```java Java
package org.example;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.security.MessageDigest;
import java.security.SecureRandom;
import java.util.HashMap;
import java.util.Map;

public class GetBizUsage {

    public static void main(String[] args) {
        // Query business scale
        getBizUsage();
    }

    /**
     * Test query business scale
     */
    public static void getBizUsage() {
        // Please fill in the start date for the query
        String startDate = "20250110";
        // Please fill in the end date for the query
        String endDate = "20250112";
        // Please fill in the APP ID you got from the control panel,
        // For example: 1234567890L, APP_ID is Long type
        Long APP_ID = 1234567890L;
        // Please fill in the SERVER SECRET you got from the control panel,
        // For example: "abcde1234aaaaaaaabbbbbbb"
        String SERVER_SECRET = ;
        // Generate a 16-bit hexadecimal random string
        byte[] bytes = new byte[8];
        SecureRandom sr = new SecureRandom();
        sr.nextBytes(bytes);
        String signatureNonce = bytesToHex(bytes);
        // Set the timestamp
        long timestamp = System.currentTimeMillis() / 1000L;

        // Generate a signature: Signature=md5(AppId + SignatureNonce + ServerSecret + Timestamp)
        String signatue = generateSignature(APP_ID, signatureNonce, SERVER_SECRET, timestamp);

        // Assemble the request URL
        Map<String, Object> params = new HashMap<String, Object>();
        params.put("Action", "GetBizUsage");
        params.put("StartDate", startDate);
        params.put("EndDate", endDate);
        // Please fill in the metrics you need to query
        params.put("Metrics[]", "publish_count");
        params.put("Metrics[]", "view_count");
        params.put("AppId", APP_ID);
        // The random number in the public parameters must be consistent with the random number generated for the signature
        params.put("SignatureNonce", signatureNonce);
        // The timestamp in the public parameters must be consistent with the timestamp generated for the signature
        params.put("Timestamp", timestamp);
        params.put("Signature", signatue);
        params.put("SignatureVersion", "2.0");
        String url = buildAPIUrl("https://analytics-api.zego.im/", params);

        String result = sendGet(url);
        System.out.println(result);
    }

    /**
     * Generate a signature
     * @param appId The application ID
     * @param signatureNonce The signature random code
     * @param serverSecret The Server API secret key
     * @param timestamp The signature timestamp
     * @return The generated signature string
     */
    public static String generateSignature(long appId, String signatureNonce, String serverSecret, long timestamp){
        String str = String.valueOf(appId) + signatureNonce + serverSecret + String.valueOf(timestamp);
        String signature = "";
        try{
            //Create an object that provides information digest algorithms, initialized as an md5 algorithm object
            MessageDigest md = MessageDigest.getInstance("MD5");
            //Calculate and obtain the byte array
            byte[] bytes = md.digest(str.getBytes("utf-8"));
            //Convert each byte in the array to a hexadecimal and concatenate into an MD5 string
            signature = bytesToHex(bytes);
        }catch (Exception e) {
            e.printStackTrace();
        }
        return signature;
    }

    /**
     * Convert the byte array to a 16-bit hexadecimal string
     * @param bytes The byte array to be converted
     * @return The converted hexadecimal string
     */
    public static String bytesToHex(byte[] bytes) {
        StringBuffer md5str = new StringBuffer();
        // Convert each byte in the array to a hexadecimal and concatenate into an MD5 string
        int digital;
        for (int i = 0; i < bytes.length; i++) {
            digital = bytes[i];
            if (digital < 0) {
                digital += 256;
            }
            if (digital < 16) {
                md5str.append("0");
            }
            md5str.append(Integer.toHexString(digital));
        }
        return md5str.toString();
    }

    /**
     * Send an HTTP-GET request
     * @param httpurl The request path
     * @return The response content
     */
    public static String sendGet(String httpurl) {
        HttpURLConnection connection = null;
        InputStream is = null;
        BufferedReader br = null;
        String result = null;// The return result string
        try {
            // Create a remote URL connection object
            URL url = new URL(httpurl);
            // Open a connection through the remote URL connection object, and cast it to the HttpURLConnection class
            connection = (HttpURLConnection) url.openConnection();
            // Set the connection method: GET
            connection.setRequestMethod("GET");
            // Set the connection timeout of the host server: 15000 milliseconds
            connection.setConnectTimeout(15000);
            // Set the timeout for reading the data returned from the remote: 60000 milliseconds
            connection.setReadTimeout(60000);
            // Send the request
            connection.connect();
            // Get the input stream through the connection
            if (connection.getResponseCode() == 200) {
                is = connection.getInputStream();
                // Wrap the input stream is, and specify the character set
                br = new BufferedReader(new InputStreamReader(is, "UTF-8"));
                // Store the data
                StringBuffer sbf = new StringBuffer();
                String temp = null;
                while ((temp = br.readLine()) != null) {
                    sbf.append(temp);
                    sbf.append("\r\n");
                }
                result = sbf.toString();
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            // Close the resources
            if (null != br) {
                try {
                    br.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            if (null != is) {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            connection.disconnect();// Close the remote connection
        }
        return result;
    }
    /**
     * Assemble the API address string
     * @param url The API address
     * @param params The request parameters
     * @return The assembled API address string
     */
    public static String buildAPIUrl(String url, Map<String, Object> params) {
        if(params.isEmpty()) {
            return url;
        }
        StringBuffer buffer = new StringBuffer(url).append("?");
        for(String key : params.keySet()) {
            buffer.append(key).append("=").append(params.get(key)).append("&");
        }
        String apiurl = buffer.toString();
        if(apiurl.endsWith("&")) {
            return apiurl.substring(0, apiurl.length()-1);
        } else {
            return apiurl;
        }
    }

}
```

```php PHP
<?php
/**
 * The simplest example code for querying business scale
 */

//Please modify the appId to your AppId
//For example: 1234567890
$appId = 1234567890;
//Please modify the serverSecret to your serverSecret, and the serverSecret is a string
//For example: "1234567890bbc111111da999ef05f0ee"
$serverSecret = ;

//Generate a signature
//Signature=md5(AppId + SignatureNonce + ServerSecret + Timestamp)
function GenerateSignature($appId, $signatureNonce, $serverSecret, $timeStamp){
    $str = $appId . $signatureNonce . $serverSecret . $timeStamp;
    //Use the standard MD5 algorithm in PHP, default returns 32 characters 16-bit hexadecimal number
    return md5($str);
}

  //Generate a random string and convert it to a hexadecimal value
$signatureNonce = bin2hex(random_bytes(8));

//Get the millisecond timestamp
list($msec, $sec) = explode(' ', microtime());
$msecTime = (float)sprintf('%.0f', (floatval($msec) + floatval($sec)) * 1000);
//Round $msecTime to the second timestamp
$timeStamp = round($msecTime/1000);
// Generate a signature
// The Timestamp used for generating the signature must be consistent with the Timestamp in the URL parameters, and the SignatureNonce used for generating the signature must be consistent with the SignatureNonce in the URL parameters
$sig = GenerateSignature($appId, $signatureNonce, $serverSecret, $timeStamp);

//The following example can call the "GetBizUsage" API to query the business scale
$url = "https://analytics-api.zego.im/?Action=GetBizUsage&StartDate=20250110&EndDate=20250112&Metrics[]=publish_count&Metrics[]=play_count&AppId=$appId&SignatureNonce=$signatureNonce&Timestamp=$timeStamp&Signature=$sig&SignatureVersion=2.0&IsTest=false";

//Use the curl library
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
//Set the request connection timeout, unit: seconds
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
$response = curl_exec($ch);
curl_close($ch);
//The request URL
echo "Url: " . $url ."\r\n";
//The returned result
echo "response:" . $response;
```

```js Node.js
const crypto = require('crypto');
const request = require('request');

//Please modify the appId to your AppId, and the AppId is a number
var appId = 1234567890;
//Please modify the serverSecret to your serverSecret, and the serverSecret is a string
//Example："1234567890bbc111111da999ef05f0ee"
var serverSecret = ;

//Generate a signature
//Signature=md5(AppId + SignatureNonce + ServerSecret + Timestamp)
function GenerateUASignature(appId, signatureNonce, serverSecret, timeStamp){
    const hash = crypto.createHash('md5'); //Specifies the use of the MD5 algorithm in hash functions
    var str = appId + signatureNonce + serverSecret + timeStamp;
    hash.update(str);
    // hash.digest('hex') indicates that the output format is hexadecimal
    return hash.digest('hex');
}

var signatureNonce = crypto.randomBytes(8).toString('hex');
var timeStamp = Math.round(Date.now()/1000);
// Generate a signature
// The Timestamp used for generating the signature must be consistent with the Timestamp in the URL parameters, and the SignatureNonce used for generating the signature must be consistent with the SignatureNonce in the URL parameters
var sig = GenerateUASignature(appId, signatureNonce, serverSecret, timeStamp)
// analytics-api.zego.im represents the product used is Star Map
//The following example can get the number of users in the room with RoomID room1
var url = `https://analytics-api.zego.im/?Action=GetBizUsage&StartDate=20250110&EndDate=20250112&Metrics[]=publish_count&Metrics[]=play_count&AppId=${appId}&SignatureNonce=${signatureNonce}&Timestamp=${timeStamp}&Signature=${sig}&SignatureVersion=2.0&IsTest=false`;

request(url, function(error, response, body){
    console.log('Url: ',url)
    console.log('StatusCode: ',response.statusCode)
    console.log('Error: ', error)
    if(!error && response.statusCode){
        console.log(body)
    }
})
```
</CodeGroup>

## Usage Process

Developers can quickly initiate a request to the ZEGOCLOUD Server by the following process:

1. The developer's Server first confirms the request URL address;
2. Obtain the signature information according to the signature generation rule;
3. Configure the public request parameters of the developer's Server;
4. Configure the business parameters of the API;
5. The developer's Server sends a request to the ZEGOCLOUD Server through the URL address, carrying the request information (including business parameters, signature information, etc.);
6. The ZEGOCLOUD Server returns the response information.


We take the API interface [query business scale](./Operation%20data/Get%20biz%20usage.mdx) as an example, and send a GET request to the ZEGOCLOUD Server for detailed introduction to the usage process.

### 1 Confirm the URL address

The ZEGOCLOUD Server distinguishes different requests according to different URL addresses. Therefore, the developer's Server accesses the ZEGOCLOUD Server, please get the request URL address from the corresponding interface document first.

The URL address of [query business scale](./Operation%20data/Get%20biz%20usage.mdx) is as follows:

```txt
https://analytics-api.zego.im/?Action=GetBizUsage
```

Where:
- https：Specifies the request communication protocol.
- analytics-api.zego.im：Specifies the ZEGOCLOUD Server access address, where `analytics` represents the product used is Star Map, see [call method - request structure - access address](./Access%20server%20APIs.mdx#access address).
- Action=GetBizUsage：Specifies the API interface to be called as `GetBizUsage`.


### 2 Generate signature information

To ensure the secure call of the API, the ZEGOCLOUD Server will verify the access request of each API. When developers call the API, they need to include the signature Signature information in the request.

Developers can refer to the example code in the [call method - signature mechanism](./Access%20server%20APIs.mdx#signature mechanism) for various languages, use the AppId and ServerSecret obtained in this article [prerequisites](#prerequisites), and generate their own signature information.


### 3 Configure public request parameters

Before developers call each ZEGOCLOUD Server API, they need to configure the public request parameters of the API.

The public request parameters are the request parameters that each interface needs to use, including AppId, Signature ([2 generated signature information](#2-generated-signature-information)), SignatureNonce (random string), Timestamp (timestamp), etc. Please modify according to the actual situation. For details, please refer to [call method - public parameters](./Access%20server%20APIs.mdx#public parameters).

```txt
https://analytics-api.zego.im/?Action=GetBizUsage&AppId=1234567890&SignatureNonce=15215528852396&Timestamp=1234567890&Signature=Pc5WB8gokVn0xfeu%2FZV%2BiNM1dgI%3D&SignatureVersion=2.0&IsTest=false
```

Developers can enter the URL address on the [Server API verification](https://doc-zh.zego.im/server-link-checker) page to verify the signature information, public parameters, and whether the URL format is legal.

### 4 Configure API-related business parameters

After configuring the public parameters, configure the business parameters related to the API to set the desired target operation. 

For details, please refer to [request parameters](./Operation%20data/Get%20biz%20usage.mdx#request parameters).

### 5 The developer's Server sends a request 

After the above configuration is completed, the developer's Server can send a request to the ZEGOCLOUD Server through the URL address.

Request example:

```
//This request is to get the cumulative push and pull stream from 20250110 to 20250112
https://analytics-api.zego.im/?Action=GetBizUsage
&StartDate=20250110
&EndDate=20250112
&Metrics[]=publish_count
&Metrics[]=play_count
&<public request parameters>
```

### 6 The ZEGOCLOUD Server returns the response information

The ZEGOCLOUD Server receives the request information from the developer and returns the response information.

```json
{
    "Code": 0,
    "Data": {
        "Metrics": [
            {
                "Metric": "publish_count",
                "Values": [
                    {
                        "Date": "20250110",
                        "Value": 100
                    },
                    {
                        "Date": "20250111",
                        "Value": 30
                    },
                    {
                        "Date": "20250112",
                        "Value": 40
                    }
                ]
            },
            {
                "Metric": "play_count",
                "Values": [
                    {
                        "Date": "20250110",
                        "Value": 60
                    },
                    {
                        "Date": "20250111",
                        "Value": 20
                    },
                    {
                        "Date": "20250112",
                        "Value": 10
                    }
                ]
            }
        ]
    },
    "Message": "success",
    "RequestId": 1659512998878671000
}
```

In the returned information fields, if Code is "0", it means the access is successful, and the member list in the room can be viewed; if it is not "0", please refer to [global return codes](./Return%20codes.mdx) for processing.

Thus, the developer's Server and the ZEGOCLOUD Server have completed one information interaction.
