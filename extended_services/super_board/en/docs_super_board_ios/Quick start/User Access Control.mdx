# Use Tokens for authentication

- - -



@@@Introduction_to_Token_Authentication_Native@@@

## Prerequisites

@@@Rerequisites_for_Using_Token_Native@@@


## Understand the process

@@@Token_implementation_process@@@


@@@Token_usage_steps@@@


## Generate a Token on your app server (recommended)

@@@Server_generates_Token@@@

## Generate a Token on the client

@@@Client_generates_Token@@@

## Use a Token 


Pass the Token, user, and roomID parameters to log in to a room.

```objc
NSString *roomID = @"xxx"; // The room ID of the room to log in to.
ZegoUser *user = [ZegoUser userWithUserID:@"xxxx"];
ZegoRoomConfig *config = [[ZegoRoomConfig alloc] init];
config.token = @"xxxxxxxx"; // The Token you get from your app server. 

[[ZegoExpressEngine sharedEngine] loginRoom:roomID user:user config:config];
```


If you need to modify the stream publishing privilege of a user after the user logged in to a room, call the [`renewToken`\|_blank](@renewToken) method to renew the Token. The updated privileges will take effect for the next stream publishing, but will not affect the current streams being published (if any).


```objc
NSString *token = [MyToken getToken]; // Request a new Token from app server.
[[ZegoExpressEngine sharedEngine] renewToken:token roomID:roomID];
```

## Renew a Token

30 seconds before a Token expires, the SDK sends out a notification through the [`onRoomTokenWillExpire`\|_blank](/article/api?doc=Express_Video_SDK_API~objective-c_ios~protocol~ZegoEventHandler#on-room-token-will-expire-room-id) callback.

Upon receiving this callback, you need to get a new Token from your app server first, and then pass the new token to the [`renewToken`\|_blank](@renewToken) method. 
If the Token is not renewed, different SDK versions handle the Token expiration differently:


@@@Token expiration processing mechanism@@@


<Note title="Note">

If you enabled the room login privilege authentication (by validating the roomID), you must pass a new Token when logging in to a room. 
</Note>


```objc
- (void)onRoomTokenWillExpire:(int)remainTimeInSecond roomID:(NSString *)roomID {
    NSString *token = [MyToken getToken]; // Request a new Token from app server.
    
    [[ZegoExpressEngine sharedEngine] renewToken:token roomID:roomID];
}
```
