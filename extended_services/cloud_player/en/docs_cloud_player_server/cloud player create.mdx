# Create a cloud player

- - -

## Overview

Call this interface to create a cloud player. After successful creation, the cloud player will automatically load the incoming media resources and stream them to the specified room for playback.

<Warning title="Warning">

Under the same AppID, up to 50 cloud players that are currently running (not destroyed) are allowed. If you need to increase the limit, please contact ZEGOCLOUD technical support for assistance.
</Warning>

## Interface prototype

- Request method: POST
- Request URL: `https://cloud-player-api.zego.im/?Action=CreatePlayer`
- Transport protocol: HTTPS
- Call frequency limit: 20 times/second

## Request parameters

The following list only lists the interface request parameters. For common parameters, please refer to [Accessing server APIs - Common request parameters](./APIs%20method.mdx#2-common-parameters).

<table class="collapsible-table" >
  
<tbody><tr data-row-level="1">
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
<tr data-row-level="2">
<td>StreamUrl</td>
<td>String</td>
<td>Yes</td>
<td>The URL of the media resource. It must be a valid HTTP/HTTPS address and be within 1024 bytes in length.</td>
</tr>
<tr data-row-level="3">
<td>BackupStreamUrl</td>
<td>String</td>
<td>No</td>
<td>The backup URL of the media resource. It must be a valid HTTP/HTTPS address and be within 1024 bytes in length.When the address in the StreamUrl parameter fails to be accessed, the cloud player will attempt to access the backup address.</td>
</tr>
<tr data-row-level="4">
<td>RoomId</td>
<td>String</td>
<td>Yes</td>
<td>The ID of the specified room for streaming. It must be within 128 bytes in length.<strong>When calling this interface, if the RoomId does not exist, the room will be automatically created.</strong></td>
</tr>
<tr data-row-level="5">
<td>StreamId</td>
<td>String</td>
<td>No</td>
<td>The stream ID of the specified room for the cloud player to stream to. It must be within 256 bytes in length and only supports numbers, English characters, '-', and '_'. <strong>Please note that within the same AppID, the StreamId must be unique. If this parameter is not filled in, ZEGOCLOUD server will assign an ID randomly.</strong></td>
</tr>
<tr data-row-level="6">
<td>PlayerName</td>
<td>String</td>
<td>No</td>
<td>The name of the cloud player. It must be within 64 bytes in length and is empty by default.<ul><li><strong>Within the same AppId, there can be multiple cloud players with empty PlayerName, but multiple running cloud players with duplicate PlayerName are not allowed.</strong></li><li><strong>The name of a destroyed player (PlayerName) can be created and used again, but it is recommended that developers avoid creating players with the same PlayerName.</strong></li></ul></td>
</tr>
<tr data-row-level="7" data-row-child="true">
<td>VideoOptions</td>
<td>Object</td>
<td>No</td>
<td>Video transcoding parameter configuration.<strong>Please note that when this parameter is not filled in, the fields it contains will use default values.</strong></td>
</tr>
<tr data-row-level="7-1">
<td>Width</td>
<td>Number</td>
<td>No</td>
<td>The width of the video. The value range is [1, 3000], and it must be a multiple of 2. The unit is px. The default value is the width of the original media resource.<strong>Please note that when either Width or Height is set to 1, it represents audio-only streaming.</strong></td>
</tr>
<tr data-row-level="7-2">
<td>Height</td>
<td>Number</td>
<td>No</td>
<td>The height of the video. The value range is [1, 3000], and it must be a multiple of 2. The unit is px. The default value is the height of the original media resource.<strong>Please note that when either Width or Height is set to 1, it represents audio-only streaming.</strong></td>
</tr>
<tr data-row-level="7-3">
<td>VideoBitrate</td>
<td>Number</td>
<td>No</td>
<td>The video bitrate. The value range is [1, 50000], and the unit is kbps. The default value is the recommended bitrate given by ZEGOCLOUD based on the resolution and frame rate. For details, please refer to the "Use default values" in <a href="https://www.zegocloud.com/docs/video-call/common-video-config?platform=android&language=java#4_1" target="blank">Set up common video config</a>.For example, when the input resolution is 360*640, the VideoBitrate of the output stream is set to 600 kbps.</td>
</tr>
<tr data-row-level="7-4">
<td>VideoCodec</td>
<td>Number</td>
<td>No</td>
<td>The video encoding format.<ul><li>0: H264, default value.</li><li>2: VP8.</li><li>3: H265.</li></ul></td>
</tr>
<tr data-row-level="7-5">
<td>Fps</td>
<td>Number</td>
<td>No</td>
<td>Video frame rate, range is [1, 30], unit is fps, default value is 15.</td>
</tr>
<tr data-row-level="7-6">
<td>RenderMode</td>
<td>Number</td>
<td>No</td>
<td>Video fill mode.<ul><li>0: Fill mode, video is scaled proportionally until it is fully displayed in the viewport, may have black borders, default value.</li><li>1: Crop mode, video is scaled proportionally to fill the entire viewport, may be partially cropped.</li></ul></td>
</tr>
<tr data-row-level="8" data-row-child="true">
<td>AudioOptions</td>
<td>Object</td>
<td>No</td>
<td>Audio transcoding parameter configuration.<strong>Please note that when this parameter is not filled in, the fields included in it will use default values.</strong></td>
</tr>
<tr data-row-level="8-1">
<td>AudioCodec</td>
<td>Number</td>
<td>No</td>
<td>Audio codec and sampling rate.<ul><li>0: AAC-LC, sampling rate: 44100 kHz, default value.</li><li>1: HE-AAC, sampling rate: 44100 kHz.</li><li>6: OPUS, sampling rate: 48000 kHz.</li></ul></td>
</tr>
<tr data-row-level="8-2">
<td>AudioBitrate</td>
<td>Number</td>
<td>No</td>
<td>Audio bitrate, range is [1, 192], unit is kbps, default value is 48 kbps.</td>
</tr>
<tr data-row-level="8-3">
<td>SoundChannel</td>
<td>Number</td>
<td>No</td>
<td>Number of audio channels.<ul><li>1: Mono, default value.</li><li>2: Stereo.</li></ul></td>
</tr>
<tr data-row-level="8-4">
<td>Volume</td>
<td>Number</td>
<td>No</td>
<td>Volume value, range is [0, 200], default value is 100, representing the original volume of the audio.</td>
</tr>
<tr data-row-level="9">
<td>PlayTime</td>
<td>Number</td>
<td>No</td>
<td>Unix timestamp (in seconds) when starting to play the online media stream. <strong>Range is [CreateTime - 86400, CreateTime + 1800] (CreateTime is the creation time of the cloud player, which will be returned after a successful call to this interface. To increase the limit, please contact ZEGOCLOUD technical support)</strong>, default value is 0, indicating that the online player will automatically start playing the online media stream when it is created successfully.<ul><li>When PlayTime = CreateTime, the cloud player will automatically start playing when it is created successfully.</li><li>When PlayTime &gt; CreateTime, the cloud player will start loading media resources after it is created successfully, and start playing at the set PlayTime, achieving the effect of scheduled playback.</li><li>When PlayTime &lt; CreateTime, the cloud player will start playing from the position corresponding to <code>CreateTime - PlayTime</code>. For example, when cloud player A encounters an exception during operation, you can create a new cloud player B and set B's PlayTime to the Unix timestamp when A starts playing. When B is created successfully, it can start playing directly from the current progress of A.</li></ul>For example, if CreateTime is 20:00 in the evening, when PlayTime is 20:00, the cloud player will start playing directly after it is created successfully; when PlayTime is 20:10 (CreateTime + 600), the cloud player will start loading resources after it is created successfully, and start playing at 20:10; when PlayTime is 19:55 (CreateTime - 300), the cloud player will start playing directly from the 6th minute of the media stream.</td>
</tr>
<tr data-row-level="10">
<td>RepeatTimes</td>
<td>Number</td>
<td>No</td>
<td>Number of times to play.<ul><li>1: Play the media stream once, default value.</li><li>-1: Auto loop play.</li><li>n: Custom number of times to play the media stream, must be greater than 0.</li></ul></td>
</tr>
<tr data-row-level="11">
<td>SeekTo</td>
<td>Number</td>
<td>No</td>
<td>Specify the playback progress (in seconds), default value is 0, indicating starting from the beginning.</td>
</tr>
<tr data-row-level="12">
<td>MaxIdleTime</td>
<td>Number</td>
<td>No</td>
<td>Maximum duration of the cloud player in <strong>idle state (Status is 2 or 6, please refer to the return parameters of <a href="./cloud player query.mdx" target="blank"> Query the task list of a cloud player </a>)</strong>, i.e., the maximum duration when the media stream is not playing. Range is [5, 600], unit is seconds, default value is 300 seconds.<ul><li>After the idle state exceeds the set MaxIdleTime, the player will be automatically destroyed.</li><li>If MaxIdleTime is less than 5, ZEGOCLOUD server will automatically adjust it to 5; if MaxIdleTime is greater than 600, ZEGOCLOUD server will automatically adjust it to 600.</li></ul></td>
</tr>
<tr data-row-level="13" data-row-child="true">
<td>StreamData</td>
<td>Object</td>
<td>No</td>
<td>Data configuration carried by real-time media stream (such as playback progress information). This data will be transmitted as SEI information along with video frames, and can be obtained by the pulling party through listening to the <a href="/article/api?doc=Express_Video_SDK_API~java_android~class~IZegoEventHandler#on-player-sync-recv-sei" target="blank">onPlayerSyncRecvSEI</a> callback of the client.The SEI information transmitted by this parameter is in JSON format by default, and developers can parse it according to the JSON format. For example, if the SEI content is <code>null</code>, where CloudPlayerPlayingProgress represents the current playback progress of the video frame, and 1000 represents the current playback progress is 1000ms.</td>
</tr>
<tr data-row-level="13-1">
<td>Enable</td>
<td>Number</td>
<td>No</td>
<td>Whether to enable StreamData configuration.<ul><li>0: Disable, default value.</li><li>1: Enable.</li></ul></td>
</tr>
<tr data-row-level="13-2">
<td>Interval</td>
<td>Number</td>
<td>No</td>
<td>Set the SEI information sending frequency (in milliseconds) for transmitting StreamData data, default value is 1000, indicating that a SEI information carrying StreamData data will be sent every 1 second.</td>
</tr>
<tr data-row-level="14" data-row-child="true">
<td>ExtensionParams</td>
<td>Array of Object</td>
<td>No</td>
<td>Extension parameters, set in the form of <code>Key-Value</code>.This parameter is generally used for unconventional special parameters or some technical previews. Please fill in according to the actual situation. Conventional cloud player tasks can be ignored.</td>
</tr>
<tr data-row-level="14-1">
<td>Key</td>
<td>String</td>
<td>No</td>
<td>Key value.</td>
</tr>
<tr data-row-level="14-2">
<td>Value</td>
<td>String</td>
<td>No</td>
<td>Value value.</td>
</tr>
<tr data-row-level="15">
<td>RoomUserUpdate</td>
<td>Number</td>
<td>No</td>
<td>When a room is automatically created because the RoomId does not exist while you are creating a cloud player, will the clients of other users in the room be notified by the onRoomUserUpdate callback when users enter or leave the room: <ul><li>0: No (default).</li><li>1: Yes.</li></ul><Note title="Note">If the RoomId exists, this parameter is invalid.</Note></td>
</tr>
</tbody></table>

## Request example

#### Request URL

```bash
https://cloud-player-api.zego.im/?Action=CreatePlayer
&AppId=1234567890
&SignatureNonce=15215528852396
&Timestamp=1234567890
&Signature=7a2c0f11145fb760d607a07b54825013
&SignatureVersion=2.0
&IsTest=false
```
#### Request body

```json
{
    "StreamUrl": "https://xxx.com/video/test.mp4",
    "BackupStreamUrl": "",
    "RoomId": "room_12",
    "StreamId": "stream",
    "PlayerName": "player_1",
    "VideoOptions": {
        "Width": 360,
        "Height": 640,
        "VideoBitrate": 600,
        "VideoCodec": 0,
        "Fps": 15,
        "RenderMode": 1
    },
    "AudioOptions": {
        "AudioCodec": 1,
        "AudioBitrate": 48,
        "SoundChannel": 1,
        "Volume": 100
    },
    "PlayTime": 0,
    "RepeatTimes": 1,
    "SeekTo": 0,
    "MaxIdleTime": 30,
    "StreamData": {
        "Enable": 1,
        "Interval": 1000
    }
}
```

## Response parameters

<table class="collapsible-table" >
  
<tbody><tr data-row-level="1">
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
<tr data-row-level="2">
<td>Code</td>
<td>Number</td>
<td>Error code.</td>
</tr>
<tr data-row-level="3">
<td>Message</td>
<td>String</td>
<td>Error description.</td>
</tr>
<tr data-row-level="4">
<td>RequestId</td>
<td>String</td>
<td>Request ID.</td>
</tr>
<tr data-row-level="5" data-row-child="true">
<td>Data</td>
<td>Object</td>
<td>Specific information returned.</td>
</tr>
<tr data-row-level="5-1">
<td>PlayerId</td>
<td>String</td>
<td>Unique identifier of the player.</td>
</tr>
<tr data-row-level="5-2">
<td>RoomId</td>
<td>String</td>
<td>Room ID.</td>
</tr>
<tr data-row-level="5-3">
<td>StreamId</td>
<td>String</td>
<td>Stream ID.</td>
</tr>
<tr data-row-level="5-4">
<td>CreateTime</td>
<td>Number</td>
<td>Player creation time, Unix timestamp in seconds.</td>
</tr>
</tbody></table>

## Response example
```json
{
    "Code": 0,
    "Message": "succeed",
    "RequestId": "abcd123",
    "Data": {
        "PlayerId": "XXXXXXXXXXXX",
        "RoomId": "room_12",
        "StreamId": "stream",
        "CreateTime": 1681221508
    }
}
```

## Return codes

The following are only the return codes related to the interface business logic. For the complete list of return codes, please refer to [Global Return Codes](./return%20codes.mdx).

<table>
  
<tbody><tr>
<th>Return Code</th>
<th>Description</th>
<th>Suggested Action</th>
</tr>
<tr>
<td>0</td>
<td>Success.</td>
<td>-</td>
</tr>
<tr>
<td>100000004</td>
<td>Signature expired.</td>
<td>Please regenerate the signature.</td>
</tr>
<tr>
<td>100000005</td>
<td>Signature error.</td>
<td>Please confirm if the parameters used to generate the signature are correct.</td>
</tr>
<tr>
<td>350006001</td>
<td>Interface request frequency exceeds the limit.</td>
<td>Please confirm the QPS limit for the corresponding interface and reduce the request frequency.</td>
</tr>
<tr>
<td>350006002</td>
<td>Gateway verification failed.</td>
<td>Please contact ZEGOCLOUD technical support for assistance.</td>
</tr>
<tr>
<td>350006003</td>
<td>Invalid input parameters.</td>
<td>Please adjust the values of the corresponding parameters according to the Message prompt.</td>
</tr>
<tr>
<td>350006006</td>
<td>Service not activated.</td>
<td>Please contact ZEGOCLOUD technical support to activate the service.</td>
</tr>
<tr>
<td>350006007</td>
<td>Concurrent number of cloud players has reached the limit.</td>
<td>Please confirm if the number of cloud players created currently exceeds the limit. The default limit is 50.</td>
</tr>
<tr>
<td>350006008</td>
<td>There is already a running cloud player with the same name.</td>
<td>Please confirm if there is already a cloud player with the same PlayerName that is currently running.</td>
</tr>
<tr>
<td>350010000</td>
<td>System error.</td>
<td>Please contact ZEGOCLOUD technical support for assistance.</td>
</tr>
</tbody></table>
