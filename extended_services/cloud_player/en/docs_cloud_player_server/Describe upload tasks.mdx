# Describe upload tasks

- - -

## Overview

Call this method to retrieve the details of a specified upload task or multiple upload tasks.


## Request method and endpoint

- Request method: POST
- Request URL: `https://cloud-player-api.zego.im/?Action=DescribeUploadTasks`
- Protocol: HTTPS
- Rate limit: 20 times/second

## Request parameters

The following list only lists the interface request parameters. For common parameters, please refer to [Accessing server APIs - Common request parameters](./APIs%20method.mdx#2-common-parameters).

<Note title="Note">

- If none of the following parameters are provided, it means retrieving the details of all upload tasks, with the result containing details of up to 50 tasks.
- If only `UploadTaskId` is provided, it means querying the details of the corresponding upload task.
- When both `UploadTaskId` and `Status` are provided, if the `Status` does not match the actual status of the upload task, the result will be empty.
</Note>

<table>
  
<tbody><tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
<tr>
<td>UploadTaskId</td>
<td>String</td>
<td>No</td>
<td>The upload task ID to be queried. When this parameter is passed, the <code>PageSize</code> is invalid.</td>
</tr>
<tr>
<td>Status</td>
<td>Number</td>
<td>No</td>
<td>Query upload tasks in a specific state. The following values are supported:
<ul> <li>0: Default value, meaningless.</li> <li>1: Pending.</li> <li>2: Uploading.</li> <li>3: Pending for retry.</li> <li>4: Upload successful.</li> <li>5: Upload failed.</li> <li>6: Canceled.</li> <li>7: Expired.</li> </ul></td>
</tr>
<tr>
<td>PageSize</td>
<td>Number</td>
<td>No</td>
<td>The maximum amount of data returned for the current request. The value range is (0, 50], and if empty, the default is 50.</td>
</tr>
<tr>
<td>PageToken</td>
<td>String</td>
<td>No</td>
<td>Pagination flag. <br />
This parameter is not required for the first query. When the <code>NextPageToken</code> in the returned parameters is not empty, it indicates that the query results have not been fully retrieved. When calling the interface again to continue the query, fill in the value of <code>NextPageToken</code> in this parameter.</td>
</tr>
</tbody></table>

## Request example

#### Request URL

```bash
https://cloud-player-api.zego.im/?Action=DescribeUploadTasks
&AppId=1234567890
&SignatureNonce=15215528852396
&Timestamp=1234567890
&Signature=7a2c0f11145fb760d607a07b54825013
&SignatureVersion=2.0
&IsTest=false
```
#### Request body

<CodeGroup>
```json title="Query a Single Upload Task"
  {
    "UploadTaskId": "upload_task_1",
  }
```
```json title="Get Multiple Upload Tasks"
  {
    // First query for upload tasks with the "pending" status, returning 10 results.
    "PageSize": 10,
    "Status": 1,
    "PageToken": ""
  }
  ```
</CodeGroup>

## Response parameters

<table class="collapsible-table" >
  
<tbody><tr data-row-level="1">
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
<tr data-row-level="2">
<td>Code</td>
<td>Number</td>
<td>Return code.</td>
</tr>
<tr data-row-level="3">
<td>Message</td>
<td>String</td>
<td>Description of the operation result.</td>
</tr>
<tr data-row-level="4">
<td>RequestId</td>
<td>String</td>
<td>Request ID.</td>
</tr>
<tr data-row-level="5" data-row-child="true">
<td>Data</td>
<td>Object</td>
<td>Specific information returned.</td>
</tr>
<tr data-row-level="5-1">
<td>TotalSize</td>
<td>Number</td>
<td>Total number of query results.</td>
</tr>
<tr data-row-level="5-2">
<td>NextPageToken</td>
<td>String</td>
<td>
Pagination flag.
<ul>
  <li>If not empty, it indicates that there are more results to return. This value needs to be set in the request parameter <code>PageToken</code> to call the interface again and fetch the remaining results.</li>
  <li>If empty, all result information has been returned.</li>
</ul>
<Note title="Note">Aside from the above, this field has no correlation with the list information, so please do not use it for any other logic.</Note>
</td>
</tr>
<tr data-row-level="5-3" data-row-child="true">
<td>UploadTasks</td>
<td>Array of Object</td>
<td>Query result details.</td>
</tr>
<tr data-row-level="5-3-1">
<td>UploadTaskId</td>
<td>String</td>
<td>Upload task ID.</td>
</tr>
<tr data-row-level="5-3-2">
<td>StreamUrl</td>
<td>String</td>
<td>URL of the media resource.</td>
</tr>
<tr data-row-level="5-3-3">
<td>Title</td>
<td>String</td>
<td>File title.</td>
</tr>
<tr data-row-level="5-3-4">
<td>Status</td>
<td>Number</td>
<td>
Upload status, with values as follows:
<ul>
  <li>1: Pending</li>
  <li>2: Uploading</li>
  <li>3: Pending for retry</li>
  <li>4: Upload successful</li>
  <li>5: Upload failed</li>
  <li>6: Canceled</li>
  <li>7: Expired</li>
</ul></td>
</tr>
<tr data-row-level="5-3-5">
<td>RetryCount</td>
<td>Number</td>
<td>Number of upload retries.</td>
</tr>
<tr data-row-level="5-3-6">
<td>ExpiresAt</td>
<td>Number</td>
<td>File expiration Unix timestamp, in seconds.</td>
</tr>
<tr data-row-level="5-3-7">
<td>CreateTime</td>
<td>Number</td>
<td>Unix timestamp of the upload task creation time, in seconds.</td>
</tr>
<tr data-row-level="5-3-8">
<td>UploadStreamUrl</td>
<td>String</td>
<td>Public URL of the file after successful upload.</td>
</tr>
<tr data-row-level="5-3-9">
<td>InternalUploadStreamUrl</td>
<td>String</td>
<td>ZEGO internal URL of the file after successful upload.
<Note title="Note">It is recommended to use this as the <code>StreamUrl</code> when [creating a media player](./Create%20Player.mdx).</Note></td>
</tr>
</tbody></table>


## Response example

```json
{
    "Code": 0,
    "Message": "succeed",
    "RequestId": "abcd123",
    "Data": {
        "TotalSize": 1,
        "NextPageToken": "",
        "UploadTask": [
            {
                "UploadTaskId": "upload_task_1",
                "StreamUrl": "https://xxx.com/video/test.mp4",
                "Title": "your-title.mp4",
                "Status": 4,
                "RetryCount": 0,
                "ExpiresAt": 1742989076,
                "CreateTime": 1735213076,
                "UploadStreamUrl": "https://yyy.com/video/test.mp4",
                "InternalUploadStreamUrl": "https://zzz.com/video/test.mp4"
            }
        ]
    }
}
```

## Return codes

The following are only the return codes related to the interface business logic. For the complete list of return codes, please refer to [Return Codes](./return%20codes.mdx).

<table>
  
<tbody><tr>
<th>Return Code</th>
<th>Description</th>
<th>Suggested Action</th>
</tr>
<tr>
<td>0</td>
<td>Success.</td>
<td>-</td>
</tr>
<tr>
<td>100000004</td>
<td>Signature expired.</td>
<td>Please regenerate the signature.</td>
</tr>
<tr>
<td>100000005</td>
<td>Signature error.</td>
<td>Please confirm if the parameters used to generate the signature are correct.</td>
</tr>
<tr>
<td>350006001</td>
<td>Interface request frequency exceeds the limit.</td>
<td>Please confirm the QPS limit for the corresponding interface and reduce the request frequency.</td>
</tr>
<tr>
<td>350006002</td>
<td>Gateway verification failed.</td>
<td>Please contact ZEGOCLOUD technical support for assistance.</td>
</tr>
<tr>
<td>350006003</td>
<td>Invalid input parameters.</td>
<td>Please adjust the values of the corresponding parameters according to the Message prompt.</td>
</tr>
<tr>
<td>350006006</td>
<td>Service not activated.</td>
<td>Please contact ZEGOCLOUD technical support to activate the service.</td>
</tr>
<tr>
<td>350010000</td>
<td>System error.</td>
<td>Please contact ZEGOCLOUD technical support for assistance.</td>
</tr>
</tbody></table>
