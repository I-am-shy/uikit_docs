# 使用 Token 鉴权

- - -

@@@mini_game_token@@@

### 2 设置 Token 

用户在调用 [init\|_blank](@init) 接口初始化 ZEGO MiniGameEngine SDK 时传入 Token。

```js
// 初始化 ZEGO MiniGameEngine SDK
let appID = 12345678; // appID 在 [ZEGO 控制台](https://console.zego.im/) 创建项目后获得
let token = "your token"; // 从您的服务器获取到的 Token
let userInfo = {
    userId: "your user userId", // 自定义的用户 ID
    userName: "your user Name", // 自定义的用户名称
    avatar: "your user avatar" // 用户头像 URL
};
let instance = await ZegoMiniGameEngine.init(appID, token, userInfo);
```

### 3 处理 Token 过期

在 Token 过期前 30 秒，SDK 会通过 [tokenWillExpire\|_blank](@tokenWillExpire) 回调发出通知。

收到该回调后，您需要从自己的服务端获取新的有效 Token，并调用 SDK 提供的 [updateToken\|_blank](@updateToken) 接口更新 Token。

```js
// 获取 Token 将于 30s 后过期的通知
instance.on("tokenWillExpire", async (data) => {
    // 更新 Token
    const token = ; // 新 Token
    instance.updateToken(token);
});
```
