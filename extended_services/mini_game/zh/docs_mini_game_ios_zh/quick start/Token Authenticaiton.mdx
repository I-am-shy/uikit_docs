# 使用 Token 鉴权

- - -

@@@mini_game_token@@@

### 2 设置 Token 

用户在调用 [init\|_blank](@init) 接口初始化 ZEGO MiniGameEngine SDK 时传入 Token。

```objc
// 请先初始化 ZEGO Express SDK，否则无法收到下面 init 接口的回调

// 初始化 ZEGO MiniGameEngine SDK
ZegoGameUserInfo *userInfo = [[ZegoGameUserInfo alloc] init];
// appID 在 [ZEGO 控制台](https://console.zego.im/) 创建项目后获得，格式为：appID + L，如：1234567890L
long appID = 12345678L; 
NSString *token = @"your token"; // 从您的服务器获取到的 Token
userInfo.userID = @"your user ID"; // 自定义的用户 ID
userInfo.userName = @"your user name"; // 自定义的用户名称
userInfo.avatar = @"your user avatar"; // 用户头像 URL
[ZegoMiniGameEngine.sharedEngine init:appID token:token userInfo:userInfo callBack:^(NSInteger errorCode2) {

}];
```

### 3 处理 Token 过期

在 Token 过期前 30 秒，SDK 会通过 [onTokenWillExpire\|_blank](@onTokenWillExpire) 回调发出通知。

收到该回调后，您需要从自己的服务端获取新的有效 Token，并调用 SDK 提供的 [updateToken\|_blank](@updateToken) 接口更新 Token。

```objc
// 获取 Token 将于 30s 后过期的通知
- (void)onTokenWillExpire {
    // 更新 Token
    [ZegoMiniGameEngine.sharedEngine updateToken:@"新 Token"];
}
```
